"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("effector"),t=require("effector-inspector"),o=require("just-debounce-it"),n=require("detect-node"),c=require("set-value");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var r=i(e),a=i(t),l=s(o),f=s(n),d=s(c);function u(e){return e.path.filter((e=>"@effector-logger"!==e)).join("/")}function p(e){var t,o,n;return null!==(n=null===(o=null===(t=e.defaultConfig)||void 0===t?void 0:t.loc)||void 0===o?void 0:o.file)&&void 0!==n?n:" "}function g(t,o,n){e.is.domain(o,{loc:{file:"/src/lib.ts",line:31,column:8},sid:"-5xrbn0"})?function(t,o,n){e.is.store(t,{loc:{file:"/src/lib.ts",line:11,column:8},sid:"-6vukfe"})&&n(t.getState()),(e.is.store(t,{loc:{file:"/src/lib.ts",line:14,column:22},name:"watchUnit",sid:"-tu8c8a"})?t.updates:t).watch(n)}(t,0,n):function(t,o,n){e.is.store(t,{loc:{file:"/src/lib.ts",line:18,column:8},sid:"-6s009v"})&&n(o.getState(t));const c=e.createNode({node:[e.step.run({fn:n})]}),s=(e.is.store(t,{loc:{file:"/src/lib.ts",line:24,column:22},name:"watchUnit",sid:"-f5u209"})?t.updates:t).graphite.id;(o.additionalLinks[s]=o.additionalLinks[s]||[]).push(c)}(t,o,n)}const m=f.default?"  ":"",h=[],b=[],v=[],E="padding-left: 4px; padding-right: 4px; font-weight: normal;",y="padding-left: 4px; padding-right: 4px; font-weight: normal;",x="background-color: #7e57c2; color: #fff",$="background-color: #9ccc65; color: #000",j="background-color: #26a69a; color: #000",w="",O="color: #9e9e9e; padding-left: 20px;",S="color: currentColor; background-color: transparent;",N=[["☄️","%s",'line-height:1.5; color: #000; font-family: "Apple Emoji Font"; font-weight: normal !important;'],["effector","%s","font-family: Menlo, monospace;"]];function k(e,t,o){const n=[],c=[];e.unshift(...N),e.forEach((([t,o,s],i)=>{n.push(`%c${o}%c`),c.push(`${E} ${s}`,t,((e,t,o)=>e===t-1?S:o)(i,e.length,`${E} ${s}`))})),t.forEach((([e,t,o])=>{n.push(`%c${t}`),c.push(`${y} ${o}`,e)}));const s=[n.join(m),...c];"open"===o?console.group(...s):"collapsed"===o?console.groupCollapsed(...s):console.log(...s)}const _=["new","%s","background-color: #29b6f6; color: #000"],D=e=>e.split("/").pop()||e,C=e=>[D(e),"%s",x],q=e=>[D(e),"%s",$],P=e=>[D(e),"%s",j],z=l.default((()=>{const e=h.splice(0),t=b.splice(0),o=v.splice(0);e.length+t.length+o.length>0&&(k([_],[["Initialized","%s",""],[`events(${t.length})`,"%s",""],[`effects(${o.length})`,"%s",""],[`stores(${e.length})`,"%s",""]],"collapsed"),e.length&&e.forEach((e=>{const t=u(e.compositeName),o=p(e);k([_,C(t)],[["-> ","%s",""],[e.getState(),"%o",""],[o,"%s",O],[t,"%s",""]])})),t.length>0&&t.forEach((e=>{const t=u(e.compositeName),o=p(e);k([_,q(t)],[[o,"%s",O],[t,"%s",""]])})),o.length>0&&o.forEach((e=>{const t=u(e.compositeName),o=p(e);k([_,P(t)],[[o,"%s",O],[t,"%s",""]])})),console.groupEnd())}),5);const F="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;const I={instanceId:"object"==typeof document?`☄️ ${document.title}`:"☄️ no title instance"},L={};function M(e,t){d.default(L,e.replace(/\//g,"."),t)}function U(e,t){M(e,{inFlight:t.inFlight.getState(),pending:t.pending.getState()})}const T={reduxDevtools:"enabled",console:"enabled",inspector:"enabled"};const X=r.createDomain("@effector-logger",{loc:{file:"/src/index.ts",line:4,column:13},name:"root",sid:"-8cy7h7"});!function(t,o={}){const n=Object.assign(Object.assign({},T),o),c="enabled"===n.console,s="enabled"===n.reduxDevtools,i="enabled"===n.inspector;function r(e){const o=u(e.compositeName),n=p(e);c&&function(e){b.push(e),z()}(e),i&&a.addEvent(e),g(e,t,(e=>{c&&function(e,t,o){k([q(e)],[[o,"%o","padding-left: 4px;"],[t,"%s",O],[e,"%s",O]])}(o,n,e),s&&function(e,t){F&&F.send({type:`${e} (event)`,payload:t},L,I)}(o,e)}))}function l(e){const o=u(e.compositeName),n=p(e);c&&function(e){h.push(e),z()}(e),s&&function(e){M(u(e.compositeName),e.defaultState)}(e),i&&a.addStore(e);const r=e.map.bind(e);e.map=(t,o)=>{const n=r(t,o);return n.compositeName.path=e.compositeName.path.slice(0,-1),n.compositeName.path.push(e.compositeName.path.slice(-1)+" -> *"),i&&a.addStore(n,{mapped:!0}),n},g(e,t,(e=>{c&&function(e,t,o){k([C(e)],[["-> ","%s",""],[o,"%o",""],[t,"%s",O],[e,"%s",O]])}(o,n,e),s&&function(e,t){M(e,t),F&&F.send({type:`${e} (store updated)`,value:t},L,I)}(o,e)}))}function f(e){const o=u(e.compositeName),n=p(e);c&&function(e){v.push(e),z()}(e),s&&function(e,t){U(e,t)}(o,e),i&&a.addEffect(e),g(e,t,(t=>{c&&function(e,t,o){k([P(e)],[[o,"%o","padding-left: 4px;"],[t,"%s",O],[e,"%s",O]])}(o,n,t),s&&function(e,t,o){U(e,t),F&&F.send({type:`${e} (effect called)`,params:o},L,I)}(o,e,t)})),g(e.done,t,(({params:t,result:i})=>{c&&function(e,t,o,n){k([P(e)],[["done ✅","%s",w],[o,"(%o)","padding-left: 4px;"],["-> ","%s",""],[n,"%o","padding: 0;"],[t,"%s",O],[e,"%s",O]])}(o,n,t,i),s&&function(e,t,o,n){U(e,t),F&&F.send({type:`${e}.done (effect finished)`,params:o,result:n},L,I)}(o,e,t,i)})),g(e.fail,t,(({params:t,error:i})=>{c&&function(e,t,o,n){const c=n instanceof Error;k([P(e)],[["fail ❌","%s",w],[o,"(%o)","padding-left: 4px;"],["-> ","%s",""],c?[String(n),"%s",""]:[n,"%o","padding: 0;"],[t,"%s",O],[e,"%s",O]],c?"collapsed":void 0),c&&k([],[[" ","%s",""],[n,"%o","padding-left: 20px;"]]),console.groupEnd()}(o,n,t,i),s&&function(e,t,o,n){U(e,t),F&&F.send({type:`${e}.fail (effect finished)`,params:o,error:n},L,I)}(o,e,t,i)}))}if(e.is.domain(t,{loc:{file:"/src/attach.ts",line:89,column:8},sid:"4o82wz"}))t.onCreateEvent(r),t.onCreateStore(l),t.onCreateEffect(f);else{const e=t.cloneOf;if(void 0===e)throw new Error("Scope should be created from domain");for(const t of e.history.events)r(t);for(const t of e.history.effects)f(t);for(const t of e.history.stores)l(t)}}(X);const{createDomain:A,createStore:R,createEffect:V,createEvent:B}=X;exports.createDomain=A,exports.createEffect=V,exports.createEvent=B,exports.createStore=R,Object.keys(e).forEach((function(t){"default"===t||exports.hasOwnProperty(t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}})}));
//# sourceMappingURL=index.js.map

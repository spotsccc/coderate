// modules are defined as an array
// [ module function, map of requires ]
//
// map of requires is short require name -> numeric require
//
// anything defined in a previous bundle is accessed via the
// orig method which is the require for previous bundles
parcelRequire = (function (modules, cache, entry, globalName) {
  // Save the require from previous bundle to this closure if any
  var previousRequire = typeof parcelRequire === 'function' && parcelRequire;
  var nodeRequire = typeof require === 'function' && require;

  function newRequire(name, jumped) {
    if (!cache[name]) {
      if (!modules[name]) {
        // if we cannot find the module within our internal map or
        // cache jump to the current global require ie. the last bundle
        // that was added to the page.
        var currentRequire = typeof parcelRequire === 'function' && parcelRequire;
        if (!jumped && currentRequire) {
          return currentRequire(name, true);
        }

        // If there are other bundles on this page the require from the
        // previous one is saved to 'previousRequire'. Repeat this as
        // many times as there are bundles until the module is found or
        // we exhaust the require chain.
        if (previousRequire) {
          return previousRequire(name, true);
        }

        // Try the node require function if it exists.
        if (nodeRequire && typeof name === 'string') {
          return nodeRequire(name);
        }

        var err = new Error('Cannot find module \'' + name + '\'');
        err.code = 'MODULE_NOT_FOUND';
        throw err;
      }

      localRequire.resolve = resolve;
      localRequire.cache = {};

      var module = cache[name] = new newRequire.Module(name);

      modules[name][0].call(module.exports, localRequire, module, module.exports, this);
    }

    return cache[name].exports;

    function localRequire(x){
      return newRequire(localRequire.resolve(x));
    }

    function resolve(x){
      return modules[name][1][x] || x;
    }
  }

  function Module(moduleName) {
    this.id = moduleName;
    this.bundle = newRequire;
    this.exports = {};
  }

  newRequire.isParcelRequire = true;
  newRequire.Module = Module;
  newRequire.modules = modules;
  newRequire.cache = cache;
  newRequire.parent = previousRequire;
  newRequire.register = function (id, exports) {
    modules[id] = [function (require, module) {
      module.exports = exports;
    }, {}];
  };

  var error;
  for (var i = 0; i < entry.length; i++) {
    try {
      newRequire(entry[i]);
    } catch (e) {
      // Save first error but execute all entries
      if (!error) {
        error = e;
      }
    }
  }

  if (entry.length) {
    // Expose entry point to Node, AMD or browser globals
    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js
    var mainExports = newRequire(entry[entry.length - 1]);

    // CommonJS
    if (typeof exports === "object" && typeof module !== "undefined") {
      module.exports = mainExports;

    // RequireJS
    } else if (typeof define === "function" && define.amd) {
     define(function () {
       return mainExports;
     });

    // <script>
    } else if (globalName) {
      this[globalName] = mainExports;
    }
  }

  // Override the current require with this new one
  parcelRequire = newRequire;

  if (error) {
    // throw error from earlier, _after updating parcelRequire_
    throw error;
  }

  return newRequire;
})({"../node_modules/effector/effector.mjs":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.allSettled = A;
exports.attach = y;
exports.combine = p;
exports.createApi = b;
exports.createDomain = v;
exports.createEffect = h;
exports.createEvent = u;
exports.createNode = a;
exports.createStore = d;
exports.createStoreObject = m;
exports.fork = $;
exports.fromObservable = k;
exports.guard = C;
exports.hydrate = N;
exports.launch = o;
exports.merge = w;
exports.restore = M;
exports.sample = x;
exports.scopeBind = F;
exports.serialize = O;
exports.setStoreName = s;
exports.split = j;
exports.withRegion = n;
exports.withFactory = exports.version = exports.step = exports.is = exports.forward = exports.clearNode = void 0;

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function e(e, t) {
  for (var _r in e) {
    t(e[_r], _r);
  }
}

function t(e, t) {
  e.forEach(t);
}

function r(e, t) {
  if (!e) throw Error(t);
}

function n(e, t) {
  Ne = {
    parent: Ne,
    value: e,
    template: Ie(e, 'template') || Fe(),
    sidRoot: Ie(e, 'sidRoot') || Ne && Ne.sidRoot
  };

  try {
    return t();
  } finally {
    Ne = je(Ne);
  }
}

function a() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
      _ref$node = _ref.node,
      e = _ref$node === void 0 ? [] : _ref$node,
      r = _ref.from,
      n = _ref.source,
      _ref$parent = _ref.parent,
      a = _ref$parent === void 0 ? r || n : _ref$parent,
      o = _ref.to,
      l = _ref.target,
      _ref$child = _ref.child,
      s = _ref$child === void 0 ? o || l : _ref$child,
      _ref$scope = _ref.scope,
      i = _ref$scope === void 0 ? {} : _ref$scope,
      _ref$meta = _ref.meta,
      f = _ref$meta === void 0 ? {} : _ref$meta,
      _ref$family = _ref.family,
      c = _ref$family === void 0 ? {
    type: 'regular'
  } : _ref$family,
      u = _ref.regional;

  var d = Re(a),
      p = Re(c.links),
      m = Re(c.owners),
      g = [];
  t(e, function (e) {
    return e && G(g, e);
  });
  var h = {
    id: ae(),
    seq: g,
    next: Re(s),
    meta: f,
    scope: i,
    family: {
      type: c.type || "crosslink",
      links: p,
      owners: m
    }
  };
  return t(p, function (e) {
    return G(we(e), h);
  }), t(m, function (e) {
    return G(Se(e), h);
  }), t(d, function (e) {
    return G(e.next, h);
  }), u && Ne && $e(Ce(Ne), [h]), h;
}

function o(e, r, n) {
  var a = Je,
      o = null,
      l = Ue;
  if (e.target && (r = e.params, n = e.defer, a = 'page' in e ? e.page : a, e.stack && (o = e.stack), l = Ae(e) || l, e = e.target), l && Ue && l !== Ue && (Ue = null), Array.isArray(e)) for (var _t = 0; _t < e.length; _t++) {
    Le('pure', a, ke(e[_t]), o, r[_t], l);
  } else Le('pure', a, ke(e), o, r, l);
  if (n && !He) return;
  var s,
      i,
      f,
      c,
      u,
      d,
      p = {
    isRoot: He,
    currentPage: Je,
    scope: Ue,
    isWatch: Ge
  };
  He = 0;

  var _loop = function _loop() {
    var _c = c,
        e = _c.idx,
        r = _c.stack,
        n = _c.type;
    f = r.node, Je = u = r.page, Ue = Ae(r), u ? d = u.reg : Ue && (d = Ue.reg);
    var a = !!u,
        o = !!Ue,
        l = {
      fail: 0,
      scope: f.scope
    };
    s = i = 0;

    for (var _t2 = e; _t2 < f.seq.length && !s; _t2++) {
      var _c2 = f.seq[_t2];

      if (_c2.order) {
        var _c2$order = _c2.order,
            _a = _c2$order.priority,
            _o = _c2$order.barrierID,
            _l = _o ? u ? "".concat(u.fullID, "_").concat(_o) : _o : 0;

        if (_t2 !== e || n !== _a) {
          _o ? We.has(_l) || (We.add(_l), Be(_t2, r, _a, _o)) : Be(_t2, r, _a);
          return "continue|e";
        }

        _o && We.delete(_l);
      }

      switch (_c2.type) {
        case 'mov':
          {
            var _e3 = void 0,
                _t3 = _c2.data;

            switch (_t3.from) {
              case z:
                _e3 = Ce(r);
                break;

              case "a":
              case 'b':
                _e3 = r[_t3.from];
                break;

              case "value":
                _e3 = _t3.store;
                break;

              case "store":
                if (d && !d[_t3.store.id]) if (a) {
                  var _e4 = Xe(u, _t3.store.id);

                  r.page = u = _e4, _e4 ? d = _e4.reg : o ? (Ze(Ue, _t3.store, 0, 1, _t3.softRead), d = Ue.reg) : d = void 0;
                } else o && Ze(Ue, _t3.store, 0, 1, _t3.softRead);
                _e3 = ge(d && d[_t3.store.id] || _t3.store);
            }

            switch (_t3.to) {
              case z:
                r.value = _e3;
                break;

              case "a":
              case 'b':
                r[_t3.to] = _e3;
                break;

              case "store":
                Ye(u, Ue, f, _t3.target).current = _e3;
            }

            break;
          }

        case 'compute':
          var _e2 = _c2.data;

          if (_e2.fn) {
            Ge = 'watch' === Ie(f, 'op');

            var _t4 = _e2.safe ? (0, _e2.fn)(Ce(r), l.scope, r) : et(l, _e2.fn, r);

            _e2.filter ? i = !_t4 : r.value = _t4, Ge = p.isWatch;
          }

      }

      s = l.fail || i;
    }

    if (!s) {
      var _e5 = Ce(r);

      t(f.next, function (t) {
        Le('child', u, t, r, _e5, Ae(r));
      });

      var _n = Ae(r);

      if (_n) {
        Ie(f, 'needFxCounter') && Le('child', u, _n.fxCount, r, _e5, _n), Ie(f, 'storeChange') && Le('child', u, _n.storeChange, r, _e5, _n);
        var _a2 = _n.additionalLinks[f.id];
        _a2 && t(_a2, function (t) {
          Le('child', u, t, r, _e5, _n);
        });
      }
    }
  };

  e: for (; c = Ee();) {
    var _ret = _loop();

    if (_ret === "continue|e") continue e;
  }

  He = p.isRoot, Je = p.currentPage, Ue = Ae(p);
}

function l(t) {
  var r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "combine";
  var n = r + '(',
      a = '',
      o = 0;
  return e(t, function (e) {
    o < 25 && (null != e && (n += a, n += _(e) ? tt(e).fullName : e.toString()), o += 1, a = ', ');
  }), n + ')';
}

function s(e, t) {
  e.shortName = t, Object.assign(tt(e), i(t, je(e)));
}

function i(e, t) {
  var r,
      n,
      a = e;

  if (t) {
    var _a3 = tt(t);

    0 === e.length ? (r = _a3.path, n = _a3.fullName) : (r = _a3.path.concat([e]), n = 0 === _a3.fullName.length ? e : _a3.fullName + '/' + e);
  } else r = 0 === e.length ? [] : [e], n = e;

  return {
    shortName: a,
    fullName: n,
    path: r
  };
}

function f(e, t) {
  var r = t ? e : e[0];
  return Y(r), r.and && (e = r.and), [e, r.or];
}

function c(e) {
  var r = Fe();

  if (r) {
    var _n2 = r.handlers[e];

    for (var _len = arguments.length, t = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      t[_key - 1] = arguments[_key];
    }

    if (_n2) return _n2.apply(void 0, [r].concat(t));
  }
}

function u(e, t) {
  var r = function r(e) {
    for (var _len2 = arguments.length, t = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
      t[_key2 - 1] = arguments[_key2];
    }

    return J(!Ie(r, 'derived'), 'call of derived event', 'createEvent'), Je ? function (e, t, r, n) {
      var a = Je,
          o = null;
      if (t) for (o = Je; o && o.template !== t;) {
        o = je(o);
      }
      Qe(o);
      var l = e.create(r, n);
      return Qe(a), l;
    }(r, n, e, t) : r.create(e, t);
  },
      n = Fe();

  return Object.assign(r, {
    graphite: a({
      meta: pt("event", r, e, t),
      regional: 1
    }),
    create: function create(e) {
      return o({
        target: r,
        params: e,
        scope: Ue
      }), e;
    },
    watch: function watch(e) {
      return ut(r, e);
    },
    map: function map(e) {
      return gt(r, R, e, [ie({
        fn: ve
      })]);
    },
    filter: function filter(e) {
      return gt(r, "filter", e.fn ? e : e.fn, [fe({
        fn: ve
      })]);
    },
    filterMap: function filterMap(e) {
      return gt(r, 'filterMap', e, [ie({
        fn: ve
      }), ue(function (e) {
        return !X(e);
      }, 1)]);
    },
    prepend: function prepend(e) {
      var t = u("* \u2192 " + r.shortName, {
        parent: je(r)
      });
      return c('eventPrepend', ke(t)), ft(t, r, [ie({
        fn: ve
      })], 'prepend', e), dt(r, t), t;
    }
  });
}

function d(e, n) {
  var l = me(e),
      s = mt('updates');
  c('storeBase', l);
  var i = l.id,
      f = {
    subscribers: new Map(),
    updates: s,
    defaultState: e,
    stateRef: l,
    getState: function getState() {
      var e,
          t = l;

      if (Je) {
        var _t5 = Je;

        for (; _t5 && !_t5.reg[i];) {
          _t5 = je(_t5);
        }

        _t5 && (e = _t5);
      }

      return !e && Ue && (Ze(Ue, l, 1), e = Ue), e && (t = e.reg[i]), ge(t);
    },
    setState: function setState(e) {
      return o({
        target: f,
        params: e,
        defer: 1,
        scope: Ue
      });
    },
    reset: function reset() {
      for (var _len3 = arguments.length, e = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        e[_key3] = arguments[_key3];
      }

      return t(e, function (e) {
        return f.on(e, function () {
          return f.defaultState;
        });
      }), f;
    },
    on: function on(e, r) {
      return ee(e, '.on', 'first argument'), J(!Ie(f, 'derived'), '.on in derived store', 'createStore'), t(Array.isArray(e) ? e : [e], function (e) {
        f.off(e), Me(f).set(e, st(ht(e, f, 'on', be, r)));
      }), f;
    },
    off: function off(e) {
      var t = Me(f).get(e);
      return t && (t(), Me(f).delete(e)), f;
    },
    map: function map(e, t) {
      var r, n;
      K(e) && (r = e, e = e.fn), J(X(t), 'second argument of store.map', 'updateFilter');
      var a = f.getState();
      Fe() ? n = null : X(a) || (n = e(a, t));
      var o = d(n, {
        name: "".concat(f.shortName, " \u2192 *"),
        derived: 1,
        and: r
      }),
          s = ht(f, o, R, ye, e);
      return he(xe(o), {
        type: R,
        fn: e,
        from: l
      }), xe(o).noInit = 1, c('storeMap', l, s), o;
    },
    watch: function watch(e, t) {
      if (!t || !_(e)) {
        var _t6 = ut(f, e);

        return c('storeWatch', l, e) || e(f.getState()), _t6;
      }

      return r(Q(t), 'second argument should be a function'), e.watch(function (e) {
        return t(f.getState(), e);
      });
    }
  },
      u = pt("store", f, n),
      p = f.defaultConfig.updateFilter;
  f.graphite = a({
    scope: {
      state: l,
      fn: p
    },
    node: [ue(function (e, t, r) {
      return r.scope && !r.scope.reg[l.id] && (r.b = 1), e;
    }), de(l), ue(function (e, t, _ref2) {
      var r = _ref2.a,
          n = _ref2.b;
      return !X(e) && (e !== r || n);
    }, 1), p && fe({
      fn: ye
    }), se({
      from: z,
      target: l
    })],
    child: s,
    meta: u,
    regional: 1
  });
  var m = Ie(f, 'sid');
  return m && ('ignore' !== Ie(f, 'serialize') && qe(f, 'storeChange', 1), l.sid = m), r(Ie(f, 'derived') || !X(e), "current state can't be undefined, use null instead"), $e(f, [s]), f;
}

function p() {
  for (var _len4 = arguments.length, e = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
    e[_key4] = arguments[_key4];
  }

  var t, n, a;

  var _f = f(e);

  var _f2 = _slicedToArray(_f, 2);

  e = _f2[0];
  a = _f2[1];
  var o,
      l,
      s,
      i = e[e.length - 1];

  if (Q(i) ? (n = e.slice(0, -1), t = i) : n = e, 1 === n.length) {
    var _e6 = n[0];
    V(_e6) || (o = _e6, l = 1);
  }

  if (!l && (o = n, t)) {
    s = 1;
    var _e7 = t;

    t = function t(_t7) {
      return _e7.apply(void 0, _toConsumableArray(_t7));
    };
  }

  return r(K(o), 'shape should be an object'), yt(Array.isArray(o), !s, o, a, t);
}

function m() {
  return J(0, 'createStoreObject', 'combine'), p.apply(void 0, arguments);
}

function g() {
  var e = {};
  return e.req = new Promise(function (t, r) {
    e.rs = t, e.rj = r;
  }), e.req.catch(function () {}), e;
}

function h(e, t) {
  var n = u(Q(e) ? {
    handler: e
  } : e, t),
      l = ke(n);
  qe(l, 'op', n.kind = "effect"), n.use = function (e) {
    return r(Q(e), '.use argument should be a function'), m.scope.handler = e, n;
  }, n.use.getCurrent = function () {
    return m.scope.handler;
  };
  var s = n.finally = mt('finally'),
      i = n.done = s.filterMap({
    named: 'done',
    fn: function fn(_ref3) {
      var e = _ref3.status,
          t = _ref3.params,
          r = _ref3.result;
      if ('done' === e) return {
        params: t,
        result: r
      };
    }
  }),
      f = n.fail = s.filterMap({
    named: 'fail',
    fn: function fn(_ref4) {
      var e = _ref4.status,
          t = _ref4.params,
          r = _ref4.error;
      if ('fail' === e) return {
        params: t,
        error: r
      };
    }
  }),
      c = n.doneData = i.map({
    named: 'doneData',
    fn: function fn(_ref5) {
      var e = _ref5.result;
      return e;
    }
  }),
      p = n.failData = f.map({
    named: 'failData',
    fn: function fn(_ref6) {
      var e = _ref6.error;
      return e;
    }
  }),
      m = a({
    scope: {
      handlerId: Ie(l, 'sid'),
      handler: n.defaultConfig.handler || function () {
        return r(0, "no handler used in ".concat(n.getType()));
      }
    },
    node: [ue(function (e, t, r) {
      var n = t,
          a = n.handler;

      if (Ae(r)) {
        var _e8 = Ae(r).handlers[n.handlerId];
        _e8 && (a = _e8);
      }

      return e.handler = a, e;
    }, 0, 1), ue(function (_ref7, a, o) {
      var e = _ref7.params,
          t = _ref7.req,
          r = _ref7.handler,
          _ref7$args = _ref7.args,
          n = _ref7$args === void 0 ? [e] : _ref7$args;

      var l = vt(e, t, 1, s, o),
          i = vt(e, t, 0, s, o),
          _bt = bt(r, i, n),
          _bt2 = _slicedToArray(_bt, 2),
          f = _bt2[0],
          c = _bt2[1];

      f && (K(c) && Q(c.then) ? c.then(l, i) : l(c));
    }, 0, 1)],
    meta: {
      op: 'fx',
      fx: 'runner'
    }
  });
  l.scope.runner = m, G(l.seq, ue(function (e, _ref8, r) {
    var t = _ref8.runner;
    var n = je(r) ? {
      params: e,
      req: {
        rs: function rs(e) {},
        rj: function rj(e) {}
      }
    } : e;
    return o({
      target: t,
      params: n,
      defer: 1,
      scope: Ae(r)
    }), n.params;
  }, 0, 1)), n.create = function (e) {
    var t = g(),
        r = {
      params: e,
      req: t
    };

    if (Ue) {
      if (!Ge) {
        var _e9 = Ue;
        t.req.finally(function () {
          Ke(_e9);
        }).catch(function () {});
      }

      o({
        target: n,
        params: r,
        scope: Ue
      });
    } else o(n, r);

    return t.req;
  };
  var h = n.inFlight = d(0, {
    named: 'inFlight'
  }).on(n, function (e) {
    return e + 1;
  }).on(s, function (e) {
    return e - 1;
  });
  qe(s, 'needFxCounter', 'dec'), qe(n, 'needFxCounter', 1);
  var y = n.pending = h.map({
    fn: function fn(e) {
      return e > 0;
    },
    named: 'pending'
  });
  return $e(n, [s, i, f, c, p, y, h]), n;
}

function y(e) {
  var _i$seq;

  var t;

  var _f3 = f(e, 1);

  var _f4 = _slicedToArray(_f3, 2);

  e = _f4[0];
  t = _f4[1];
  var _e10 = e,
      r = _e10.source,
      n = _e10.effect,
      a = _e10.mapParams,
      l = h(e, t);
  qe(l, 'attached', 1);
  var s,
      i = ke(l).scope.runner,
      c = ue(function (e, t, n) {
    var _bt3, _bt4;

    var s,
        i = e.params,
        f = e.req,
        c = e.handler,
        u = l.finally,
        d = vt(i, f, 0, u, n),
        p = n.a,
        m = L(c),
        g = 1;

    if (a ? (_bt3 = bt(a, d, [i, p]), _bt4 = _slicedToArray(_bt3, 2), g = _bt4[0], s = _bt4[1], _bt3) : s = r && m ? p : i, g) {
      if (!m) return e.args = [p, s], 1;
      o({
        target: c,
        params: {
          params: s,
          req: {
            rs: vt(i, f, 1, u, n),
            rj: d
          }
        },
        page: n.page,
        defer: 1
      });
    }
  }, 1, 1);

  if (r) {
    var _e11;

    V(r) ? (_e11 = r, $e(_e11, [l])) : (_e11 = p(r), $e(l, [_e11])), s = [de(xe(_e11)), c];
  } else s = [c];

  return (_i$seq = i.seq).splice.apply(_i$seq, [1, 0].concat(_toConsumableArray(s))), l.use(n), dt(n, l, "effect"), l;
}

function b() {
  for (var _len5 = arguments.length, t = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
    t[_key5] = arguments[_key5];
  }

  var _f5 = f(t),
      _f6 = _slicedToArray(_f5, 2),
      _f6$ = _slicedToArray(_f6[0], 2),
      r = _f6$[0],
      n = _f6$[1],
      a = _f6[1],
      o = {};

  return e(n, function (e, t) {
    var n = o[t] = u(t, {
      parent: je(r),
      config: a
    });
    r.on(n, e), dt(r, n);
  }), o;
}

function v(r, n) {
  var l = a({
    family: {
      type: "domain"
    },
    regional: 1
  }),
      s = {
    history: {},
    graphite: l,
    hooks: {}
  };
  l.meta = pt("domain", s, r, n), e({
    Event: u,
    Effect: h,
    Store: d,
    Domain: v
  }, function (e, r) {
    var n = r.toLowerCase(),
        a = mt("on".concat(r));
    s.hooks[n] = a;
    var l = new Set();
    s.history["".concat(n, "s")] = l, a.create = function (e) {
      return o(a, e), e;
    }, G(ke(a).seq, ue(function (e, t, r) {
      return r.scope = null, e;
    })), a.watch(function (e) {
      $e(s, [e]), l.add(e), e.ownerSet || (e.ownerSet = l), je(e) || (e.parent = s);
    }), $e(s, [a]), s["onCreate".concat(r)] = function (e) {
      return t(l, e), a.watch(e);
    }, s["create".concat(r)] = s[n] = function (t, r) {
      return a(e(t, {
        parent: s,
        or: r
      }));
    };
  });
  var i = je(s);
  return i && e(s.hooks, function (e, t) {
    return ft(e, i.hooks[t]);
  }), s;
}

function k(e) {
  Y(e);
  var t = D in e ? e[D]() : e;
  r(t.subscribe, 'expect observable to have .subscribe');
  var n = u(),
      a = st(n);
  return t.subscribe({
    next: n,
    error: a,
    complete: a
  }), n;
}

function w(e, t) {
  var r = u(t || l(e, 'merge'));
  return ee(e, 'merge', 'first argument'), ft(e, r, [], 'merge'), r;
}

function S(e, n) {
  var a = 0;
  return t(wt, function (t) {
    t in e && (r(null != e[t], St(n, t)), a = 1);
  }), a;
}

function x() {
  var _xt, _xt2;

  for (var _len6 = arguments.length, e = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
    e[_key6] = arguments[_key6];
  }

  var t,
      r,
      n,
      _f7 = f(e),
      _f8 = _slicedToArray(_f7, 2),
      _f8$ = _slicedToArray(_f8[0], 3),
      o = _f8$[0],
      l = _f8$[1],
      s = _f8$[2],
      i = _f8[1],
      p = 1;

  X(l) && K(o) && S(o, 'sample') && (l = o.clock, s = o.fn, p = !o.greedy, t = o.target, r = o.name, n = o.sid, o = o.source), (_xt = xt(o, l, 'sample'), _xt2 = _slicedToArray(_xt, 2), o = _xt2[0], l = _xt2[1], _xt), X(l) && (l = o), ee(l, 'sample', 'clock'), i || r || (r = o.shortName);
  var m = !!t;

  if (t || (V(o) && V(l) ? t = d(s ? s(ge(xe(o)), ge(xe(l))) : ge(xe(o)), {
    name: r,
    sid: n,
    or: i
  }) : (t = u(r, i), c('sampleTarget', ke(t)))), V(o)) {
    var _e12 = xe(o);

    $e(o, [ft(l, t, [c('sampleSourceLoader'), de(_e12, !s, p), s && ie({
      fn: be
    }), c('sampleSourceUpward', m)], "sample", s)]), c('sampleStoreSource', _e12);
  } else {
    var _e13 = me(0),
        _r2 = me(),
        _n3 = me();

    c('sampleNonStoreSource', _e13, _r2, _n3), a({
      parent: o,
      node: [se({
        from: z,
        target: _r2
      }), se({
        from: "value",
        store: 1,
        target: _e13
      })],
      family: {
        owners: [o, t, l],
        links: t
      },
      meta: {
        op: "sample"
      },
      regional: 1
    }), $e(o, [ft(l, t, [c('sampleSourceLoader'), se({
      from: z,
      target: _n3
    }), de(_e13, 1), ue(function (e) {
      return e;
    }, 1), de(_r2, 1, p), de(_n3), s && ie({
      fn: ye
    }), c('sampleSourceUpward', m)], "sample", s)]);
  }

  return t;
}

function C() {
  var _xt3, _xt4;

  for (var _len7 = arguments.length, e = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {
    e[_key7] = arguments[_key7];
  }

  var t = 'guard',
      _f9 = f(e),
      _f10 = _slicedToArray(_f9, 2),
      _f10$ = _slicedToArray(_f10[0], 2),
      n = _f10$[0],
      o = _f10$[1],
      l = _f10[1];

  o || (o = n, n = o.source), S(o, t);

  var _o2 = o,
      s = _o2.filter,
      i = _o2.greedy,
      c = _o2.clock,
      _o2$name = _o2.name,
      d = _o2$name === void 0 ? l && l.name ? l.name : t : _o2$name,
      p = o.target || u(d, l),
      m = _(s);

  return (_xt3 = xt(n, c, t), _xt4 = _slicedToArray(_xt3, 2), n = _xt4[0], c = _xt4[1], _xt3), c && (ee(c, t, 'clock'), n = x({
    source: n,
    clock: c,
    greedy: i,
    fn: m ? null : function (e, t) {
      return {
        source: e,
        clock: t
      };
    }
  })), ee(p, t, 'target'), m ? x({
    source: s,
    clock: n,
    target: a({
      node: [ue(function (_ref9) {
        var e = _ref9.guard;
        return e;
      }, 1), ue(function (_ref10) {
        var e = _ref10.data;
        return e;
      })],
      child: p,
      meta: {
        op: t
      },
      family: {
        owners: [n, s, p].concat(_toConsumableArray([].concat(c || []))),
        links: p
      },
      regional: 1
    }),
    fn: function fn(e, t) {
      return {
        guard: e,
        data: t
      };
    },
    greedy: i,
    name: d
  }) : (r(Q(s), '`filter` should be function or unit'), ft(n, p, c ? [fe({
    fn: function fn(_ref11, _ref12) {
      var e = _ref11.source,
          t = _ref11.clock;
      var r = _ref12.fn;
      return r(e, t);
    }
  }), ue(function (_ref13) {
    var e = _ref13.source;
    return e;
  })] : [fe({
    fn: ve
  })], t, s)), p;
}

function M(t, r, n) {
  if (V(t)) return t;

  if (E(t) || L(t)) {
    var _e14 = je(t),
        _a4 = d(r, {
      parent: _e14,
      name: t.shortName,
      and: n
    });

    return ft(L(t) ? t.doneData : t, _a4), _e14 && _e14.hooks.store(_a4), _a4;
  }

  var a = Array.isArray(t) ? [] : {};
  return e(t, function (e, t) {
    return a[t] = V(e) ? e : d(e, {
      name: t
    });
  }), a;
}

function j() {
  for (var _len8 = arguments.length, t = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
    t[_key8] = arguments[_key8];
  }

  var n,
      _f11 = f(t),
      _f12 = _slicedToArray(_f11, 2),
      _f12$ = _slicedToArray(_f12[0], 2),
      o = _f12$[0],
      l = _f12$[1],
      s = _f12[1],
      i = !l;

  i && (n = o.cases, l = o.match, o = o.source);
  var d = V(l),
      p = !_(l) && Q(l),
      m = !d && !p && K(l);
  n || (n = {}), i || (r(m, 'match should be an object'), e(l, function (e, t) {
    return n[t] = u(s);
  }), n.__ = u(s));
  var g,
      h = new Set([].concat(o, Object.values(n))),
      y = Object.keys(d || p ? n : l);
  if (d || p) d && h.add(l), g = [d && de(xe(l), 0, 1), ie({
    safe: d,
    filter: 1,
    fn: function fn(e, t, r) {
      var n = String(d ? r.a : l(e));
      Ct(t, U(y, n) ? n : '__', e, r);
    }
  })];else if (m) {
    var _t8 = me({});

    _t8.type = 'shape';

    var _r3,
        _n4 = [];

    e(l, function (e, a) {
      if (_(e)) {
        _r3 = 1, G(_n4, a), h.add(e);

        var _o3 = ft(e, [], [de(_t8), ue(function (e, t, _ref14) {
          var r = _ref14.a;
          return r[a] = e;
        })]);

        if (V(e)) {
          _t8.current[a] = e.getState();

          var _r4 = xe(e);

          he(_t8, {
            from: _r4,
            field: a,
            type: 'field'
          }), c('splitMatchStore', _r4, _o3);
        }
      }
    }), _r3 && c('splitBase', _t8), g = [_r3 && de(_t8, 0, 1), fe({
      fn: function fn(e, t, r) {
        for (var _a5 = 0; _a5 < y.length; _a5++) {
          var _o4 = y[_a5];
          if (U(_n4, _o4) ? r.a[_o4] : l[_o4](e)) return void Ct(t, _o4, e, r);
        }

        Ct(t, '__', e, r);
      }
    })];
  } else r(0, 'expect match to be unit, function or object');
  if (a({
    meta: {
      op: 'split'
    },
    parent: o,
    scope: n,
    node: g,
    family: {
      owners: Array.from(h)
    },
    regional: 1
  }), !i) return n;
}

function A(e, _ref15) {
  var t = _ref15.scope,
      r = _ref15.params;
  if (!_(e)) return Promise.reject(Error('first argument should be unit'));
  var n = g();
  n.parentFork = Ue;
  var a = t.fxCount;
  G(a.scope.defers, n);
  var l = [e],
      s = [];
  return G(s, L(e) ? {
    params: r,
    req: {
      rs: function rs(e) {
        n.value = {
          status: 'done',
          value: e
        };
      },
      rj: function rj(e) {
        n.value = {
          status: 'fail',
          value: e
        };
      }
    }
  } : r), G(l, a), G(s, null), o({
    target: l,
    params: s,
    scope: t
  }), n.req;
}

function I(e, r) {
  var n = [];

  (function e(a) {
    U(n, a) || (G(n, a), "store" === Ie(a, 'op') && Ie(a, 'sid') && r(a, Ie(a, 'sid')), t(a.next, e), t(we(a), e), t(Se(a), e));
  })(e);
}

function q(e, n) {
  if (Array.isArray(e) && (e = new Map(e)), e instanceof Map) {
    var _a6 = {};
    return t(e, function (e, t) {
      r(_(t), 'Map key should be a unit'), n && n(t, e), r(t.sid, 'unit should have a sid'), r(!(t.sid in _a6), 'duplicate sid found'), _a6[t.sid] = e;
    }), _a6;
  }

  return e;
}

function $(e, n) {
  var o,
      l = e;
  B(e) && (o = e, l = n);

  var s = function (e) {
    var r = a({
      scope: {
        defers: [],
        inFlight: 0,
        fxID: 0
      },
      node: [ue(function (e, t, r) {
        je(r) ? 'dec' === Ie(je(r).node, 'needFxCounter') ? t.inFlight -= 1 : (t.inFlight += 1, t.fxID += 1) : t.fxID += 1;
      }), ie({
        priority: "sampler",
        batch: 1
      }), ue(function (e, r) {
        var n = r.defers,
            a = r.fxID;
        r.inFlight > 0 || 0 === n.length || Promise.resolve().then(function () {
          r.fxID === a && t(n.splice(0, n.length), function (e) {
            Ke(e.parentFork), e.rs(e.value);
          });
        });
      }, 0, 1)]
    }),
        n = a({
      node: [ue(function (e, t, r) {
        var n = je(r);

        if (n && je(n)) {
          var _t9 = n.node;

          if (!Ie(_t9, 'isCombine') || 'combine' !== Ie(je(n).node, 'op')) {
            var _n5 = Ae(r),
                _a7 = _t9.scope.state.id,
                _o5 = Ie(_t9, 'sid');

            _n5.sidIdMap[_o5] = _a7, _n5.sidValuesMap[_o5] = e;
          }
        }
      })]
    }),
        o = {
      cloneOf: e,
      reg: {},
      sidValuesMap: {},
      sidIdMap: {},
      getState: function getState(e) {
        if ('current' in e) return Ye(Je, o, null, e).current;
        var t = ke(e);
        return Ye(Je, o, t, t.scope.state, 1).current;
      },
      kind: "scope",
      graphite: a({
        family: {
          type: "domain",
          links: [r, n]
        },
        meta: {
          unit: 'fork'
        },
        scope: {
          forkInFlightCounter: r
        }
      }),
      additionalLinks: {},
      handlers: {},
      fxCount: r,
      storeChange: n
    };
    return o;
  }(o);

  if (l) {
    if (l.values) {
      var _e15 = q(l.values, function (e) {
        return r(V(e), 'Values map can contain only stores as keys');
      });

      Object.assign(s.sidValuesMap, _e15);
    }

    l.handlers && (s.handlers = q(l.handlers, function (e) {
      return r(L(e), "Handlers map can contain only effects as keys");
    }));
  }

  return s;
}

function N(e, _ref16) {
  var t = _ref16.values;
  r(K(t), 'values property should be an object');
  var n,
      a,
      l,
      s = q(t),
      i = Object.getOwnPropertyNames(s),
      f = [],
      c = [];
  T(e) ? (n = e, l = 1, r(n.cloneOf, 'scope should be created from domain'), a = ke(n.cloneOf)) : B(e) ? a = ke(e) : r(0, 'first argument of hydrate should be domain or scope'), I(a, function (e, t) {
    U(i, t) && (G(f, e), G(c, s[t]));
  }), o({
    target: f,
    params: c,
    scope: n
  }), l && Object.assign(n.sidValuesMap, s);
}

function F(e) {
  var _ref17 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
      t = _ref17.scope;

  r(t || Ue, 'scopeBind cannot be called outside of forked .watch');
  var n = t || Ue;
  return L(e) ? function (t) {
    var r = g();
    return o({
      target: e,
      params: {
        params: t,
        req: r
      },
      scope: n
    }), r.req;
  } : function (t) {
    return o({
      target: e,
      params: t,
      scope: n
    }), t;
  };
}

function O(t) {
  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var a = n.ignore ? n.ignore.map(function (_ref18) {
    var e = _ref18.sid;
    return e;
  }) : [],
      o = {};
  return e(t.sidValuesMap, function (e, r) {
    if (U(a, r)) return;
    var n = t.sidIdMap[r];
    o[r] = n && n in t.reg ? t.reg[n].current : e;
  }), 'onlyChanges' in n && !n.onlyChanges && (r(t.cloneOf, 'scope should be created from domain'), I(ke(t.cloneOf), function (e, r) {
    r in o || U(a, r) || Ie(e, 'isCombine') || 'ignore' === Ie(e, 'serialize') || (o[r] = t.getState(e));
  })), o;
}

var D = 'undefined' != typeof Symbol && Symbol.observable || '@@observable',
    R = 'map',
    z = 'stack',
    _ = function _(e) {
  return (Q(e) || K(e)) && 'kind' in e;
};

var P = function P(e) {
  return function (t) {
    return _(t) && t.kind === e;
  };
};

var V = P("store"),
    E = P("event"),
    L = P("effect"),
    B = P("domain"),
    T = P("scope");
var W = {
  __proto__: null,
  unit: _,
  store: V,
  event: E,
  effect: L,
  domain: B,
  scope: T
};
exports.is = W;

var U = function U(e, t) {
  return e.includes(t);
},
    H = function H(e, t) {
  var r = e.indexOf(t);
  -1 !== r && e.splice(r, 1);
},
    G = function G(e, t) {
  return e.push(t);
},
    J = function J(e, t, r) {
  return !e && console.error("".concat(t, " is deprecated, use ").concat(r, " instead"));
},
    K = function K(e) {
  return 'object' == _typeof(e) && null !== e;
},
    Q = function Q(e) {
  return 'function' == typeof e;
},
    X = function X(e) {
  return void 0 === e;
},
    Y = function Y(e) {
  return r(K(e) || Q(e), 'expect first argument be an object');
};

var Z = function Z(e, t, n, a) {
  return r(!(!K(e) && !Q(e) || !('family' in e) && !('graphite' in e)), "".concat(t, ": expect ").concat(n, " to be a unit (store, event or effect)").concat(a));
};

var ee = function ee(e, r, n) {
  Array.isArray(e) ? t(e, function (e, t) {
    return Z(e, r, "".concat(t, " item of ").concat(n), '');
  }) : Z(e, r, n, ' or array of units');
};

var te = function te() {
  var e = 0;
  return function () {
    return "" + ++e;
  };
};

var re = te(),
    ne = te(),
    ae = te();

var oe = function oe(e, t, r, n) {
  var a = {
    id: ne(),
    type: e,
    data: t
  };
  return r && (a.order = {
    priority: r
  }, n && (a.order.barrierID = ++le)), a;
};

var le = 0,
    se = function se(_ref19) {
  var _ref19$from = _ref19.from,
      e = _ref19$from === void 0 ? "store" : _ref19$from,
      t = _ref19.store,
      r = _ref19.target,
      _ref19$to = _ref19.to,
      n = _ref19$to === void 0 ? r ? "store" : z : _ref19$to,
      a = _ref19.batch,
      o = _ref19.priority;
  return oe('mov', {
    from: e,
    store: t,
    to: n,
    target: r
  }, o, a);
},
    ie = function ie(_ref20) {
  var e = _ref20.fn,
      t = _ref20.batch,
      r = _ref20.priority,
      _ref20$safe = _ref20.safe,
      n = _ref20$safe === void 0 ? 0 : _ref20$safe,
      _ref20$filter = _ref20.filter,
      a = _ref20$filter === void 0 ? 0 : _ref20$filter;
  return oe('compute', {
    fn: e,
    safe: n,
    filter: a
  }, r, t);
},
    fe = function fe(_ref21) {
  var e = _ref21.fn;
  return ie({
    fn: e,
    filter: 1
  });
},
    ce = function ce(_ref22) {
  var e = _ref22.fn;
  return ie({
    fn: e,
    priority: "effect"
  });
},
    ue = function ue(e, t, r) {
  return ie({
    fn: e,
    safe: 1,
    filter: t,
    priority: r && "effect"
  });
},
    de = function de(e, t, r) {
  return se({
    store: e,
    to: t ? z : "a",
    priority: r && "sampler",
    batch: 1
  });
},
    pe = {
  mov: se,
  compute: ie,
  filter: fe,
  run: ce
},
    me = function me(e) {
  return {
    id: ne(),
    current: e
  };
},
    ge = function ge(_ref23) {
  var e = _ref23.current;
  return e;
},
    he = function he(e, t) {
  e.before || (e.before = []), G(e.before, t);
},
    ye = function ye(e, _ref24, _ref25) {
  var t = _ref24.fn;
  var r = _ref25.a;
  return t(e, r);
},
    be = function be(e, _ref26, _ref27) {
  var t = _ref26.fn;
  var r = _ref27.a;
  return t(r, e);
},
    ve = function ve(e, _ref28) {
  var t = _ref28.fn;
  return t(e);
},
    ke = function ke(e) {
  return e.graphite || e;
},
    we = function we(e) {
  return e.family.owners;
},
    Se = function Se(e) {
  return e.family.links;
},
    xe = function xe(e) {
  return e.stateRef;
},
    Ce = function Ce(e) {
  return e.value;
},
    Me = function Me(e) {
  return e.subscribers;
},
    je = function je(e) {
  return e.parent;
},
    Ae = function Ae(e) {
  return e.scope;
},
    Ie = function Ie(e, t) {
  return ke(e).meta[t];
},
    qe = function qe(e, t, r) {
  return ke(e).meta[t] = r;
},
    $e = function $e(e, r) {
  var n = ke(e);
  t(r, function (e) {
    var t = ke(e);
    "domain" !== n.family.type && (t.family.type = "crosslink"), G(we(t), n), G(Se(n), t);
  });
},
    Ne = null,
    Fe = function Fe() {
  return Ne && Ne.template;
},
    Oe = function Oe(e) {
  return e && Ne && Ne.sidRoot && (e = "".concat(Ne.sidRoot, "|").concat(e)), e;
},
    De = function De(_ref29) {
  var e = _ref29.sid,
      t = _ref29.name,
      r = _ref29.loc,
      o = _ref29.method,
      l = _ref29.fn;
  return n(a({
    meta: {
      sidRoot: Oe(e),
      name: t,
      loc: r,
      method: o
    }
  }), l);
};

exports.withFactory = De;
exports.step = pe;

var Re = function Re() {
  var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  return (Array.isArray(e) ? e : [e]).flat().map(ke);
};

var ze = null;

var _e = function _e(e, t) {
  if (!e) return t;
  if (!t) return e;
  var r;
  return (e.v.type === t.v.type && e.v.id > t.v.id || Te(e.v.type) > Te(t.v.type)) && (r = e, e = t, t = r), r = _e(e.r, t), e.r = e.l, e.l = r, e;
},
    Pe = [];

var Ve = 0;

for (; Ve < 6;) {
  G(Pe, {
    first: null,
    last: null,
    size: 0
  }), Ve += 1;
}

var Ee = function Ee() {
  for (var _e16 = 0; _e16 < 6; _e16++) {
    var _t10 = Pe[_e16];

    if (_t10.size > 0) {
      if (3 === _e16 || 4 === _e16) {
        _t10.size -= 1;
        var _e17 = ze.v;
        return ze = _e(ze.l, ze.r), _e17;
      }

      1 === _t10.size && (_t10.last = null);
      var _r5 = _t10.first;
      return _t10.first = _r5.r, _t10.size -= 1, _r5.v;
    }
  }
},
    Le = function Le(e, t, r, n, a, o) {
  return Be(0, {
    a: null,
    b: null,
    node: r,
    parent: n,
    value: a,
    page: t,
    scope: o
  }, e);
},
    Be = function Be(e, t, r) {
  var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
  var a = Te(r),
      o = Pe[a],
      l = {
    v: {
      idx: e,
      stack: t,
      type: r,
      id: n
    },
    l: null,
    r: null
  };
  3 === a || 4 === a ? ze = _e(ze, l) : (0 === o.size ? o.first = l : o.last.r = l, o.last = l), o.size += 1;
},
    Te = function Te(e) {
  switch (e) {
    case 'child':
      return 0;

    case 'pure':
      return 1;

    case 'read':
      return 2;

    case "barrier":
      return 3;

    case "sampler":
      return 4;

    case "effect":
      return 5;

    default:
      return -1;
  }
},
    We = new Set();

var Ue,
    He = 1,
    Ge = 0,
    Je = null,
    Ke = function Ke(e) {
  Ue = e;
},
    Qe = function Qe(e) {
  Je = e;
};

var Xe = function Xe(e, t) {
  if (e) {
    for (; e && !e.reg[t];) {
      e = je(e);
    }

    if (e) return e;
  }

  return null;
};

var Ye = function Ye(e, t, r, n, a) {
  var o = Xe(e, n.id);
  return o ? o.reg[n.id] : t ? (Ze(t, n, a), t.reg[n.id]) : n;
},
    Ze = function Ze(e, r, n, a, o) {
  var l = e.reg,
      s = r.sid;
  if (l[r.id]) return;
  var i = {
    id: r.id,
    current: r.current
  };
  if (s && s in e.sidValuesMap && !(s in e.sidIdMap)) i.current = e.sidValuesMap[s];else if (r.before && !o) {
    var _o6 = 0,
        _s2 = n || !r.noInit || a;

    t(r.before, function (t) {
      switch (t.type) {
        case R:
          {
            var _r6 = t.from;

            if (_r6 || t.fn) {
              _r6 && Ze(e, _r6, n, a);

              var _o7 = _r6 && l[_r6.id].current;

              _s2 && (i.current = t.fn ? t.fn(_o7) : _o7);
            }

            break;
          }

        case 'field':
          _o6 || (_o6 = 1, i.current = Array.isArray(i.current) ? _toConsumableArray(i.current) : _objectSpread({}, i.current)), Ze(e, t.from, n, a), _s2 && (i.current[t.field] = l[l[t.from.id].id].current);
      }
    });
  }
  s && (e.sidIdMap[s] = r.id), l[r.id] = i;
};

var et = function et(e, t, r) {
  try {
    return t(Ce(r), e.scope, r);
  } catch (t) {
    console.error(t), e.fail = 1;
  }
},
    tt = function tt(e) {
  return e.compositeName;
};

var rt = function rt(t) {
  var r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return K(t) && (rt(t.or, r), e(t, function (e, t) {
    X(e) || 'or' === t || 'and' === t || (r[t] = e);
  }), rt(t.and, r)), r;
};

var nt = function nt(e, t) {
  H(e.next, t), H(we(e), t), H(Se(e), t);
},
    at = function at(e, t, r) {
  var n;
  e.next.length = 0, e.seq.length = 0, e.scope = null;
  var a = Se(e);

  for (; n = a.pop();) {
    nt(n, e), (t || r && 'sample' !== Ie(e, 'op') || "crosslink" === n.family.type) && at(n, t, 'on' !== Ie(n, 'op') && r);
  }

  for (a = we(e); n = a.pop();) {
    nt(n, e), r && "crosslink" === n.family.type && at(n, t, 'on' !== Ie(n, 'op') && r);
  }
},
    ot = function ot(e) {
  return e.clear();
};

var lt = function lt(e) {
  var _ref30 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
      t = _ref30.deep;

  var r = 0;
  if (e.ownerSet && e.ownerSet.delete(e), V(e)) ot(Me(e));else if (B(e)) {
    r = 1;
    var _t11 = e.history;
    ot(_t11.events), ot(_t11.effects), ot(_t11.stores), ot(_t11.domains);
  }
  at(ke(e), !!t, r);
},
    st = function st(e) {
  var t = function t() {
    return lt(e);
  };

  return t.unsubscribe = t, t;
},
    ft = function ft(e, t, r, n, o) {
  return a({
    node: r,
    parent: e,
    child: t,
    scope: {
      fn: o
    },
    meta: {
      op: n
    },
    family: {
      owners: [e, t],
      links: t
    },
    regional: 1
  });
},
    ct = function ct(e) {
  var _f13 = f(e, 1),
      _f14 = _slicedToArray(_f13, 2),
      _f14$ = _f14[0],
      t = _f14$.from,
      r = _f14$.to,
      n = _f14[1];

  return ee(t, 'forward', '"from"'), ee(r, 'forward', '"to"'), st(a({
    parent: t,
    child: r,
    meta: {
      op: 'forward',
      config: n
    },
    family: {},
    regional: 1
  }));
},
    ut = function ut(e, t) {
  return r(Q(t), '.watch argument should be a function'), st(a({
    scope: {
      fn: t
    },
    node: [ce({
      fn: ve
    })],
    parent: e,
    meta: {
      op: 'watch'
    },
    family: {
      owners: e
    },
    regional: 1
  }));
},
    dt = function dt(e, t) {
  var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "event";
  je(e) && je(e).hooks[r](t);
},
    pt = function pt(e, t, r, n) {
  var a = "domain" === e,
      o = re(),
      l = rt({
    or: n,
    and: 'string' == typeof r ? {
      name: r
    } : r
  }),
      _l$parent = l.parent,
      s = _l$parent === void 0 ? null : _l$parent,
      _l$sid = l.sid,
      f = _l$sid === void 0 ? null : _l$sid,
      _l$named = l.named,
      c = _l$named === void 0 ? null : _l$named,
      u = c || l.name || (a ? '' : o),
      d = i(u, s),
      p = {
    op: t.kind = e,
    name: t.shortName = u,
    sid: t.sid = Oe(f),
    named: c,
    unitId: t.id = o,
    serialize: l.serialize,
    derived: l.derived
  };

  if (t.parent = s, t.compositeName = d, t.defaultConfig = l, t.thru = function (e) {
    return J(0, 'thru', 'js pipe'), e(t);
  }, t.getType = function () {
    return d.fullName;
  }, !a) {
    t.subscribe = function (e) {
      return Y(e), t.watch(Q(e) ? e : function (t) {
        return e.next && e.next(t);
      });
    }, t[D] = function () {
      return t;
    };

    var _e18 = Fe();

    _e18 && (p.nativeTemplate = _e18);
  }

  return p;
},
    mt = function mt(e) {
  return u({
    named: e
  });
};

exports.forward = ct;
exports.clearNode = lt;

var gt = function gt(e, t, r, n) {
  var a;
  K(r) && (a = r, r = r.fn);
  var o = u({
    name: "".concat(e.shortName, " \u2192 *"),
    derived: 1,
    and: a
  });
  return ft(e, o, n, t, r), o;
},
    ht = function ht(e, t, r, n, a) {
  var o = xe(t),
      l = se({
    store: o,
    to: "a",
    priority: 'read'
  });
  r === R && (l.data.softRead = 1);
  var s = [l, ie({
    fn: n
  })];
  return c('storeOnMap', o, s, V(e) && xe(e)), ft(e, t, s, r, a);
},
    yt = function yt(t, n, a, o, s) {
  var i = t ? function (e) {
    return e.slice();
  } : function (e) {
    return _objectSpread({}, e);
  },
      f = t ? [] : {},
      u = i(f),
      p = me(u),
      m = me(1);
  p.type = t ? 'list' : 'shape', p.noInit = 1, c('combineBase', p, m);
  var g = d(u, {
    name: l(a),
    derived: 1,
    and: o
  }),
      h = xe(g);
  h.noInit = 1, qe(g, 'isCombine', 1);
  var y = [ue(function (e, t, r) {
    return r.scope && !r.scope.reg[p.id] && (r.c = 1), e;
  }), de(p), se({
    store: m,
    to: 'b'
  }), ue(function (e, _ref31, r) {
    var t = _ref31.key;
    if (r.c || e !== r.a[t]) return n && r.b && (r.a = i(r.a)), r.a[t] = e, 1;
  }, 1), se({
    from: "a",
    target: p
  }), se({
    from: "value",
    store: 0,
    target: m
  }), se({
    from: "value",
    store: 1,
    target: m,
    priority: "barrier",
    batch: 1
  }), de(p, 1), s && ie({
    fn: ve
  })];
  return e(a, function (e, t) {
    if (!V(e)) return r(!_(e) && !X(e), "combine expects a store in a field ".concat(t)), void (u[t] = f[t] = e);
    f[t] = e.defaultState, u[t] = e.getState();
    var n = ft(e, g, y, 'combine', s);
    n.scope.key = t;
    var a = xe(e);
    he(p, {
      type: 'field',
      field: t,
      from: a
    }), c('combineField', a, n);
  }), g.defaultShape = a, he(h, {
    type: R,
    from: p,
    fn: s
  }), Fe() || (g.defaultState = s ? h.current = s(u) : f), g;
};

var bt = function bt(e, t, r) {
  try {
    return [1, e.apply(void 0, _toConsumableArray(r))];
  } catch (e) {
    return t(e), [0, null];
  }
},
    vt = function vt(e, t, r, n, a) {
  return function (l) {
    return o({
      target: [n, kt],
      params: [r ? {
        status: 'done',
        params: e,
        result: l
      } : {
        status: 'fail',
        params: e,
        error: l
      }, {
        value: l,
        fn: r ? t.rs : t.rj
      }],
      defer: 1,
      page: a.page,
      scope: Ae(a)
    });
  };
},
    kt = a({
  node: [ce({
    fn: function fn(_ref32) {
      var e = _ref32.fn,
          t = _ref32.value;
      return e(t);
    }
  })],
  meta: {
    op: 'fx',
    fx: 'sidechain'
  }
});

var wt = ['source', 'clock', 'target'],
    St = function St(e, t) {
  return e + ": ".concat(t, " should be defined");
};

var xt = function xt(e, t, n) {
  return r(!X(e) || !X(t), St(n, 'either source or clock')), X(e) ? (ee(t, n, 'clock'), Array.isArray(t) && (t = w(t)), e = t) : _(e) || (e = p(e)), [e, t];
};

var Ct = function Ct(e, t, r, n) {
  var a = e[t];
  a && o({
    target: a,
    params: Array.isArray(a) ? a.map(function () {
      return r;
    }) : r,
    defer: 1,
    stack: n
  });
},
    Mt = "22.1.1";

exports.version = Mt;
},{}],"../node_modules/process/browser.js":[function(require,module,exports) {

// shim for using process in browser
var process = module.exports = {}; // cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
  throw new Error('setTimeout has not been defined');
}

function defaultClearTimeout() {
  throw new Error('clearTimeout has not been defined');
}

(function () {
  try {
    if (typeof setTimeout === 'function') {
      cachedSetTimeout = setTimeout;
    } else {
      cachedSetTimeout = defaultSetTimout;
    }
  } catch (e) {
    cachedSetTimeout = defaultSetTimout;
  }

  try {
    if (typeof clearTimeout === 'function') {
      cachedClearTimeout = clearTimeout;
    } else {
      cachedClearTimeout = defaultClearTimeout;
    }
  } catch (e) {
    cachedClearTimeout = defaultClearTimeout;
  }
})();

function runTimeout(fun) {
  if (cachedSetTimeout === setTimeout) {
    //normal enviroments in sane situations
    return setTimeout(fun, 0);
  } // if setTimeout wasn't available but was latter defined


  if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
    cachedSetTimeout = setTimeout;
    return setTimeout(fun, 0);
  }

  try {
    // when when somebody has screwed with setTimeout but no I.E. maddness
    return cachedSetTimeout(fun, 0);
  } catch (e) {
    try {
      // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
      return cachedSetTimeout.call(null, fun, 0);
    } catch (e) {
      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
      return cachedSetTimeout.call(this, fun, 0);
    }
  }
}

function runClearTimeout(marker) {
  if (cachedClearTimeout === clearTimeout) {
    //normal enviroments in sane situations
    return clearTimeout(marker);
  } // if clearTimeout wasn't available but was latter defined


  if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
    cachedClearTimeout = clearTimeout;
    return clearTimeout(marker);
  }

  try {
    // when when somebody has screwed with setTimeout but no I.E. maddness
    return cachedClearTimeout(marker);
  } catch (e) {
    try {
      // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
      return cachedClearTimeout.call(null, marker);
    } catch (e) {
      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
      // Some versions of I.E. have different rules for clearTimeout vs setTimeout
      return cachedClearTimeout.call(this, marker);
    }
  }
}

var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
  if (!draining || !currentQueue) {
    return;
  }

  draining = false;

  if (currentQueue.length) {
    queue = currentQueue.concat(queue);
  } else {
    queueIndex = -1;
  }

  if (queue.length) {
    drainQueue();
  }
}

function drainQueue() {
  if (draining) {
    return;
  }

  var timeout = runTimeout(cleanUpNextTick);
  draining = true;
  var len = queue.length;

  while (len) {
    currentQueue = queue;
    queue = [];

    while (++queueIndex < len) {
      if (currentQueue) {
        currentQueue[queueIndex].run();
      }
    }

    queueIndex = -1;
    len = queue.length;
  }

  currentQueue = null;
  draining = false;
  runClearTimeout(timeout);
}

process.nextTick = function (fun) {
  var args = new Array(arguments.length - 1);

  if (arguments.length > 1) {
    for (var i = 1; i < arguments.length; i++) {
      args[i - 1] = arguments[i];
    }
  }

  queue.push(new Item(fun, args));

  if (queue.length === 1 && !draining) {
    runTimeout(drainQueue);
  }
}; // v8 likes predictible objects


function Item(fun, array) {
  this.fun = fun;
  this.array = array;
}

Item.prototype.run = function () {
  this.fun.apply(null, this.array);
};

process.title = 'browser';
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues

process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) {
  return [];
};

process.binding = function (name) {
  throw new Error('process.binding is not supported');
};

process.cwd = function () {
  return '/';
};

process.chdir = function (dir) {
  throw new Error('process.chdir is not supported');
};

process.umask = function () {
  return 0;
};
},{}],"../node_modules/forest/forest.mjs":[function(require,module,exports) {
var process = require("process");
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.block = oe;
exports.h = z;
exports.handler = _;
exports.list = ee;
exports.node = te;
exports.rec = ne;
exports.remap = Y;
exports.route = ae;
exports.spec = $;
exports.text = se;
exports.tree = re;
exports.using = Q;
exports.val = ce;
exports.variant = le;

var _effector = require("effector/effector.mjs");

function _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError("Cannot destructure undefined"); }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function e(e, t) {
  e.cursor[t].prev && (e.cursor[t].prev.cursor[t].next = e.cursor[t].next), e.cursor[t].next && (e.cursor[t].next.cursor[t].prev = e.cursor[t].prev), e.queue[t].last === e && (e.queue[t].last = e.cursor[t].prev), e.queue[t].first === e && (e.queue[t].first = e.cursor[t].next), e.cursor[t].prev = null, e.cursor[t].next = null;
}

function t(e) {
  var t, l;
  e.status = 'active', t = a(e), (l = e).cursor.prev && (l.cursor.prev.cursor.next = l.cursor.next), l.cursor.next && (l.cursor.next.cursor.prev = l.cursor.prev), t.last === l && (t.last = l.cursor.prev), t.first === l && (t.first = l.cursor.next), l.cursor.prev = null, l.cursor.next = null;
}

function a(e) {
  return e.group.activeChilds[e.priority];
}

function l(e, a) {
  a.value.active = a.value.pending = e, 'active' !== a.status && t(a);
}

function n(l, n) {
  if (n.value.active === l) return n.value.pending = l, void ('pending' === n.status && (t(n), a(n).first || e(n.group, n.priority)));
  var r, o, i, s;
  'active' === n.status && (n.status = 'pending', a(n).first || ((i = n.group).queue[s = n.priority].last ? (i.cursor[s].prev = i.queue[s].last, i.queue[s].last.cursor[s].next = i, i.queue[s].last = i) : i.queue[s].first = i.queue[s].last = i), o = n, (r = a(n)).last ? (o.cursor.prev = r.last, r.last.cursor.next = o, r.last = o) : r.first = r.last = o), n.value.pending = l, n.group.queue.rafID || (n.group.queue.rafID = Oe(n.group.queue.execQueue));
}

function r(a) {
  Ce('execQueue');
  var l,
      n,
      r = Ie(),
      o = 0;

  e: for (; a.props.first || a.tree.first || a.data.first;) {
    if (Ie() - r >= 1e3) {
      o = 1;
      break e;
    }

    var _i = !!a.props.first;

    for (_i && Ce('props'); l = a.props.first;) {
      for (; n = l.activeChilds.props.first;) {
        if (Ie() - r >= 1e3) {
          o = 1, Te('props');
          break e;
        }

        n.runOp(n.value.pending), n.value.active = n.value.pending, t(n);
      }

      e(l, 'props');
    }

    _i && Te('props');

    var _s = !!a.tree.first;

    for (_s && Ce('tree'); l = a.tree.first;) {
      for (; n = l.activeChilds.tree.first;) {
        if (Ie() - r >= 1e3) {
          o = 1, Te('tree');
          break e;
        }

        n.runOp(n.value.pending), n.value.active = n.value.pending, t(n);
      }

      e(l, 'tree');
    }

    _s && Te('tree');

    var _c = !!a.data.first;

    for (_c && Ce('data'); l = a.data.first;) {
      for (; n = l.activeChilds.data.first;) {
        if (Ie() - r >= 1e3) {
          o = 1, Te('data');
          break e;
        }

        n.runOp(n.value.pending), n.value.active = n.value.pending, t(n);
      }

      e(l, 'data');
    }

    _c && Te('data');
  }

  if (Te('execQueue'), o) a.rafID = Oe(a.execQueue);else if (a.rafID = null, a.onDrain) {
    var _e2 = a.onDrain;
    a.onDrain = null, _e2();
  }
}

function o(_ref) {
  var e = _ref.value,
      t = _ref.runOp,
      a = _ref.group,
      l = _ref.priority;
  return {
    value: {
      active: e,
      pending: e
    },
    runOp: t,
    status: 'active',
    priority: l,
    group: a,
    cursor: {
      prev: null,
      next: null
    }
  };
}

function i(_ref2) {
  var e = _ref2.onComplete;
  var t = {
    props: {
      first: null,
      last: null
    },
    tree: {
      first: null,
      last: null
    },
    data: {
      first: null,
      last: null
    },
    rafID: null,
    execQueue: function execQueue() {},
    onDrain: e
  };
  return t.execQueue = r.bind(null, t), t;
}

function s(e) {
  return {
    ops: [],
    queue: e,
    activeChilds: {
      props: {
        first: null,
        last: null
      },
      tree: {
        first: null,
        last: null
      },
      data: {
        first: null,
        last: null
      }
    },
    cursor: {
      props: {
        prev: null,
        next: null
      },
      tree: {
        prev: null,
        next: null
      },
      data: {
        prev: null,
        next: null
      }
    }
  };
}

function c(_ref3) {
  var e = _ref3.value,
      t = _ref3.group,
      a = _ref3.onInit,
      l = _ref3.onChange;
  var r = o({
    value: e,
    group: t,
    runOp: function runOp(e) {
      i.status = 'A', l(e);
    },
    priority: 'data'
  }),
      i = {
    status: 'IA',
    value: r.value,
    ops: {
      init: o({
        value: 0,
        group: t,
        runOp: function runOp(e) {
          i.status = 'A', a(i.value.active);
        },
        priority: 'data'
      }),
      change: r,
      terminate: o({
        value: 0,
        group: t,
        runOp: function runOp(e) {
          i.status = 'T';
        },
        priority: 'data'
      })
    }
  };
  return n(1, i.ops.init), i;
}

function u(e) {
  switch (e.status) {
    case 'I':
    case 'T':
    case 'AT':
      return;

    case 'A':
      e.status = 'AT', n(1, e.ops.terminate);
      break;

    case 'AA':
      e.status = 'AT', n(1, e.ops.terminate), n(e.value.active, e.ops.change);
      break;

    case 'IA':
      e.status = 'T', n(0, e.ops.init);
  }
}

function p(e, t) {
  switch (t.status) {
    case 'I':
    case 'T':
      return;

    case 'A':
      t.value.active !== e && (t.status = 'AA', n(e, t.ops.change));
      break;

    case 'AA':
      t.value.active === e ? (t.status = 'A', n(e, t.ops.change)) : t.value.pending !== e && (t.value.pending = e);
      break;

    case 'IA':
      t.value.active = t.value.pending = e;
  }
}

function d(e) {
  switch (e = String(e)) {
    case '__proto__':
    case '__defineGetter__':
    case '__defineSetter__':
    case 'constructor':
    case 'prototype':
    case 'hasOwnProperty':
    case 'toString':
    case 'valueOf':
    case 'setProperty':
    case 'removeProperty':
      return 'forbidden';

    default:
      return e.replace(/[^a-zA-Z0-9\-_]/g, '');
  }
}

function f(e, t) {
  for (var _a = 0; _a < t.length; _a++) {
    var _t$_a = t[_a],
        _l = _t$_a.type,
        _n = _t$_a.field,
        _r = _t$_a.value;

    qe[_l](e, _n, _r);
  }
}

function m(e) {
  return '' !== e && 0 !== e && '0' !== e && (0 == e || null == e);
}

function v(e, t, a) {
  m(a) ? e.style.removeProperty("--".concat(t)) : e.style.setProperty("--".concat(t), "".concat(a));
}

function h(e, t, a) {
  m(a) ? delete e.style[t] : e.style[t] = "".concat(a);
}

function g(e, t, a) {
  m(a) ? delete e.dataset[t] : e.dataset[t] = "".concat(a);
}

function b(e, t, a) {
  if (m(a)) {
    switch (t) {
      case 'value':
        delete e.value;
        break;

      case 'checked':
        e.checked = 0;
        break;

      case 'spellcheck':
        if (0 == a) return void e.setAttribute('spellcheck', 'false');
    }

    e.removeAttribute(t);
  } else {
    switch (t) {
      case 'value':
        e.value = "".concat(a);
        break;

      case 'checked':
        e.checked = "".concat(a);
    }

    e.setAttribute(t, "".concat(a));
  }
}

function y(e, t) {
  e.replaceData(0, (e.textContent || '').length, String(t));
}

function k(_ref4) {
  var e = _ref4.fn,
      _ref4$state = _ref4.state,
      t = _ref4$state === void 0 ? {} : _ref4$state,
      _ref4$defer = _ref4.defer,
      a = _ref4$defer === void 0 ? 0 : _ref4$defer,
      _ref4$name = _ref4.name,
      l = _ref4$name === void 0 ? "" : _ref4$name,
      n = _ref4.draft,
      r = _ref4.isSvgRoot,
      o = _ref4.namespace,
      i = _ref4.env,
      _ref4$isBlock = _ref4.isBlock,
      s = _ref4$isBlock === void 0 ? 0 : _ref4$isBlock;
  var c = Be,
      u = {
    id: ++Pe,
    name: l,
    plain: [],
    watch: [],
    nameMap: {},
    pages: [],
    closure: [],
    childTemplates: [],
    handlers: Ae,
    upward: _effector.step.filter({
      fn: function fn(e, t, a) {
        if (!a.page) {
          if (!a.parent || !a.parent.page) return 1;
          a.page = a.parent.page;
        }

        if (!a.page.root.activeSpawns.has(a.page.fullID)) return console.count('inactive page upward'), 0;
        var l = [a.page.template],
            n = [a.page];
        {
          var _e3 = a.page.parent;

          for (; _e3;) {
            n.push(_e3), l.push(_e3.template), _e3 = _e3.parent;
          }
        }
        return a.node.next.forEach(function (t) {
          var r = t.meta.nativeTemplate;
          if (r) {
            if (l.includes(r)) {
              var _o = n[l.indexOf(r)];
              (0, _effector.launch)({
                target: t,
                params: e,
                defer: 1,
                page: _o,
                stack: a,
                scope: a.scope
              });
            } else console.error('context drift', {
              stack: a,
              node: t
            });
          } else (0, _effector.launch)({
            target: t,
            params: e,
            defer: 1,
            page: a.page,
            stack: a,
            scope: a.scope
          });
        }), 0;
      }
    }),
    loader: _effector.step.filter({
      fn: function fn(e, t, a) {
        if (a.parent) {
          var _t = a.scope ? a.scope.graphite.id : null;

          if (a.page) {
            if (!a.page.root.activeSpawns.has(a.page.fullID)) return console.count('inactive page loader'), 0;
            if (a.page.template === u) return 1;
            if (a.page.root.childSpawns[a.page.fullID][u.id]) a.page.root.childSpawns[a.page.fullID][u.id].forEach(function (l) {
              (!_t || l.root.scope && _t === l.root.scope.graphite.id) && (0, _effector.launch)({
                params: e,
                target: a.node,
                page: l,
                defer: 1,
                scope: a.scope
              });
            });else {
              var _l2 = a.page.fullID,
                  _n2 = 'rec' === a.page.template.name;

              u.pages.forEach(function (r) {
                if (!_t || r.root.scope && _t === r.root.scope.graphite.id) if (r.fullID === _l2 || r.fullID.startsWith("".concat(_l2, "_"))) {
                  var _t2 = 1;

                  if (_n2) {
                    var _e4 = a.page.template.id,
                        _l3 = r.parent;

                    for (; _l3 && _l3 !== a.page;) {
                      if (_l3.template.id === _e4) {
                        _t2 = 0;
                        break;
                      }

                      _l3 = _l3.parent;
                    }
                  }

                  _t2 && (0, _effector.launch)({
                    params: e,
                    target: a.node,
                    page: r,
                    defer: 1,
                    scope: a.scope
                  });
                } else _l2.startsWith("".concat(r.fullID, "_")) && (0, _effector.launch)({
                  params: e,
                  target: a.node,
                  page: a.page,
                  defer: 1,
                  scope: a.scope
                });
              });
            }
          } else u.pages.forEach(function (l) {
            (!_t || l.root.scope && _t === l.root.scope.graphite.id) && (0, _effector.launch)({
              params: e,
              target: a.node,
              page: l,
              defer: 1,
              scope: a.scope
            });
          });

          return 0;
        }

        return 1;
      }
    }),
    parent: c,
    node: null,
    api: null,
    trigger: {
      mount: (0, _effector.createEvent)({
        named: 'mount'
      })
    },
    draft: n,
    isSvgRoot: r,
    namespace: o,
    env: i,
    isBlock: s || !(!c || !c.isBlock)
  };
  c && c.childTemplates.push(u);
  var p = (0, _effector.createNode)({
    meta: {
      template: u
    }
  });
  return u.node = p, Be = u, a ? u.deferredInit = function () {
    var a = Be;
    Be = u, u.deferredInit = null;

    try {
      (0, _effector.withRegion)(p, function () {
        var a = (0, _effector.restore)(t);
        u.api = e(a, u.trigger), u.nameMap = a;
      });
    } finally {
      Be = a;
    }
  } : (0, _effector.withRegion)(p, function () {
    var a = (0, _effector.restore)(t);
    u.api = e(a, u.trigger), u.nameMap = a;
  }), Be = c, u;
}

function I(e, t) {
  var a;

  switch (a = t ? t.getState(e) : e.current, e.type) {
    case 'list':
      return _toConsumableArray(a);

    case 'shape':
      return _objectSpread({}, a);

    default:
      return a;
  }
}

function x(e, t, a) {
  var l = t;

  for (; l && !Ee(l, e);) {
    l = l.parent;
  }

  return l ? Ee(l, e) : a ? (a.getState(e), a.reg[e.id]) : e;
}

function w(e, t) {
  Ee(t, e) || (t.reg[e.id] = x(e, t.parent, t.root.scope));
}

function S(e, t, a) {
  var _a$t;

  t in a || (a[t] = []), (_a$t = a[t]).push.apply(_a$t, _toConsumableArray(e));
}

function D(e, _ref5) {
  var _ref5$values = _ref5.values,
      t = _ref5$values === void 0 ? {} : _ref5$values,
      a = _ref5.parentLeaf,
      l = _ref5.mountNode,
      n = _ref5.svgRoot,
      r = _ref5.leafData,
      o = _ref5.opGroup,
      i = _ref5.domSubtree,
      s = _ref5.hydration,
      c = _ref5.root;

  function u(e) {
    if (e.before) for (var _t3 = 0; _t3 < e.before.length; _t3++) {
      var _a2 = e.before[_t3];

      switch (_a2.type) {
        case 'map':
          {
            var _t4 = void 0,
                _l4 = _a2.from;

            if (!_a2.fn && !_l4) break;
            _l4 && (w(_l4, f), _t4 = d[_l4.id].current), d[e.id].current = _a2.fn ? _a2.fn(_t4) : _t4;
            break;
          }

        case 'field':
          {
            var _t5 = _a2.from;
            w(_t5, f), d[e.id].current[_a2.field] = d[_t5.id].current;
            break;
          }

        case 'closure':
          w(_a2.of, f);
      }
    }
  }

  function p(e, t, a) {
    var l;
    t.stop = 1;

    try {
      for (; t.i < e.length;) {
        l = e[t.i], t.i++, l.fn(a[l.of.id] ? a[l.of.id].current : x(l.of, f.parent, f.root.scope).current);
      }
    } catch (e) {
      console.error(e), t.stop = 0;
    }
  }

  var d = {},
      f = {
    draft: e.draft,
    svgRoot: n,
    data: r,
    parent: a,
    hydration: s,
    mountNode: l,
    root: c,
    id: ++Ne,
    fullID: '',
    reg: d,
    template: e
  };
  e.pages.push(f);
  var m = Me;
  Me = f, a && S([f], e.id, c.childSpawns[a.fullID]), f.fullID = a ? "".concat(a.fullID, "_").concat(f.id) : "".concat(f.id), c.childSpawns[f.fullID] = {}, c.activeSpawns.add(f.fullID), c.leafOps[f.fullID] = {
    group: o,
    domSubtree: i
  };

  for (var _t6 = 0; _t6 < e.closure.length; _t6++) {
    var _a3 = e.closure[_t6],
        _l5 = _a3,
        _n3 = f.parent;

    e: for (; _n3;) {
      if (Ee(_n3, _a3)) {
        _l5 = Ee(_n3, _a3);
        break e;
      }

      _n3 = _n3.parent;
    }

    !_n3 && c.scope && (c.scope.getState(_a3), _l5 = c.scope.reg[_a3.id]), d[_a3.id] = _l5;
  }

  for (var _t7 = 0; _t7 < e.plain.length; _t7++) {
    var _a4 = e.plain[_t7],
        _l6 = {
      id: _a4.id,
      current: I(_a4, c.scope)
    };
    d[_a4.id] = _l6;
  }

  for (var _a5 in t) {
    var _l7 = e.nameMap[_a5].stateRef.id;
    d[_l7] = {
      id: _l7,
      current: t[_a5]
    };
  }

  e.closure.forEach(u), e.plain.forEach(u);
  var v = {
    i: 0,
    stop: 0
  };

  for (; !v.stop;) {
    p(e.watch, v, d);
  }

  if (a) for (var _e5 in c.childSpawns[f.fullID]) {
    S(c.childSpawns[f.fullID][_e5], _e5, c.childSpawns[a.fullID]);
  }
  if (Fe) Fe.steps.push({
    target: e.trigger.mount,
    params: f,
    defer: 1,
    page: f,
    scope: c.scope
  });else {
    var _t8;

    Fe = {
      parent: Fe,
      steps: [{
        target: e.trigger.mount,
        params: f,
        defer: 1,
        page: f,
        scope: c.scope
      }]
    };

    do {
      for (; _t8 = Fe.steps.shift();) {
        Fe = {
          parent: Fe,
          steps: []
        }, (0, _effector.launch)(_t8);
      }
    } while (Fe = Fe.parent);
  }
  return Me = m, f;
}

function C(e) {
  var t = e.parent;

  for (; 'element' !== t.type && 'using' !== t.type;) {
    t = t.parent;
  }

  return t ? t.value : null;
}

function T(e) {
  if (!e.visible) return null;

  switch (e.type) {
    case 'text':
    case 'element':
      return e;

    case 'LF':
    case 'route':
    case 'rec':
    case 'recItem':
    case 'block':
    case 'blockItem':
      for (var _t9 = e.child.length - 1; _t9 >= 0; _t9--) {
        var _a6 = T(e.child[_t9]);

        if (_a6) return _a6;
      }

      return null;

    case 'list':
      {
        var _t10 = e.lastChild;
        if (!_t10) return null;

        for (; _t10;) {
          var _e6 = T(_t10);

          if (_e6) return _e6;
          _t10 = _t10.left;
        }

        return null;
      }

    default:
      return null;
  }
}

function O(e) {
  switch (e.type) {
    case 'using':
      return null;

    case 'LF':
      {
        var _t11 = e.left;

        for (; _t11;) {
          var _e7 = T(_t11);

          if (_e7) return _e7;
          _t11 = _t11.left;
        }

        return O(e.parent);
      }

    case 'element':
    case 'text':
    case 'route':
    case 'rec':
    case 'recItem':
    case 'block':
    case 'blockItem':
    case 'list':
      {
        var _t12 = e.parent;

        for (var _a7 = e.index - 1; _a7 >= 0; _a7--) {
          var _e8 = _t12.child[_a7];
          if (!_e8) continue;

          var _l8 = T(_e8);

          if (_l8) return _l8;
        }

        switch (_t12.type) {
          case 'element':
          case 'using':
            return null;
        }

        return O(_t12);
      }

    default:
      return null;
  }
}

function q(e) {
  var t = O(e);
  return t ? t.value : null;
}

function R(e, t) {
  if (!e) throw Error(t);
}

function A(e, t) {
  if (!e) throw Error("".concat(t, "() called outside from using() closure"));
}

function P(e) {
  if (!Be) return;
  var t = e.draft;
  if ('listItem' !== t.type && 'rec' !== t.type) switch (Be.draft.type) {
    case 'element':
    case 'using':
    case 'route':
    case 'list':
    case 'rec':
    case 'recItem':
    case 'block':
    case 'blockItem':
      t.inParentIndex = Be.draft.childCount, Be.draft.childCount += 1, Be.draft.childTemplates.push(e);
      break;

    default:
      console.warn("unexpected currentTemplate type ".concat(Be.draft.type));
  }
}

function N(e, _ref6) {
  var t = _ref6.parentBlockFragment,
      a = _ref6.leaf,
      l = _ref6.node,
      n = _ref6.svgRoot,
      r = _ref6.values;
  e.childTemplates.forEach(function (e) {
    B({
      parentBlockFragment: t,
      leaf: a,
      node: l,
      svgRoot: n,
      values: r,
      actor: e
    });
  });
}

function B(_ref7) {
  var e = _ref7.parentBlockFragment,
      t = _ref7.leaf,
      _ref7$node = _ref7.node,
      a = _ref7$node === void 0 ? t.mountNode : _ref7$node,
      l = _ref7.actor,
      n = _ref7.svgRoot,
      r = _ref7.values;
  var i;
  R(_e.includes(e.type), "incorrect parent ".concat(e.type));
  var c = l.draft,
      u = t.root.leafOps[t.fullID].group.queue,
      p = s(u),
      d = t.root.leafOps[t.fullID].domSubtree,
      m = d;

  switch (c.type) {
    case 'route':
      {
        var _t13 = {
          type: 'route',
          parent: e,
          child: [],
          visible: 0,
          index: c.inParentIndex
        };
        e.child[c.inParentIndex] = _t13, i = {
          type: 'route',
          block: _t13,
          ops: {},
          initialized: 0,
          pendingInit: null
        };
        break;
      }

    case 'element':
      {
        var _a8;

        if (l.isBlock) {
          var _e9,
              _l9,
              _n5 = t;

          for (; _n5 && (!_l9 || !_e9);) {
            _n5.template.env && (_e9 = _n5.template.env);
            var _n6 = _n5,
                _t14 = _n6.draft;
            'element' === _t14.type && ('svg' === _t14.tag ? _l9 = 'svg' : 'foreignObject' === _t14.tag && (_l9 = 'html')), _n5 = _n5.parent;
          }

          _l9 || (_l9 = 'html'), _e9 && (_a8 = 'svg' === _l9 ? _e9.document.createElementNS('http://www.w3.org/2000/svg', c.tag) : _e9.document.createElement(c.tag), f(_a8, c.staticSeq));
        } else _a8 = c.stencil.cloneNode();

        var _n4 = {
          type: 'element',
          parent: e,
          child: [],
          value: _a8,
          visible: 0,
          index: c.inParentIndex
        };
        e.child[c.inParentIndex] = _n4, i = {
          type: 'element',
          block: _n4,
          ops: {
            visible: o({
              value: 0,
              priority: 'tree',
              runOp: function runOp(e) {
                if (e) {
                  M(_n4);
                  var _e10 = i;
                  _e10.needToCallNode && (_e10.needToCallNode = 0, (0, _effector.launch)({
                    target: $e,
                    params: {
                      element: _n4.value,
                      fns: c.node
                    },
                    page: v,
                    scope: t.root.scope
                  })), _n4.visible = 1;
                } else _n4.value.remove(), _n4.visible = 0;
              },
              group: d
            })
          },
          needToCallNode: c.node.length > 0
        }, m = s(u);
        break;
      }

    case 'list':
      {
        var _t15 = {
          type: 'list',
          parent: e,
          child: [],
          lastChild: null,
          visible: 1,
          index: c.inParentIndex
        };
        e.child[c.inParentIndex] = _t15, i = {
          type: 'list',
          draft: c,
          block: _t15,
          records: [],
          pendingUpdate: null
        };
        break;
      }

    case 'using':
    case 'listItem':
      break;

    case 'rec':
      {
        var _t16 = {
          type: 'rec',
          parent: e,
          child: [],
          visible: 1,
          index: c.inParentIndex
        };
        e.child[c.inParentIndex] = _t16, i = {
          type: 'rec',
          block: _t16
        };
        break;
      }

    case 'recItem':
      {
        var _t17 = {
          type: 'recItem',
          parent: e,
          child: [],
          visible: 1,
          index: c.inParentIndex
        };
        e.child[c.inParentIndex] = _t17, i = {
          type: 'rec item',
          block: _t17
        };
        break;
      }

    case 'block':
      {
        var _t18 = {
          type: 'block',
          parent: e,
          child: [],
          visible: 1,
          index: c.inParentIndex
        };
        e.child[c.inParentIndex] = _t18, i = {
          type: 'block',
          block: _t18
        };
        break;
      }

    case 'blockItem':
      {
        var _t19 = {
          type: 'blockItem',
          parent: e,
          child: [],
          visible: 1,
          index: c.inParentIndex
        };
        e.child[c.inParentIndex] = _t19, i = {
          type: 'block item',
          block: _t19
        };
        break;
      }

    default:
      console.warn("unexpected draft type ".concat(c.type));
  }

  var v = D(l, {
    values: r,
    parentLeaf: t,
    mountNode: a,
    svgRoot: n || t.svgRoot,
    leafData: i,
    opGroup: p,
    domSubtree: m,
    hydration: t.hydration,
    root: t.root
  });
}

function M(e) {
  var t = q(e);
  t ? t.after(e.value) : C(e).prepend(e.value), e.visible = 1;
}

function E(_ref8) {
  var e = _ref8.mount,
      t = _ref8.state,
      a = _ref8.onMount,
      l = _ref8.onState;
  return {
    onMount: (0, _effector.sample)({
      source: t,
      clock: e,
      fn: a,
      greedy: 1
    }),
    onState: (0, _effector.sample)({
      source: e,
      clock: t,
      fn: l,
      greedy: 1
    })
  };
}

function F(e, t) {
  for (var _a9 in e) {
    t(e[_a9], _a9);
  }
}

function _(e, t) {
  if (!Be) return;
  var a = Be.draft;
  R('element' === a.type, "\"handler\" extension can be used only with element nodes, got \"".concat(a.type, "\"")), void 0 === t && (t = e, e = {});

  for (var _e11 in t) {
    R(_effector.is.unit(t[_e11]), "handler for \"".concat(_e11, "\" should be event"));
  }

  var _e12 = e,
      _e12$passive = _e12.passive,
      l = _e12$passive === void 0 ? 0 : _e12$passive,
      _e12$capture = _e12.capture,
      n = _e12$capture === void 0 ? 0 : _e12$capture,
      _e12$prevent = _e12.prevent,
      r = _e12$prevent === void 0 ? 0 : _e12$prevent,
      _e12$stop = _e12.stop,
      o = _e12$stop === void 0 ? 0 : _e12$stop;
  a.handler.push({
    options: {
      prevent: r,
      stop: o
    },
    domConfig: {
      passive: r ? 0 : l,
      capture: n
    },
    map: t
  });
}

function $(e) {
  A(Be, 'spec');
  var t = Be.draft;

  switch (t.type) {
    case 'list':
      return void (e.visible && (t.itemVisible = e.visible));

    case 'listItem':
    case 'using':
    case 'route':
    case 'rec':
    case 'recItem':
    case 'block':
    case 'blockItem':
      return;
  }

  if (e.attr && t.attr.push(e.attr), e.data && t.data.push(e.data), 'text' in e) {
    var _t$text;

    var _a10 = e.text,
        _l10 = t.childCount;
    Array.isArray(_a10) ? ((_t$text = t.text).push.apply(_t$text, _toConsumableArray(_a10.map(function (e, t) {
      return {
        index: t + _l10,
        value: e
      };
    }))), t.childCount += _a10.length) : (t.text.push({
      index: _l10,
      value: _a10
    }), t.childCount += 1);
  }

  if (e.style) {
    var _a11 = {};

    for (var _t20 in e.style) {
      _a11[d(_t20)] = e.style[_t20];
    }

    t.style.push(_a11);
  }

  if (e.styleVar && t.styleVar.push(e.styleVar), e.visible && (t.visible = e.visible), e.handler) {
    var _t21 = e.handler;
    'object' == _typeof(_t21.on) ? _(_t21.config || {}, _t21.on) : _(_t21);
  }

  e. && $(e.);
}

function V(e, _ref9) {
  var t = _ref9.initCtx,
      a = _ref9.runOp,
      _ref9$hooks = _ref9.hooks,
      l = _ref9$hooks.onMount,
      r = _ref9$hooks.onState;
  var i = e.opsAmount++;
  l.watch(function (_ref10) {
    var e = _ref10.value,
        l = _ref10.leaf;
    var n = o({
      value: e,
      priority: 'props',
      runOp: function runOp(e) {
        a(e, r);
      },
      group: l.root.leafOps[l.fullID].group
    });
    l.root.leafOps[l.fullID].group.ops[i] = n;
    var r = t(e, l);
  }), r.watch(function (_ref11) {
    var e = _ref11.value,
        t = _ref11.leaf;
    n(e, t.root.leafOps[t.fullID].group.ops[i]);
  });
}

function U(e, t, a) {
  e[t].forEach(function (e) {
    F(e, function (e, l) {
      switch (t) {
        case 'data':
        case 'styleVar':
          a[t][l] = e;
          break;

        case 'attr':
          a.attr['xlink:href' === l ? 'href' : l] = e;
          break;

        case 'style':
          l.startsWith('--') ? a.styleVar[l.slice(2)] = e : a.style[l] = e;
      }
    });
  });
}

function j(e, t, a) {
  var l = e.data.block,
      n = {
    type: 'text',
    parent: l,
    visible: 0,
    index: a,
    value: null
  };

  if (l.child[a] = n, e.hydration) {
    var _a12 = O(n);

    if (_a12) switch (_a12.type) {
      case 'text':
        n.value = e.root.env.document.createTextNode(t), _a12.value.after(n.value);
        break;

      case 'element':
        n.value = _a12.value.nextSibling, y(n.value, t);
    } else {
      var _e13 = C(n);

      n.value = _e13.firstChild, y(n.value, t);
    }
    n.visible = 1;
  } else n.value = e.root.env.document.createTextNode(t), M(n);

  return n;
}

function L(e) {
  var t = e.stateRef,
      a = Be;
  a.plain.includes(t) || a.closure.includes(t) || a.closure.push(t);
}

function z(e, t) {
  var a,
      r = 0,
      o = 0;
  'function' == typeof t ? (r = 1, a = t) : t && (o = 1, t.fn && (r = 1, a = t.fn), t. && ('function' == typeof t. ? (r = 1, a = t.) : 'function' == typeof t..fn && (r = 1, a = t..fn))), A(Be, 'h');
  var i,
      s = Be.env,
      c = Be.namespace,
      u = c,
      p = 'html';
  u = p = 'svg' === c ? 'svg' : 'html', 'svg' === e && (p = 'svg', u = 'svg'), Be.isBlock || (i = 'svg' === p ? s.document.createElementNS('http://www.w3.org/2000/svg', e) : s.document.createElement(e));
  var d = i,
      m = {
    type: 'element',
    tag: e,
    attr: [],
    data: [],
    text: [],
    style: [],
    styleVar: [],
    handler: [],
    stencil: d,
    seq: [],
    staticSeq: [],
    childTemplates: [],
    childCount: 0,
    inParentIndex: -1,
    opsAmount: 1,
    node: []
  };
  'foreignObject' === c ? (m.attr.push({
    xmlns: 'http://www.w3.org/1999/xhtml'
  }), u = 'html') : 'svg' === e ? (m.attr.push({
    xmlns: 'http://www.w3.org/2000/svg'
  }), u = 'svg') : 'foreignObject' === e && (u = 'foreignObject');
  var v = k({
    name: 'element',
    draft: m,
    isSvgRoot: 'svg' === e,
    namespace: u,
    fn: function fn(e, _ref12) {
      var i = _ref12.mount;
      var s = (0, _effector.createEvent)({
        named: 'domElementCreated'
      });
      r && a(), o && $(t), _effector.is.unit(m.visible) && (m.seq.push({
        type: 'visible',
        value: m.visible
      }), L(m.visible));
      var c = {
        attr: {},
        data: {},
        style: {},
        styleVar: {}
      };
      U(m, 'attr', c), U(m, 'data', c), U(m, 'style', c), U(m, 'styleVar', c), F(c, function (e, t) {
        F(e, function (e, a) {
          _effector.is.unit(e) ? (m.seq.push({
            type: t,
            field: a,
            value: e
          }), L(e)) : m.staticSeq.push({
            type: t,
            field: a,
            value: e
          });
        });
      }), m.text.forEach(function (e) {
        null !== e.value && (_effector.is.unit(e.value) ? (m.seq.push({
          type: 'dynamicText',
          value: e.value,
          childIndex: e.index
        }), L(e.value)) : m.seq.push({
          type: 'staticText',
          value: String(e.value),
          childIndex: e.index
        }));
      }), m.handler.forEach(function (e) {
        F(e.map, function (t, a) {
          m.seq.push({
            type: 'handler',
            for: a,
            handler: t,
            options: e.options,
            domConfig: e.domConfig
          });
        });
      }), d && f(d, m.staticSeq), m.seq.forEach(function (e) {
        switch (e.type) {
          case 'visible':
            {
              var _E = E({
                mount: i,
                state: e.value,
                onMount: function onMount(e, t) {
                  return {
                    leaf: t,
                    value: e,
                    hydration: t.hydration
                  };
                },
                onState: function onState(e, t) {
                  return {
                    leaf: e,
                    value: t,
                    hydration: 0
                  };
                }
              }),
                  _t22 = _E.onMount,
                  _a13 = _E.onState;

              _t22.watch(function (_ref13) {
                var e = _ref13.leaf,
                    t = _ref13.value,
                    a = _ref13.hydration;
                var n = e.data,
                    r = n.block;

                if (a && (l(t, n.ops.visible), t)) {
                  var _e14,
                      _t23 = q(r);

                  if (_e14 = _t23 ? _t23.nextSibling : C(r).firstChild, '#text' === _e14.nodeName) {
                    var _t24 = _e14;
                    _e14 = _e14.nextSibling, _t24.remove();
                  }

                  r.value = _e14, r.visible = 1;
                }

                N(m, {
                  parentBlockFragment: r,
                  leaf: e,
                  node: r.value,
                  svgRoot: v.isSvgRoot ? r.value : null
                }), t && n.needToCallNode && (n.needToCallNode = 0, (0, _effector.launch)({
                  target: $e,
                  params: {
                    element: n.block.value,
                    fns: m.node
                  },
                  page: e,
                  defer: 1,
                  scope: e.root.scope
                })), (0, _effector.launch)({
                  target: s,
                  params: e,
                  defer: 1,
                  page: e,
                  scope: e.root.scope
                });
              }), (0, _effector.merge)([_a13, _t22]).watch(function (_ref14) {
                var e = _ref14.leaf,
                    t = _ref14.value,
                    a = _ref14.hydration;
                a || n(t, e.data.ops.visible);
              });
              break;
            }

          case 'attr':
          case 'data':
          case 'style':
          case 'styleVar':
            {
              var _t25 = Ue[e.type],
                  _a14 = Ve.some(function (_ref15) {
                var t = _ref15.type,
                    a = _ref15.field;
                return e.type === t && e.field === a;
              }),
                  _l11 = E({
                mount: s,
                state: e.value,
                onMount: function onMount(e, t) {
                  return {
                    leaf: t,
                    value: e
                  };
                },
                onState: function onState(e, t) {
                  return {
                    leaf: e,
                    value: t
                  };
                }
              });

              _a14 ? (0, _effector.merge)([_l11.onState, _l11.onMount]).watch(function (_ref16) {
                var a = _ref16.leaf,
                    l = _ref16.value;

                _t25(je(a), e.field, l);
              }) : V(m, {
                initCtx: function initCtx(a, l) {
                  var n = je(l);
                  return _t25(n, e.field, a), n;
                },
                runOp: function runOp(a, l) {
                  _t25(l, e.field, a);
                },
                hooks: _l11
              });
              break;
            }

          case 'dynamicText':
            V(m, {
              initCtx: function initCtx(t, a) {
                return j(a, t, e.childIndex);
              },
              runOp: function runOp(e, t) {
                y(t.value, e);
              },
              hooks: E({
                mount: s,
                state: e.value,
                onMount: function onMount(e, t) {
                  return {
                    leaf: t,
                    value: String(e)
                  };
                },
                onState: function onState(e, t) {
                  return {
                    leaf: e,
                    value: String(t)
                  };
                }
              })
            });
            break;

          case 'staticText':
            s.watch(function (t) {
              j(t, e.value, e.childIndex);
            });
            break;

          case 'handler':
            {
              var _t26 = e.handler.graphite.meta.nativeTemplate || null;

              s.watch(function (a) {
                var l = null;

                if (_t26) {
                  var _e15 = 0,
                      _n7 = a;

                  for (; !_e15 && _n7;) {
                    _n7.template === _t26 ? (_e15 = 1, l = _n7) : _n7 = _n7.parent;
                  }
                } else l = null;

                je(a).addEventListener(e.for, function (t) {
                  e.options.prevent && t.preventDefault(), e.options.stop && t.stopPropagation(), (0, _effector.launch)({
                    target: e.handler,
                    params: t,
                    page: l,
                    scope: a.root.scope
                  });
                }, e.domConfig);
              });
              break;
            }
        }
      }), i.watch(function (e) {
        var t = e.data;

        if (!m.visible) {
          var _a15 = t.ops.visible,
              _r2 = t.block;

          if (e.hydration) {
            l(1, _a15);

            var _e16,
                _t27 = q(_r2);

            if (_e16 = _t27 ? _t27.nextSibling : C(_r2).firstChild, '#text' === _e16.nodeName) {
              var _t28 = _e16;
              _e16 = _e16.nextSibling, _t28.remove();
            }

            _r2.value = _e16, _r2.visible = 1;
          }

          N(m, {
            parentBlockFragment: _r2,
            leaf: e,
            node: _r2.value,
            svgRoot: v.isSvgRoot ? _r2.value : null
          }), (0, _effector.launch)({
            target: s,
            params: e,
            defer: 1,
            page: e,
            scope: e.root.scope
          }), e.hydration ? t.needToCallNode && (t.needToCallNode = 0, (0, _effector.launch)({
            target: $e,
            params: {
              element: t.block.value,
              fns: m.node
            },
            page: e,
            defer: 1,
            scope: e.root.scope
          })) : n(1, _a15);
        }
      });
    },
    env: s
  });
  P(v);
}

function G() {
  if ('undefined' != typeof document) return {
    document: document
  };
  throw Error('your environment has no document');
}

function Q(e, t) {
  var a, l, n, r, o, c;
  if ('function' == typeof t) a = t, n = G(), r = 0;else {
    if (!t) throw Error('using() second argument is missing');
    a = t.fn, n = t.env ? t.env : G(), r = t.hydrate, l = t.onComplete, o = t.onRoot, c = t.scope;
  }
  R(e, 'using() first argument is missing');
  var u = {
    scope: c,
    env: n,
    activeSpawns: new Set(),
    childSpawns: {},
    leafOps: {}
  },
      p = e.namespaceURI,
      d = e.tagName.toLowerCase(),
      f = {
    type: 'using',
    childTemplates: [],
    childCount: 0,
    inParentIndex: -1
  },
      m = k({
    name: 'using',
    draft: f,
    isSvgRoot: 'svg' === d,
    namespace: 'http://www.w3.org/2000/svg' === p ? 'svg' : 'foreignobject' === d ? 'foreignObject' : 'html',
    fn: function fn(e, _ref17) {
      var t = _ref17.mount;
      a(), t.watch(Le.using);
    },
    env: n
  }),
      v = {
    type: 'using',
    child: [],
    value: e
  },
      h = i({
    onComplete: l
  }),
      g = D(m, {
    parentLeaf: Me || null,
    mountNode: e,
    svgRoot: m.isSvgRoot ? e : Me ? Me.svgRoot : null,
    leafData: {
      type: 'using',
      draft: f,
      element: e,
      block: v
    },
    opGroup: s(h),
    domSubtree: s(h),
    hydration: r,
    root: u
  });

  if (o && o({
    template: m,
    leaf: g
  }), h.onDrain && !h.rafID) {
    var _e17 = h.onDrain;
    h.onDrain = null, _e17();
  }
}

function W(e, t) {
  var a = e.root.childSpawns[e.fullID];

  for (var _e18 in a) {
    var _l12 = a[_e18];

    for (var _e19 = 0; _e19 < _l12.length; _e19++) {
      t(_l12[_e19]);
    }
  }
}

function Z(e, t) {
  var a = function a(t) {
    var l = t.data;

    if (e && 'list' === l.type && l.pendingUpdate) {
      var _e20 = l.pendingUpdate;
      l.pendingUpdate = null, (0, _effector.launch)({
        target: t.template.api.pendingUpdate,
        params: _e20,
        defer: 1,
        page: t,
        scope: t.root.scope
      });
    }

    if (e && 'route' === l.type) if (l.pendingInit) {
      var _e21 = l.pendingInit.value;
      l.pendingInit = null, (0, _effector.launch)({
        target: t.template.api.pendingInit,
        params: _e21,
        defer: 1,
        page: t,
        scope: t.root.scope
      });
    } else if (!l.block.visible) return;

    switch (l.type) {
      case 'element':
        n(e, l.ops.visible);
        break;

      case 'route':
      case 'list':
      case 'list item':
        W(t, a);
        break;

      default:
        console.log('unsupported type', l.type);
    }
  };

  W(t, a);
}

function H(e) {
  e.root.activeSpawns.delete(e.fullID), W(e, K);
}

function J(e) {
  X(e, e.root.childSpawns[e.parent.fullID][e.template.id]), X(e, e.template.pages);
}

function K(e) {
  var t = e.data,
      a = e.root;

  switch (t.type) {
    case 'element':
      X(e, a.childSpawns[e.parent.fullID][e.template.id]), function e(t) {
        a.activeSpawns.delete(t.fullID);
        var l = a.childSpawns[t.fullID];
        delete a.childSpawns[t.fullID], delete a.leafOps[t.fullID], X(t, t.template.pages);

        for (var _t29 in l) {
          l[_t29].forEach(e);
        }
      }(e), n(0, t.ops.visible);
      break;

    case 'list':
      {
        var _a16 = t.records;

        for (var _e22 = 0; _e22 < _a16.length; _e22++) {
          var _t30 = _a16[_e22];
          _t30.instance && K(_t30.instance), _t30.active = 0;
        }

        e.root.activeSpawns.delete(e.fullID), J(e);
        break;
      }

    case 'list item':
      {
        var _a17 = t.block;
        X(_a17, _a17.parent.child);
        var _l13 = _a17.left,
            _n8 = _a17.right;
        _l13 && (_l13.right = _n8, _n8 || _a17.parent.lastChild !== _a17 || (_a17.parent.lastChild = _l13)), _n8 && (_n8.left = _l13), _l13 || _n8 || _a17.parent.lastChild !== _a17 || (_a17.parent.lastChild = null), _a17.left = null, _a17.right = null, H(e), J(e);
        break;
      }

    case 'route':
      H(e), J(e);
      break;

    case 'block':
    case 'block item':
    case 'rec':
    case 'rec item':
      H(e);
  }

  delete a.childSpawns[e.fullID], delete a.leafOps[e.fullID];
}

function X(e, t) {
  if (!t) return;
  var a = t.indexOf(e);
  -1 !== a && t.splice(a, 1);
}

function Y(e, t) {
  if (Array.isArray(t)) return t.map(function (t) {
    return e.map(function (e) {
      return e[t];
    });
  });

  if ('object' == _typeof(t) && null !== t) {
    var _a18 = {};

    var _loop = function _loop(_l14) {
      var n = t[_l14];
      _a18[_l14] = e.map('function' == typeof n ? function (e) {
        return n(e);
      } : function (e) {
        return e[n];
      });
    };

    for (var _l14 in t) {
      _loop(_l14);
    }

    return _a18;
  }

  return e.map(function (e) {
    return e[t];
  });
}

function ee(e, t) {
  A(Be, 'list'), 'function' == typeof t && (_effector.is.unit(e) ? e = {
    source: e,
    fn: t
  } : e.fn = t);
  var _e23 = e,
      a = _e23.fn,
      l = _e23.key,
      n = _e23.source,
      _e23$fields = _e23.fields,
      r = _e23$fields === void 0 ? [] : _e23$fields,
      o = void 0 !== l ? 'function' == typeof l ? l : function (e) {
    return e[l];
  } : function (e, t) {
    return t;
  },
      i = {
    type: 'list',
    key: _effector.is.store(e) ? {
      type: 'index'
    } : {
      type: 'key',
      key: e.key
    },
    childTemplates: [],
    childCount: 0,
    inParentIndex: -1
  },
      _Be = Be,
      d = _Be.env,
      f = _Be.namespace;
  P(k({
    name: 'list',
    draft: i,
    isSvgRoot: 0,
    namespace: f,
    fn: function fn(e, _ref18) {
      var t = _ref18.mount;
      var l = k({
        name: 'list item',
        state: {
          id: -1,
          store: null
        },
        draft: i,
        isSvgRoot: 0,
        namespace: f,
        fn: function fn(_ref19, _ref20) {
          var e = _ref19.id,
              t = _ref19.store;
          var l = _ref20.mount;
          a({
            store: t,
            key: e,
            fields: Y(t, r)
          });
          var n = (0, _effector.createEvent)({
            named: 'itemUpdater'
          });

          if (t.on(n, function (e, t) {
            return t;
          }), i.itemVisible) {
            var _E2 = E({
              mount: l,
              state: i.itemVisible,
              onMount: function onMount(e, t) {
                return {
                  visible: e,
                  leaf: t
                };
              },
              onState: function onState(e, t) {
                return {
                  visible: t,
                  leaf: e
                };
              }
            }),
                _e24 = _E2.onMount,
                _t31 = _E2.onState;

            _e24.watch(function (_ref21) {
              var e = _ref21.visible,
                  t = _ref21.leaf;
              var a = t.data.block;
              a.visible = e, a.childInitialized = e, e && N(i, {
                parentBlockFragment: a,
                leaf: t
              });
            }), _t31.watch(function (_ref22) {
              var e = _ref22.visible,
                  t = _ref22.leaf;
              var a = t.data.block;
              a.visible = e, a.childInitialized ? Z(e, t) : e && (a.childInitialized = 1, N(i, {
                parentBlockFragment: a,
                leaf: t
              }));
            });
          } else l.watch(Le.listItem);

          return {
            itemUpdater: n
          };
        },
        env: d
      }),
          m = (0, _effector.createStore)([]),
          v = n.map(function (e) {
        return e;
      }),
          h = (0, _effector.sample)({
        source: n,
        clock: t,
        fn: function fn(e, t) {
          return {
            updates: e,
            leaf: t,
            hydration: t.hydration
          };
        },
        greedy: 1
      }),
          g = (0, _effector.createEvent)(),
          b = (0, _effector.sample)({
        source: h,
        clock: [v, g],
        fn: function fn(_ref23, t) {
          var e = _ref23.leaf;
          return {
            updates: t,
            leaf: e,
            hydration: 0
          };
        },
        greedy: 1
      });
      return (0, _effector.sample)({
        source: m,
        clock: [h, b],
        greedy: 1,
        fn: function fn(e, _ref24) {
          var t = _ref24.updates,
              a = _ref24.leaf,
              r = _ref24.hydration;
          var d = a.data,
              f = a;

          for (; f;) {
            if ('route' === f.data.type && !f.data.block.visible) return void (d.pendingUpdate = t);
            f = f.parent;
          }

          var m = d.block;
          Ce('list update [' + n.shortName + ']');
          var v = Array(t.length).fill(0),
              h = t.map(o),
              g = [];

          for (var _a19 = 0; _a19 < e.length; _a19++) {
            var _l15 = e[_a19],
                _n9 = h.indexOf(_l15.key);

            -1 !== _n9 ? (g.push(_l15), v[_n9] = 1, p(t[_n9], _l15.asyncValue)) : (_l15.active = 0, _l15.instance && K(_l15.instance), u(_l15.asyncValue));
          }

          var _loop2 = function _loop2(_e25) {
            if (v[_e25]) return "continue";
            var n = t[_e25],
                o = h[_e25],
                u = s(a.root.leafOps[a.fullID].group.queue),
                p = {
              type: 'LF',
              parent: m,
              child: [],
              childInitialized: 0,
              visible: 0,
              left: null,
              right: null
            },
                d = {
              type: 'listItem',
              key: o,
              index: o,
              active: 1,
              leafData: {
                type: 'list item',
                block: p,
                listDraft: i
              },
              asyncValue: c({
                value: n,
                group: u,
                onChange: function onChange(e) {
                  d.instance && (0, _effector.launch)({
                    target: d.instance.template.api.itemUpdater,
                    params: e,
                    defer: 1,
                    page: d.instance,
                    scope: d.instance.root.scope
                  });
                },
                onInit: function onInit(e) {
                  d.active && (r || (d.instance = D(l, {
                    values: {
                      id: o,
                      store: e
                    },
                    parentLeaf: a,
                    mountNode: a.mountNode,
                    svgRoot: a.svgRoot,
                    leafData: d.leafData,
                    opGroup: u,
                    domSubtree: a.root.leafOps[a.fullID].domSubtree,
                    hydration: r,
                    root: a.root
                  })));
                }
              })
            },
                f = g.length;
            g.push(d);
            var b = f > 0 ? g[f - 1].leafData : null;

            if (m.child.push(p), b) {
              var _e26 = b.block;
              p.left = _e26;
              var _t32 = _e26.right;
              _t32 ? (_t32.left = p, p.right = _t32) : m.lastChild = p, _e26.right = p;
            } else m.lastChild = p;

            r && (d.instance = D(l, {
              values: {
                id: o,
                store: n
              },
              parentLeaf: a,
              mountNode: a.mountNode,
              svgRoot: a.svgRoot,
              leafData: d.leafData,
              opGroup: u,
              domSubtree: a.root.leafOps[a.fullID].domSubtree,
              hydration: r,
              root: a.root
            }));
          };

          for (var _e25 = 0; _e25 < t.length; _e25++) {
            var _ret = _loop2(_e25);

            if (_ret === "continue") continue;
          }

          return Te('list update [' + n.shortName + ']'), 0 === g.length && (m.lastChild = null), d.records = g, g;
        },
        target: m
      }), {
        pendingUpdate: g
      };
    },
    env: d
  }));
}

function te(e) {
  A(Be, 'node');
  var t = Be.draft;

  switch (t.type) {
    case 'list':
    case 'listItem':
    case 'using':
    case 'route':
    case 'rec':
    case 'recItem':
    case 'block':
    case 'blockItem':
      return void console.error('node() hook supported only in h() nodes');
  }

  t.node.push(e);
}

function ae(_ref25) {
  var e = _ref25.source,
      t = _ref25.visible,
      a = _ref25.fn;
  A(Be, 'route');
  var _Be2 = Be,
      l = _Be2.env,
      n = _Be2.namespace,
      r = k({
    name: 'route',
    isSvgRoot: 0,
    namespace: n,
    env: l,
    draft: {
      type: 'route',
      childTemplates: [],
      childCount: 0,
      inParentIndex: -1
    },
    fn: function fn(r, _ref26) {
      var o = _ref26.mount;
      var i;
      if (_effector.is.store(t)) i = (0, _effector.combine)({
        value: e,
        visible: t
      });else {
        var _a20 = t;
        i = e.map(function (e) {
          return {
            value: e,
            visible: _a20(e)
          };
        });
      }
      var s = k({
        name: 'route item',
        isSvgRoot: 0,
        namespace: n,
        env: l,
        draft: {
          type: 'route',
          childTemplates: [],
          childCount: 0,
          inParentIndex: -1
        },
        state: {
          store: null
        },
        fn: function fn(_ref27, _ref28) {
          var e = _ref27.store;
          var t = _ref28.mount;
          var l = (0, _effector.createEvent)({
            named: 'itemUpdater'
          });
          e.on(l, function (e, t) {
            return t;
          }), a({
            store: e
          });
          var n = (0, _effector.sample)({
            source: t,
            clock: i,
            fn: function fn(e, _ref29) {
              var t = _ref29.visible,
                  a = _ref29.value;
              return {
                leaf: e,
                visible: t,
                value: a
              };
            },
            greedy: 1
          });
          t.watch(Le.routeItem), n.watch(function (_ref30) {
            var e = _ref30.leaf,
                t = _ref30.visible,
                a = _ref30.value;

            if (e.data.block.visible = t, t && (0, _effector.launch)({
              target: l,
              params: a,
              defer: 1,
              page: e,
              scope: e.root.scope
            }), t) {
              var _t33 = e.parent;

              for (; _t33;) {
                if ('route' === _t33.data.type && !_t33.data.block.visible) return;
                _t33 = _t33.parent;
              }
            }

            Z(t, e);
          });
        }
      });
      P(s);

      var _E3 = E({
        mount: o,
        state: i,
        onMount: function onMount(_ref31, a) {
          var e = _ref31.visible,
              t = _ref31.value;
          return {
            leaf: a,
            visible: e,
            value: t
          };
        },
        onState: function onState(e, _ref32) {
          var t = _ref32.visible,
              a = _ref32.value;
          return {
            leaf: e,
            visible: t,
            value: a
          };
        }
      }),
          c = _E3.onMount,
          u = _E3.onState,
          p = (0, _effector.createEvent)(),
          d = (0, _effector.sample)({
        source: o,
        clock: p,
        greedy: 1,
        fn: function fn(e, t) {
          return {
            leaf: e,
            value: t,
            visible: 1
          };
        }
      });

      return (0, _effector.merge)([c, u, d]).watch(function (_ref33) {
        var e = _ref33.leaf,
            t = _ref33.visible,
            a = _ref33.value;
        var l = e.data;

        if (l.block.visible = t, t || l.initialized || !l.pendingInit) {
          if (t && !l.initialized) {
            var _t34 = e.parent;

            for (; _t34;) {
              if ('route' === _t34.data.type && !_t34.data.block.visible) return void (l.pendingInit = {
                value: a
              });
              _t34 = _t34.parent;
            }
          }

          t && !l.initialized && (B({
            parentBlockFragment: l.block,
            leaf: e,
            actor: s,
            values: {
              store: a
            }
          }), l.initialized = 1);
        } else l.pendingInit = null;
      }), {
        pendingInit: p
      };
    }
  });
  P(r);
}

function le(_ref34) {
  var e = _ref34.source,
      t = _ref34.cases,
      a = _ref34.key;
  var l;
  A(Be, 'variant'), R(_effector.is.unit(e), 'variant({source}) should be unit'), l = 'function' == typeof a ? a : null == a ? function (e) {
    return String(e);
  } : function (e) {
    return String(e[a]);
  };
  var n = 0;

  var _loop3 = function _loop3(_a21) {
    '__' !== _a21 ? ae({
      source: e,
      visible: function visible(e) {
        return l(e) === _a21;
      },
      fn: t[_a21]
    }) : n = 1;
  };

  for (var _a21 in t) {
    _loop3(_a21);
  }

  if (n) {
    var _a22 = Object.keys(t);

    ae({
      source: e,
      visible: function visible(e) {
        return !_a22.includes(l(e));
      },
      fn: t.__
    });
  }
}

function ne(e) {
  var t = 'function' == typeof e ? e : e.fn,
      a = k({
    name: 'rec',
    state: {
      store: null
    },
    isSvgRoot: 0,
    namespace: null,
    env: null,
    draft: {
      type: 'rec',
      childTemplates: [],
      childCount: 0,
      inParentIndex: 0
    },
    defer: 1,
    isBlock: 1,
    fn: function fn(_ref35, _ref36) {
      var e = _ref35.store;
      var a = _ref36.mount;
      t({
        store: e,
        state: e
      });
      var l = (0, _effector.createEvent)({
        named: 'itemUpdater'
      });
      return e.on(l, function (e, t) {
        return t;
      }), a.watch(Le.rec), {
        itemUpdater: l
      };
    }
  });
  return function (_ref37) {
    var e = _ref37.store,
        _ref37$state = _ref37.state,
        t = _ref37$state === void 0 ? e : _ref37$state;
    A(Be, '(rec instance)');
    var _Be3 = Be,
        l = _Be3.env,
        n = _Be3.namespace;
    a.deferredInit && a.deferredInit(), P(k({
      name: 'rec item',
      isSvgRoot: 0,
      namespace: n,
      env: l,
      draft: {
        type: 'recItem',
        childTemplates: [],
        childCount: 0,
        inParentIndex: -1
      },
      fn: function fn(e, _ref38) {
        var l = _ref38.mount;

        var _E4 = E({
          state: t,
          mount: l,
          onMount: function onMount(e, t) {
            return {
              state: e,
              leaf: t
            };
          },
          onState: function onState(e, t) {
            return {
              state: t,
              leaf: e
            };
          }
        }),
            n = _E4.onMount,
            r = _E4.onState;

        r.watch(function (_ref39) {
          var e = _ref39.state,
              t = _ref39.leaf;
          W(t, function (a) {
            (0, _effector.launch)({
              target: a.template.api.itemUpdater,
              params: e,
              defer: 1,
              page: t,
              scope: t.root.scope
            });
          });
        }), n.watch(function (_ref40) {
          var e = _ref40.leaf,
              t = _ref40.state;
          B({
            parentBlockFragment: e.data.block,
            leaf: e,
            actor: a,
            values: {
              store: t
            }
          });
        });
      }
    }));
  };
}

function re(_ref41) {
  var e = _ref41.source,
      t = _ref41.key,
      a = _ref41.child,
      l = _ref41.fn;
  var n = ne(function (_ref42) {
    var e = _ref42.store;
    ee({
      source: e,
      key: t,
      fn: function fn(_ref43) {
        var e = _ref43.store;
        var t = e.map(function (e) {
          return e[a] || [];
        });
        l({
          store: e,
          child: function child() {
            n({
              store: t
            });
          }
        });
      }
    });
  });
  n({
    store: e
  });
}

function oe(_ref44) {
  var e = _ref44.fn,
      t = _ref44.env,
      _ref44$namespace = _ref44.namespace,
      a = _ref44$namespace === void 0 ? "html" : _ref44$namespace;
  var l = k({
    name: 'block',
    isSvgRoot: 0,
    namespace: a,
    env: t,
    draft: {
      type: 'block',
      childTemplates: [],
      childCount: 0,
      inParentIndex: 0
    },
    isBlock: 1,
    fn: function fn(_ref45, _ref46) {
      _objectDestructuringEmpty(_ref45);

      var t = _ref46.mount;
      e(), t.watch(Le.block);
    }
  });
  return function () {
    A(Be, '(block instance)');
    var e = {
      type: 'blockItem',
      childTemplates: [],
      childCount: 0,
      inParentIndex: -1,
      itemOf: l
    },
        _Be4 = Be,
        t = _Be4.env,
        a = _Be4.namespace;
    P(k({
      name: 'block item',
      isSvgRoot: 0,
      namespace: a,
      env: t,
      draft: e,
      fn: function fn(e, _ref47) {
        var t = _ref47.mount;
        t.watch(Le.blockItem);
      }
    }));
  };
}

function ie(e, t) {
  if (0 === t.length) return e;
  var a = [e[0]];

  for (var _l16 = 0; _l16 < t.length; _l16++) {
    a.push(t[_l16], e[_l16 + 1]);
  }

  return a;
}

function se(e) {
  for (var _len = arguments.length, t = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    t[_key - 1] = arguments[_key];
  }

  Array.isArray(e) ? $({
    text: ie(e, t)
  }) : $({
    text: e
  });
}

function ce(e) {
  for (var _len2 = arguments.length, t = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
    t[_key2 - 1] = arguments[_key2];
  }

  return t.every(function (e) {
    return !_effector.is.store(e);
  }) ? ie(e, t).join('') : (0, _effector.combine)(t, function (t) {
    return ie(e, t).join('');
  });
}

var Ie;
Ie = 'undefined' != typeof performance && performance.now ? function () {
  return performance.now();
} : 'undefined' != typeof process && process.hrtime ? function () {
  var e = process.hrtime();
  return (1e9 * e[0] + e[1]) / 1e6;
} : function () {
  return Date.now();
};
var xe = new Map();

var we = [],
    Se = function Se(e) {
  var t = xe.get(e);
  t || (t = {
    calls: 0,
    time: 0,
    label: e,
    childTime: 0
  }, xe.set(e, t)), t.calls += 1, we.push({
    bucket: t,
    pendingStart: Ie()
  });
},
    De = function De(e) {
  var t = xe.get(e),
      a = we.pop().pendingStart,
      l = Ie() - a;
  t.time += l, we.length > 0 && (we[we.length - 1].bucket.childTime += l);
};

var Ce, Te;
'undefined' != typeof performance && performance.mark ? (Ce = function Ce(e) {
  performance.mark("\u2604\uFE0F " + e + ' start'), Se(e);
}, Te = function Te(e) {
  De(e);

  try {
    performance.measure("\u2604\uFE0F " + e, "\u2604\uFE0F " + e + ' start');
  } catch (e) {}

  performance.clearMarks("\u2604\uFE0F " + e + ' start'), performance.clearMeasures("\u2604\uFE0F " + e);
}) : (Ce = function Ce(e) {
  Se(e);
}, Te = function Te(e) {
  De(e);
});
var Oe = 'undefined' != typeof requestAnimationFrame ? requestAnimationFrame : function (e) {
  return setTimeout(e, 0);
};

var qe = {
  attr: b,
  data: g,
  style: h,
  styleVar: v
},
    Re = function Re(e, t) {
  return e.includes(t);
};

var Ae = {
  storeBase: function storeBase(e, t) {
    e.plain.push(t);
  },
  storeOnMap: function storeOnMap(e, t, a, l) {
    var n, r;
    a.unshift(e.loader), a.push(e.upward), l && (Re(e.plain, l) || (Re(e.closure, l) || e.closure.push(l), r = {
      type: 'closure',
      of: l
    }, (n = t).before || (n.before = []), n.before.push(r)));
  },
  storeMap: function storeMap(e, t, a) {
    Re(e.plain, t) || Re(a.seq, e.loader) || a.seq.unshift(e.loader);
  },
  storeWatch: function storeWatch(e, t, a) {
    return e.watch.push({
      of: t,
      fn: a
    }), 1;
  },
  eventPrepend: function eventPrepend(e, t) {
    t.seq.push(e.upward);
  },
  combineBase: function combineBase(e, t, a) {
    e.plain.push(t, a);
  },
  combineField: function combineField(e, t, a) {
    Re(e.plain, t) || a.seq.unshift(e.loader);
  },
  splitBase: function splitBase(e, t) {
    e.plain.push(t);
  },
  splitMatchStore: function splitMatchStore(e, t, a) {
    Re(e.plain, t) || a.seq.unshift(e.loader);
  },
  sampleStoreSource: function sampleStoreSource(e, t) {
    Re(e.plain, t) || Re(e.closure, t) || e.closure.push(t);
  },
  sampleNonStoreSource: function sampleNonStoreSource(e, t, a, l) {
    e.plain.push(t, a, l);
  },
  sampleTarget: function sampleTarget(e, t) {
    t.seq.push(e.loader);
  },
  sampleSourceLoader: function sampleSourceLoader(e) {
    return e.loader;
  },
  sampleSourceUpward: function sampleSourceUpward(e, t) {
    return t && e.upward;
  }
},
    Pe = 0,
    Ne = 0,
    Be = null,
    Me = null;

var Ee = function Ee(e, t) {
  return e.reg[t.id];
};

var Fe = null;
var _e = ['LF', 'using', 'element', 'recItem', 'rec', 'block', 'blockItem', 'route'];
var $e = (0, _effector.createEvent)({
  named: 'onMount'
});
$e.watch(function (_ref48) {
  var e = _ref48.fns,
      t = _ref48.element;
  e.forEach(function (e) {
    e(t);
  });
});

var Ve = [{
  type: 'attr',
  field: 'value'
}, {
  type: 'attr',
  field: 'checked'
}, {
  type: 'attr',
  field: 'min'
}, {
  type: 'attr',
  field: 'max'
}],
    Ue = {
  attr: b,
  data: g,
  style: h,
  styleVar: v
},
    je = function je(e) {
  return e.data.block.value;
};

var Le = {
  using: function using(e) {
    var t = e.data;
    N(t.draft, {
      parentBlockFragment: t.block,
      leaf: e
    });
  },
  routeItem: function routeItem(e) {
    var t = e.draft,
        a = e.data;
    a.block.visible = 1, N(t, {
      parentBlockFragment: a.block,
      leaf: e
    });
  },
  block: function block(e) {
    N(e.draft, {
      parentBlockFragment: e.data.block,
      leaf: e
    });
  },
  blockItem: function blockItem(e) {
    B({
      parentBlockFragment: e.data.block,
      leaf: e,
      actor: e.draft.itemOf
    });
  },
  rec: function rec(e) {
    N(e.draft, {
      parentBlockFragment: e.data.block,
      leaf: e
    });
  },
  listItem: function listItem(e) {
    var t = e.data,
        a = t.block;
    a.visible = 1, a.childInitialized = 1, N(t.listDraft, {
      parentBlockFragment: a,
      leaf: e
    });
  }
};
},{"effector/effector.mjs":"../node_modules/effector/effector.mjs","process":"../node_modules/process/browser.js"}],"../node_modules/stylis/dist/stylis.mjs":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.alloc = T;
exports.append = O;
exports.caret = P;
exports.char = J;
exports.charat = z;
exports.combine = S;
exports.comment = te;
exports.commenter = ee;
exports.compile = ae;
exports.copy = I;
exports.dealloc = U;
exports.declaration = se;
exports.delimit = V;
exports.delimiter = _;
exports.escaping = Z;
exports.hash = m;
exports.identifier = re;
exports.indexof = j;
exports.match = x;
exports.middleware = oe;
exports.namespace = he;
exports.next = L;
exports.node = H;
exports.parse = ce;
exports.peek = N;
exports.prefix = ue;
exports.prefixer = ve;
exports.prev = K;
exports.replace = y;
exports.ruleset = ne;
exports.rulesheet = le;
exports.serialize = ie;
exports.sizeof = M;
exports.slice = Q;
exports.stringify = fe;
exports.strlen = A;
exports.substr = C;
exports.token = R;
exports.tokenize = W;
exports.tokenizer = Y;
exports.trim = g;
exports.whitespace = X;
exports.position = exports.line = exports.length = exports.from = exports.column = exports.characters = exports.character = exports.abs = exports.WEBKIT = exports.VIEWPORT = exports.SUPPORTS = exports.RULESET = exports.PAGE = exports.NAMESPACE = exports.MS = exports.MOZ = exports.MEDIA = exports.KEYFRAMES = exports.IMPORT = exports.FONT_FEATURE_VALUES = exports.FONT_FACE = exports.DOCUMENT = exports.DECLARATION = exports.COUNTER_STYLE = exports.COMMENT = exports.CHARSET = void 0;
var e = "-ms-";
exports.MS = e;
var r = "-moz-";
exports.MOZ = r;
var a = "-webkit-";
exports.WEBKIT = a;
var c = "comm";
exports.COMMENT = c;
var n = "rule";
exports.RULESET = n;
var t = "decl";
exports.DECLARATION = t;
var s = "@page";
exports.PAGE = s;
var u = "@media";
exports.MEDIA = u;
var i = "@import";
exports.IMPORT = i;
var f = "@charset";
exports.CHARSET = f;
var o = "@viewport";
exports.VIEWPORT = o;
var l = "@supports";
exports.SUPPORTS = l;
var v = "@document";
exports.DOCUMENT = v;
var h = "@namespace";
exports.NAMESPACE = h;
var p = "@keyframes";
exports.KEYFRAMES = p;
var b = "@font-face";
exports.FONT_FACE = b;
var w = "@counter-style";
exports.COUNTER_STYLE = w;
var $ = "@font-feature-values";
exports.FONT_FEATURE_VALUES = $;
var k = Math.abs;
exports.abs = k;
var d = String.fromCharCode;
exports.from = d;

function m(e, r) {
  return (((r << 2 ^ z(e, 0)) << 2 ^ z(e, 1)) << 2 ^ z(e, 2)) << 2 ^ z(e, 3);
}

function g(e) {
  return e.trim();
}

function x(e, r) {
  return (e = r.exec(e)) ? e[0] : e;
}

function y(e, r, a) {
  return e.replace(r, a);
}

function j(e, r) {
  return e.indexOf(r);
}

function z(e, r) {
  return e.charCodeAt(r) | 0;
}

function C(e, r, a) {
  return e.slice(r, a);
}

function A(e) {
  return e.length;
}

function M(e) {
  return e.length;
}

function O(e, r) {
  return r.push(e), e;
}

function S(e, r) {
  return e.map(r).join("");
}

var q = 1;
exports.line = q;
var B = 1;
exports.column = B;
var D = 0;
exports.length = D;
var E = 0;
exports.position = E;
var F = 0;
exports.character = F;
var G = "";
exports.characters = G;

function H(e, r, a, c, n, t, s) {
  return {
    value: e,
    root: r,
    parent: a,
    type: c,
    props: n,
    children: t,
    line: q,
    column: B,
    length: s,
    return: ""
  };
}

function I(e, r, a) {
  return H(e, r.root, r.parent, a, r.props, r.children, 0);
}

function J() {
  return F;
}

function K() {
  var _B, _q;

  exports.character = F = E > 0 ? z(G, exports.position = E = +E - 1) : 0;
  if ((_B = +B, exports.column = B = _B - 1, _B), F === 10) exports.column = B = 1, (_q = +q, exports.line = q = _q - 1, _q);
  return F;
}

function L() {
  var _E, _B2, _q2;

  exports.character = F = E < D ? z(G, (_E = +E, exports.position = E = _E + 1, _E)) : 0;
  if ((_B2 = +B, exports.column = B = _B2 + 1, _B2), F === 10) exports.column = B = 1, (_q2 = +q, exports.line = q = _q2 + 1, _q2);
  return F;
}

function N() {
  return z(G, E);
}

function P() {
  return E;
}

function Q(e, r) {
  return C(G, e, r);
}

function R(e) {
  switch (e) {
    case 0:
    case 9:
    case 10:
    case 13:
    case 32:
      return 5;

    case 33:
    case 43:
    case 44:
    case 47:
    case 62:
    case 64:
    case 126:
    case 59:
    case 123:
    case 125:
      return 4;

    case 58:
      return 3;

    case 34:
    case 39:
    case 40:
    case 91:
      return 2;

    case 41:
    case 93:
      return 1;
  }

  return 0;
}

function T(e) {
  return exports.line = q = exports.column = B = 1, exports.length = D = A(exports.characters = G = e), exports.position = E = 0, [];
}

function U(e) {
  return exports.characters = G = "", e;
}

function V(e) {
  return g(Q(E - 1, _(e === 91 ? e + 2 : e === 40 ? e + 1 : e)));
}

function W(e) {
  return U(Y(T(e)));
}

function X(e) {
  while (exports.character = F = N()) if (F < 33) L();else break;

  return R(e) > 2 || R(F) > 3 ? "" : " ";
}

function Y(e) {
  while (L()) switch (R(F)) {
    case 0:
      O(re(E - 1), e);
      break;

    case 2:
      O(V(F), e);
      break;

    default:
      O(d(F), e);
  }

  return e;
}

function Z(e, r) {
  while (--r && L()) if (F < 48 || F > 102 || F > 57 && F < 65 || F > 70 && F < 97) break;

  return Q(e, P() + (r < 6 && N() == 32 && L() == 32));
}

function _(e) {
  while (L()) switch (F) {
    case e:
      return E;

    case 34:
    case 39:
      return _(e === 34 || e === 39 ? e : F);

    case 40:
      if (e === 41) _(e);
      break;

    case 92:
      L();
      break;
  }

  return E;
}

function ee(e, r) {
  while (L()) if (e + F === 47 + 10) break;else if (e + F === 42 + 42 && N() === 47) break;

  return "/*" + Q(r, E - 1) + "*" + d(e === 47 ? e : L());
}

function re(e) {
  while (!R(N())) L();

  return Q(e, E);
}

function ae(e) {
  return U(ce("", null, null, null, [""], e = T(e), 0, [0], e));
}

function ce(e, r, a, c, n, t, s, u, i) {
  var f = 0;
  var o = 0;
  var l = s;
  var v = 0;
  var h = 0;
  var p = 0;
  var b = 1;
  var w = 1;
  var $ = 1;
  var k = 0;
  var m = "";
  var g = n;
  var x = t;
  var j = c;
  var z = m;

  while (w) switch (p = k, k = L()) {
    case 34:
    case 39:
    case 91:
    case 40:
      z += V(k);
      break;

    case 9:
    case 10:
    case 13:
    case 32:
      z += X(p);
      break;

    case 92:
      z += Z(P() - 1, 7);
      continue;

    case 47:
      switch (N()) {
        case 42:
        case 47:
          O(te(ee(L(), P()), r, a), i);
          break;

        default:
          z += "/";
      }

      break;

    case 123 * b:
      u[f++] = A(z) * $;

    case 125 * b:
    case 59:
    case 0:
      switch (k) {
        case 0:
        case 125:
          w = 0;

        case 59 + o:
          if (h > 0 && A(z) - l) O(h > 32 ? se(z + ";", c, a, l - 1) : se(y(z, " ", "") + ";", c, a, l - 2), i);
          break;

        case 59:
          z += ";";

        default:
          O(j = ne(z, r, a, f, o, n, u, m, g = [], x = [], l), t);
          if (k === 123) if (o === 0) ce(z, r, j, j, g, t, l, u, x);else switch (v) {
            case 100:
            case 109:
            case 115:
              ce(e, j, j, c && O(ne(e, j, j, 0, 0, n, u, m, n, g = [], l), x), n, x, l, u, c ? g : x);
              break;

            default:
              ce(z, j, j, j, [""], x, l, u, x);
          }
      }

      f = o = h = 0, b = $ = 1, m = z = "", l = s;
      break;

    case 58:
      l = 1 + A(z), h = p;

    default:
      if (b < 1) if (k == 123) --b;else if (k == 125 && b++ == 0 && K() == 125) continue;

      switch (z += d(k), k * b) {
        case 38:
          $ = o > 0 ? 1 : (z += "\f", -1);
          break;

        case 44:
          u[f++] = (A(z) - 1) * $, $ = 1;
          break;

        case 64:
          if (N() === 45) z += V(L());
          v = N(), o = A(m = z += re(P())), k++;
          break;

        case 45:
          if (p === 45 && A(z) == 2) b = 0;
      }

  }

  return t;
}

function ne(e, r, a, c, t, s, u, i, f, o, l) {
  var v = t - 1;
  var h = t === 0 ? s : [""];
  var p = M(h);

  for (var b = 0, w = 0, $ = 0; b < c; ++b) for (var d = 0, m = C(e, v + 1, v = k(w = u[b])), x = e; d < p; ++d) if (x = g(w > 0 ? h[d] + " " + m : y(m, /&\f/g, h[d]))) f[$++] = x;

  return H(e, r, a, t === 0 ? n : i, f, o, l);
}

function te(e, r, a) {
  return H(e, r, a, c, d(J()), C(e, 2, -2), 0);
}

function se(e, r, a, c) {
  return H(e, r, a, t, C(e, 0, c), C(e, c + 1, -1), c);
}

function ue(c, n) {
  switch (m(c, n)) {
    case 5103:
      return a + "print-" + c + c;

    case 5737:
    case 4201:
    case 3177:
    case 3433:
    case 1641:
    case 4457:
    case 2921:
    case 5572:
    case 6356:
    case 5844:
    case 3191:
    case 6645:
    case 3005:
    case 6391:
    case 5879:
    case 5623:
    case 6135:
    case 4599:
    case 4855:
    case 4215:
    case 6389:
    case 5109:
    case 5365:
    case 5621:
    case 3829:
      return a + c + c;

    case 5349:
    case 4246:
    case 4810:
    case 6968:
    case 2756:
      return a + c + r + c + e + c + c;

    case 6828:
    case 4268:
      return a + c + e + c + c;

    case 6165:
      return a + c + e + "flex-" + c + c;

    case 5187:
      return a + c + y(c, /(\w+).+(:[^]+)/, a + "box-$1$2" + e + "flex-$1$2") + c;

    case 5443:
      return a + c + e + "flex-item-" + y(c, /flex-|-self/, "") + c;

    case 4675:
      return a + c + e + "flex-line-pack" + y(c, /align-content|flex-|-self/, "") + c;

    case 5548:
      return a + c + e + y(c, "shrink", "negative") + c;

    case 5292:
      return a + c + e + y(c, "basis", "preferred-size") + c;

    case 6060:
      return a + "box-" + y(c, "-grow", "") + a + c + e + y(c, "grow", "positive") + c;

    case 4554:
      return a + y(c, /([^-])(transform)/g, "$1" + a + "$2") + c;

    case 6187:
      return y(y(y(c, /(zoom-|grab)/, a + "$1"), /(image-set)/, a + "$1"), c, "") + c;

    case 5495:
    case 3959:
      return y(c, /(image-set\([^]*)/, a + "$1" + "$`$1");

    case 4968:
      return y(y(c, /(.+:)(flex-)?(.*)/, a + "box-pack:$3" + e + "flex-pack:$3"), /s.+-b[^;]+/, "justify") + a + c + c;

    case 4095:
    case 3583:
    case 4068:
    case 2532:
      return y(c, /(.+)-inline(.+)/, a + "$1$2") + c;

    case 8116:
    case 7059:
    case 5753:
    case 5535:
    case 5445:
    case 5701:
    case 4933:
    case 4677:
    case 5533:
    case 5789:
    case 5021:
    case 4765:
      if (A(c) - 1 - n > 6) switch (z(c, n + 1)) {
        case 109:
          if (z(c, n + 4) !== 45) break;

        case 102:
          return y(c, /(.+:)(.+)-([^]+)/, "$1" + a + "$2-$3" + "$1" + r + (z(c, n + 3) == 108 ? "$3" : "$2-$3")) + c;

        case 115:
          return ~j(c, "stretch") ? ue(y(c, "stretch", "fill-available"), n) + c : c;
      }
      break;

    case 4949:
      if (z(c, n + 1) !== 115) break;

    case 6444:
      switch (z(c, A(c) - 3 - (~j(c, "!important") && 10))) {
        case 107:
          return y(c, ":", ":" + a) + c;

        case 101:
          return y(c, /(.+:)([^;!]+)(;|!.+)?/, "$1" + a + (z(c, 14) === 45 ? "inline-" : "") + "box$3" + "$1" + a + "$2$3" + "$1" + e + "$2box$3") + c;
      }

      break;

    case 5936:
      switch (z(c, n + 11)) {
        case 114:
          return a + c + e + y(c, /[svh]\w+-[tblr]{2}/, "tb") + c;

        case 108:
          return a + c + e + y(c, /[svh]\w+-[tblr]{2}/, "tb-rl") + c;

        case 45:
          return a + c + e + y(c, /[svh]\w+-[tblr]{2}/, "lr") + c;
      }

      return a + c + e + c + c;
  }

  return c;
}

function ie(e, r) {
  var a = "";
  var c = M(e);

  for (var n = 0; n < c; n++) a += r(e[n], n, e, r) || "";

  return a;
}

function fe(e, r, a, s) {
  switch (e.type) {
    case i:
    case t:
      return e.return = e.return || e.value;

    case c:
      return "";

    case n:
      e.value = e.props.join(",");
  }

  return A(a = ie(e.children, s)) ? e.return = e.value + "{" + a + "}" : "";
}

function oe(e) {
  var r = M(e);
  return function (a, c, n, t) {
    var s = "";

    for (var u = 0; u < r; u++) s += e[u](a, c, n, t) || "";

    return s;
  };
}

function le(e) {
  return function (r) {
    if (!r.root) if (r = r.return) e(r);
  };
}

function ve(c, s, u, i) {
  if (!c.return) switch (c.type) {
    case t:
      c.return = ue(c.value, c.length);
      break;

    case p:
      return ie([I(y(c.value, "@", "@" + a), c, "")], i);

    case n:
      if (c.length) return S(c.props, function (n) {
        switch (x(n, /(::plac\w+|:read-\w+)/)) {
          case ":read-only":
          case ":read-write":
            return ie([I(y(n, /:(read-\w+)/, ":" + r + "$1"), c, "")], i);

          case "::placeholder":
            return ie([I(y(n, /:(plac\w+)/, ":" + a + "input-$1"), c, ""), I(y(n, /:(plac\w+)/, ":" + r + "$1"), c, ""), I(y(n, /:(plac\w+)/, e + "input-$1"), c, "")], i);
        }

        return "";
      });
  }
}

function he(e) {
  switch (e.type) {
    case n:
      e.props = e.props.map(function (r) {
        return S(W(r), function (r, a, c) {
          switch (z(r, 0)) {
            case 12:
              return C(r, 1, A(r));

            case 0:
            case 40:
            case 43:
            case 62:
            case 126:
              return r;

            case 58:
              if (c[++a] === "global") c[a] = "", c[++a] = "\f" + C(c[a], a = 1, -1);

            case 32:
              return a === 1 ? "" : r;

            default:
              switch (a) {
                case 0:
                  e = r;
                  return M(c) > 1 ? "" : r;

                case a = M(c) - 1:
                case 2:
                  return a === 2 ? r + e + e : r + e;

                default:
                  return r;
              }

          }
        });
      });
  }
}
},{}],"../node_modules/foliage/dist/index.js":[function(require,module,exports) {
module.exports = function (e) {
  var t = {};

  function r(n) {
    if (t[n]) return t[n].exports;
    var o = t[n] = {
      i: n,
      l: !1,
      exports: {}
    };
    return e[n].call(o.exports, o, o.exports, r), o.l = !0, o.exports;
  }

  return r.m = e, r.c = t, r.d = function (e, t, n) {
    r.o(e, t) || Object.defineProperty(e, t, {
      enumerable: !0,
      get: n
    });
  }, r.r = function (e) {
    "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
      value: "Module"
    }), Object.defineProperty(e, "__esModule", {
      value: !0
    });
  }, r.t = function (e, t) {
    if (1 & t && (e = r(e)), 8 & t) return e;
    if (4 & t && "object" == typeof e && e && e.__esModule) return e;
    var n = Object.create(null);
    if (r.r(n), Object.defineProperty(n, "default", {
      enumerable: !0,
      value: e
    }), 2 & t && "string" != typeof e) for (var o in e) r.d(n, o, function (t) {
      return e[t];
    }.bind(null, o));
    return n;
  }, r.n = function (e) {
    var t = e && e.__esModule ? function () {
      return e.default;
    } : function () {
      return e;
    };
    return r.d(t, "a", t), t;
  }, r.o = function (e, t) {
    return Object.prototype.hasOwnProperty.call(e, t);
  }, r.p = "", r(r.s = 3);
}([function (e, t) {
  e.exports = require("forest");
}, function (e, t) {
  e.exports = require("stylis");
}, function (e, t) {
  e.exports = require("effector");
}, function (e, t, r) {
  "use strict";

  r.r(t), r.d(t, "StyledRoot", function () {
    return u;
  }), r.d(t, "styled", function () {
    return p;
  });
  var n = r(2),
      o = r(0),
      i = r(1);
  const a = Object(n.createEvent)(),
        s = Object(n.createStore)({
    map: new Map()
  });

  function u() {
    const e = s.map(({
      map: e
    }) => [...e.values()].join(" "));
    Object(o.h)("style", {
      text: e
    });
  }

  s.on(a, (e, {
    id: t,
    styles: r
  }) => e.map.has(t) ? e : (e.map.set(t, function (e, t) {
    return Object(i.serialize)(Object(i.compile)(`.es-${e} { ${t} }`), i.stringify);
  }(t, r)), {
    map: e.map
  }));

  const c = (() => {
    let e = 9005e3;
    return () => (++e).toString(36);
  })();

  const l = e => (t, ...r) => {
    const n = c(),
          i = function (e, t) {
      const r = [e[0]];
      return t.forEach((t, n) => {
        if ("function" == typeof t) {
          if ("string" != typeof t.STYLED_ID) throw new TypeError("Passed not an effector styled component");
          r.push(".es-" + t.STYLED_ID);
        } else r.push(String(t));

        r.push(e[n + 1]);
      }), r.join("");
    }(t, r),
          s = t => {
      a({
        id: n,
        styles: i
      }), Object(o.h)(e, () => {
        Object(o.node)(e => {
          e.classList.add("es-" + n);
        }), t && ("function" == typeof t ? t() : (Object(o.spec)(t), "function" == typeof t.fn && t.fn()));
      });
    };

    return s.STYLED_ID = n, s;
  };

  ["a", "abbr", "address", "area", "article", "aside", "audio", "b", "base", "bdi", "bdo", "blockquote", "body", "br", "button", "canvas", "caption", "cite", "code", "col", "colgroup", "data", "datalist", "dd", "del", "details", "dfn", "dialog", "div", "dl", "dt", "em", "embed", "fieldset", "figcaption", "figure", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "head", "header", "hgroup", "hr", "html", "i", "iframe", "img", "input", "ins", "kbd", "label", "legend", "li", "link", "main", "map", "mark", "marquee", "menu", "meta", "meter", "nav", "noscript", "object", "ol", "optgroup", "option", "output", "p", "param", "picture", "pre", "progress", "q", "rp", "rt", "ruby", "s", "samp", "script", "section", "select", "small", "source", "span", "strong", "style", "sub", "summary", "sup", "table", "tbody", "td", "textarea", "tfoot", "th", "thead", "time", "title", "tr", "track", "u", "ul", "var", "video", "wbr", "circle", "clipPath", "defs", "ellipse", "foreignObject", "g", "image", "line", "linearGradient", "marker", "mask", "path", "pattern", "polygon", "polyline", "radialGradient", "rect", "stop", "svg", "text", "tspan"].forEach(e => {
    l[e] = l(e);
  });
  const p = l;
}]);
},{"forest":"../node_modules/forest/forest.mjs","stylis":"../node_modules/stylis/dist/stylis.mjs","effector":"../node_modules/effector/effector.mjs"}],"../node_modules/effector-inspector/dist/common.mjs":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.addEffect = Pe;
exports.addEvent = Ie;
exports.addStore = Ae;
exports.createInspector = ze;

var _effector = require("effector");

var _forest = require("forest");

var _foliage = require("foliage");

function h(n, e) {
  var t = Object.keys(n);

  if (Object.getOwnPropertySymbols) {
    var r = Object.getOwnPropertySymbols(n);
    e && (r = r.filter(function (e) {
      return Object.getOwnPropertyDescriptor(n, e).enumerable;
    })), t.push.apply(t, r);
  }

  return t;
}

function w(n) {
  for (var e = 1; e < arguments.length; e++) {
    var t = null != arguments[e] ? arguments[e] : {};
    e % 2 ? h(Object(t), !0).forEach(function (e) {
      j(n, e, t[e]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(n, Object.getOwnPropertyDescriptors(t)) : h(Object(t)).forEach(function (e) {
      Object.defineProperty(n, e, Object.getOwnPropertyDescriptor(t, e));
    });
  }

  return n;
}

function k(n) {
  return (k = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (n) {
    return typeof n;
  } : function (n) {
    return n && "function" == typeof Symbol && n.constructor === Symbol && n !== Symbol.prototype ? "symbol" : typeof n;
  })(n);
}

function j(n, e, t) {
  return e in n ? Object.defineProperty(n, e, {
    value: t,
    enumerable: !0,
    configurable: !0,
    writable: !0
  }) : n[e] = t, n;
}

function O(n, e) {
  if (null == n) return {};

  var t,
      r,
      o = function (n, e) {
    if (null == n) return {};
    var t,
        r,
        o = {},
        i = Object.keys(n);

    for (r = 0; r < i.length; r++) t = i[r], e.indexOf(t) >= 0 || (o[t] = n[t]);

    return o;
  }(n, e);

  if (Object.getOwnPropertySymbols) {
    var i = Object.getOwnPropertySymbols(n);

    for (r = 0; r < i.length; r++) t = i[r], e.indexOf(t) >= 0 || Object.prototype.propertyIsEnumerable.call(n, t) && (o[t] = n[t]);
  }

  return o;
}

function S(n, e) {
  return e || (e = n.slice(0)), Object.freeze(Object.defineProperties(n, {
    raw: {
      value: Object.freeze(e)
    }
  }));
}

function $(n, e) {
  return function (n) {
    if (Array.isArray(n)) return n;
  }(n) || function (n, e) {
    var t = null == n ? null : "undefined" != typeof Symbol && n[Symbol.iterator] || n["@@iterator"];
    if (null == t) return;
    var r,
        o,
        i = [],
        a = !0,
        c = !1;

    try {
      for (t = t.call(n); !(a = (r = t.next()).done) && (i.push(r.value), !e || i.length !== e); a = !0);
    } catch (n) {
      c = !0, o = n;
    } finally {
      try {
        a || null == t.return || t.return();
      } finally {
        if (c) throw o;
      }
    }

    return i;
  }(n, e) || E(n, e) || function () {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}

function z(n) {
  return function (n) {
    if (Array.isArray(n)) return A(n);
  }(n) || function (n) {
    if ("undefined" != typeof Symbol && null != n[Symbol.iterator] || null != n["@@iterator"]) return Array.from(n);
  }(n) || E(n) || function () {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}

function E(n, e) {
  if (n) {
    if ("string" == typeof n) return A(n, e);
    var t = Object.prototype.toString.call(n).slice(8, -1);
    return "Object" === t && n.constructor && (t = n.constructor.name), "Map" === t || "Set" === t ? Array.from(n) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? A(n, e) : void 0;
  }
}

function A(n, e) {
  (null == e || e > n.length) && (e = n.length);

  for (var t = 0, r = new Array(e); t < e; t++) r[t] = n[t];

  return r;
}

function I(n, e) {
  var t = "undefined" != typeof Symbol && n[Symbol.iterator] || n["@@iterator"];

  if (!t) {
    if (Array.isArray(n) || (t = E(n)) || e && n && "number" == typeof n.length) {
      t && (n = t);

      var r = 0,
          o = function () {};

      return {
        s: o,
        n: function () {
          return r >= n.length ? {
            done: !0
          } : {
            done: !1,
            value: n[r++]
          };
        },
        e: function (n) {
          throw n;
        },
        f: o
      };
    }

    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }

  var i,
      a = !0,
      c = !1;
  return {
    s: function () {
      t = t.call(n);
    },
    n: function () {
      var n = t.next();
      return a = n.done, n;
    },
    e: function (n) {
      c = !0, i = n;
    },
    f: function () {
      try {
        a || null == t.return || t.return();
      } finally {
        if (c) throw i;
      }
    }
  };
}

var P,
    C,
    D,
    F,
    T,
    M,
    B,
    L,
    J,
    q,
    N,
    U,
    R,
    W,
    K,
    X,
    _,
    H,
    V,
    G,
    Q,
    Y,
    Z,
    nn,
    en,
    tn,
    rn = ["title"],
    on = _foliage.styled.div(P || (P = S(["\n  --primary: #ff8c00;\n  --primary-light: #ffb152;\n  --primary-dark: #c86e00;\n  --primary-text: #fff;\n\n  --text: #404040;\n  --border: #dadada;\n  --shadow: 0 4px 20px 4px rgba(0, 0, 0, 0.1);\n\n  --scrollbar: var(--primary-light);\n\n  --tabs-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);\n\n  --tab-bg: #fff;\n  --tab-text: #606060;\n  --tab-text-active: var(--primary);\n  --tab-shadow-active: var(--primary);\n\n  --content-bg: #f9f9f9;\n\n  --code-var: #ff8c00;\n  --code-func: #249ec6;\n  --code-string: #00a153;\n  --code-bool: #ff62d3;\n  --code-number: #7a70f3;\n  --code-date: #333;\n  --code-regexp: #95b70e;\n\n  @media (prefers-color-scheme: dark) {\n    --text: #ddd;\n    --border: #111;\n    --shadow: 0 4px 20px 4px rgba(0, 0, 0, 0.1);\n\n    --scrollbar: var(--primary);\n\n    --tabs-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n\n    --tab-bg: #444;\n    --tab-text: #ddd;\n    --tab-text-active: var(--primary);\n    --tab-shadow-active: var(--primary);\n\n    --content-bg: #333;\n\n    --code-var: #ff8c00;\n    --code-func: #a5d4e2;\n    --code-string: #2cb472;\n    --code-bool: #ff62d3;\n    --code-number: #9990ff;\n    --code-date: #fff;\n    --code-regexp: #e5ff7e;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background-color: var(--scrollbar);\n  }\n\n  ::-webkit-scrollbar {\n    width: 6px;\n  }\n\n  ::-webkit-scrollbar:horizontal {\n    height: 6px;\n  }\n\n  position: fixed;\n  top: 64px;\n  right: 64px;\n  bottom: 64px;\n  z-index: 1000;\n\n  display: flex;\n  flex-direction: row;\n  width: 736px;\n  min-width: 400px;\n  max-width: 90%;\n\n  color: var(--text);\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Apple Color Emoji',\n    'Segoe UI Emoji', 'Segoe UI Symbol', 'PT Sans', Helvetica, Arial, sans-serif;\n  line-height: 1.5;\n\n  background-color: var(--bg);\n  border-radius: 8px;\n  box-shadow: var(--shadow);\n\n  user-select: none;\n\n  color-scheme: light dark;\n  -ms-text-size-adjust: 100%;\n  -webkit-text-size-adjust: 100%;\n\n  @media screen and (max-width: 700px) {\n    max-width: 480px;\n  }\n"]))),
    an = _foliage.styled.div(C || (C = S(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  width: 8px;\n  margin-top: 48px;\n  margin-bottom: 48px;\n  margin-left: -10px;\n\n  color: var(--primary);\n  font-size: 14px;\n  font-family: monospace;\n  line-height: 6px;\n  word-break: break-all;\n\n  background-color: var(--bg);\n  border-top-left-radius: 8px;\n  border-bottom-left-radius: 8px;\n  cursor: col-resize;\n\n  &:hover,\n  &[data-active='true'] {\n    color: var(--bg);\n\n    background-color: var(--primary);\n  }\n"]))),
    cn = _foliage.styled.section(D || (D = S(["\n  position: relative;\n\n  display: flex;\n  flex-flow: column;\n  width: 100%;\n\n  border-radius: inherit;\n"]))),
    ln = _foliage.styled.div(F || (F = S(["\n  position: sticky;\n  top: 0;\n  right: 0;\n  left: 0;\n\n  display: flex;\n\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 20px;\n\n  background-color: var(--tab-bg);\n  border-bottom: 1px solid var(--border);\n  border-radius: inherit;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n  box-shadow: var(--tabs-shadow);\n"]))),
    sn = _foliage.styled.div(T || (T = S(["\n  padding: 8px 16px;\n\n  color: var(--tab-text);\n\n  border-radius: inherit;\n  border-top-right-radius: 0;\n  cursor: pointer;\n\n  &:hover {\n    box-shadow: inset 0 -2px 0 0 var(--tab-shadow-active);\n  }\n\n  &:not(:first-child) {\n    border-top-left-radius: 0;\n  }\n\n  &[data-active='true'] {\n    color: var(--tab-text-active);\n\n    box-shadow: inset 0 -2px 0 0 var(--tab-shadow-active);\n  }\n"]))),
    un = _foliage.styled.div(M || (M = S(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  overflow-y: auto;\n\n  background-color: var(--content-bg);\n"]))),
    fn = _foliage.styled.ul(B || (B = S(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  margin: 0 0;\n  padding: 0 0;\n  overflow-x: auto;\n\n  list-style-type: none;\n"]))),
    dn = _foliage.styled.li(L || (L = S(["\n  display: flex;\n  margin: 0 0;\n  padding: 6px 10px;\n\n  font-size: 12px;\n  line-height: 1.3;\n"]))),
    mn = _foliage.styled.pre(J || (J = S(["\n  display: flex;\n  margin: 0 0;\n\n  color: var(--code-var);\n  font-family: 'JetBrains Mono', hasklig, monofur, monospace;\n"]))),
    pn = _foliage.styled.pre(q || (q = S(["\n  margin: 0 0;\n\n  color: var(--code-func);\n  font-family: 'JetBrains Mono', hasklig, monofur, monospace;\n"]))),
    vn = _foliage.styled.button(N || (N = S(["\n  margin: 0;\n  margin-left: 1rem;\n  padding: 0.2rem 0.4rem;\n\n  color: var(--primary-text);\n  font-family: 'JetBrains Mono', hasklig, monofur, monospace;\n\n  background-color: var(--primary);\n  border: var(--primary);\n  border-radius: 4px;\n\n  &:focus {\n    outline: 0;\n    box-shadow: 0 0 0 1px var(--primary-dark), 0 0 3px 0 var(--primary-dark);\n  }\n\n  &:hover {\n    background-color: var(--primary-dark);\n  }\n"]))),
    bn = _foliage.styled.span(U || (U = S(["\n  display: inline-block;\n\n  [data-opened='true'] > & {\n    display: block;\n    padding-left: 8px;\n  }\n\n  &[data-hidden='folded'] {\n    display: none;\n\n    [data-opened='true'] > & {\n      display: block;\n    }\n  }\n\n  &[data-hidden='expanded'] {\n    display: inline-block;\n\n    [data-opened='true'] > & {\n      display: none;\n    }\n  }\n\n  &:not(:last-child)::after {\n    content: ', ';\n  }\n"]))),
    xn = _foliage.styled.span(R || (R = S(["\n  color: var(--code-bool);\n  font-style: italic;\n"]))),
    yn = _foliage.styled.span(W || (W = S(["\n  color: var(--code-number);\n"]))),
    gn = _foliage.styled.span(K || (K = S(["\n  color: var(--code-string);\n"]))),
    hn = _foliage.styled.span(X || (X = S(["\n  color: var(--code-number);\n  font-weight: bold;\n"]))),
    wn = _foliage.styled.span(_ || (_ = S(["\n  color: var(--code-date);\n"]))),
    kn = _foliage.styled.span(H || (H = S(["\n  /* nothing here */\n"]))),
    jn = _foliage.styled.span(V || (V = S(["\n  color: var(--code-regexp);\n"]))),
    On = _foliage.styled.div(G || (G = S(["\n  display: flex;\n  * + * {\n    margin-left: 0.5rem;\n  }\n"]))),
    Sn = {
  boolean: xn,
  date: wn,
  keyword: hn,
  number: yn,
  string: gn,
  symbol: kn,
  regexp: jn
},
    $n = _foliage.styled.div(Q || (Q = S(["\n  display: flex;\n  flex-shrink: 0;\n  padding: 1rem;\n"]))),
    zn = _foliage.styled.input(Y || (Y = S(["\n  /* nothing here */\n"]))),
    En = _foliage.styled.label(Z || (Z = S(["\n  display: flex;\n  flex-shrink: 0;\n  padding: 0 0.5rem;\n"]))),
    An = _foliage.styled.input(nn || (nn = S(["\n  display: flex;\n  flex-shrink: 0;\n  margin: 0 0.5rem;\n  padding: 0 0.5rem;\n\n  border: 1px solid var(--border);\n  border-radius: 0.2rem;\n\n  &:focus {\n    border-color: var(--primary);\n    outline: 0;\n    box-shadow: 0 0 0 1px var(--primary);\n  }\n"]))),
    In = _foliage.styled.div(en || (en = S(["\n  display: flex;\n  flex-direction: column;\n"]))),
    Pn = function (n) {
  var e = n.title,
      t = O(n, rn);
  En(function () {
    zn(function () {
      (0, _forest.spec)({
        attr: {
          type: "checkbox"
        }
      }), (0, _forest.spec)(t);
    }), (0, _forest.spec)({
      text: e
    });
  });
},
    Cn = _foliage.styled.select(tn || (tn = S([""]))),
    Dn = Math.pow(983020, 2).toString(36);

function Fn(n, e) {
  var t;
  return null !== (t = localStorage.getItem("".concat(Dn, "-").concat(n))) && void 0 !== t ? t : e;
}

function Tn(n, e) {
  return localStorage.setItem("".concat(Dn, "-").concat(n), e), e;
}

function Mn(e, t) {
  var r = (0, _effector.createEvent)({
    loc: {
      file: "/src/setting.ts",
      line: 11,
      column: 17
    },
    name: "save",
    sid: "wnm0lw"
  });
  return r.watch(function (n) {
    return Tn(e, n);
  }), {
    read: function () {
      return Fn(e, t);
    },
    write: function (n) {
      return Tn(e, n);
    },
    save: r
  };
}

function Bn(e, t) {
  var r = (0, _effector.createEvent)({
    loc: {
      file: "/src/setting.ts",
      line: 20,
      column: 17
    },
    name: "save",
    sid: "-o65dje"
  });
  return r.watch(function (n) {
    return Tn(e, JSON.stringify(n));
  }), {
    read: function () {
      return JSON.parse(Fn(e, JSON.stringify(t)));
    },
    write: function (n) {
      return Tn(e, JSON.stringify(n)), n;
    },
    save: r
  };
}

function Ln(t) {
  var r = Object.keys(t),
      o = r[0],
      i = Mn("last-tab", o),
      a = i.read(),
      c = r.includes(a) ? a : o,
      l = (0, _effector.createEvent)({
    loc: {
      file: "/src/tabs.ts",
      line: 10,
      column: 22
    },
    name: "changeTab",
    sid: "-z2hzvl"
  }),
      s = (0, _effector.restore)(l, c, {
    loc: {
      file: "/src/tabs.ts",
      line: 11,
      column: 17
    },
    name: "$tab",
    sid: "16xfb8"
  });
  s.watch(i.write), cn(function () {
    ln(function () {
      var n,
          e = I(r);

      try {
        var o = function () {
          var e = n.value,
              r = t[e];
          sn({
            text: r.title,
            data: {
              active: s.map(function (n) {
                return n === e;
              })
            },
            handler: {
              click: l.prepend(function () {
                return e;
              })
            }
          });
        };

        for (e.s(); !(n = e.n()).done;) o();
      } catch (n) {
        e.e(n);
      } finally {
        e.f();
      }
    });
    var n,
        e = I(r);

    try {
      var o = function () {
        var e = n.value,
            r = t[e];
        un({
          visible: s.map(function (n) {
            return n === e;
          }),
          fn: function () {
            r.fn({
              changeTab: l
            });
          }
        });
      };

      for (e.s(); !(n = e.n()).done;) o();
    } catch (n) {
      e.e(n);
    } finally {
      e.f();
    }
  });
}

var Jn = /\[object ([\w\s]+)\]/;

function qn(n) {
  var e = Object.prototype.toString.call(n),
      t = Jn.exec(e);
  return t ? t[1] : "unknown";
}

function Nn(e) {
  var o = (0, _forest.rec)(function (e) {
    var i = e.store,
        a = $((0, _forest.remap)(i, ["value", "parentOpened"]), 2),
        l = a[0],
        p = a[1],
        v = (0, _effector.createEvent)({
      loc: {
        file: "/src/object-view.ts",
        line: 13,
        column: 32
      },
      name: "foldableClicked",
      sid: "-stmnmb"
    }),
        b = (0, _effector.createStore)(!1, {
      loc: {
        file: "/src/object-view.ts",
        line: 14,
        column: 29
      },
      name: "$localOpened",
      sid: "-lmwtnk"
    }).on(v, function (n) {
      return !n;
    }),
        x = (0, _effector.combine)({
      and: [p, b, function (n, e) {
        return !0 === n && e;
      }],
      or: {
        loc: {
          file: "/src/object-view.ts",
          line: 15,
          column: 24
        },
        name: "$opened",
        sid: "6x0687"
      }
    });
    (0, _forest.variant)({
      source: (0, _effector.combine)({
        and: [l, x, function (n, e) {
          return {
            type: qn(n),
            value: n,
            opened: e
          };
        }],
        or: {
          loc: {
            file: "/src/object-view.ts",
            line: 17,
            column: 20
          },
          name: "source",
          sid: "-2jts3p"
        }
      }),
      key: "type",
      cases: {
        String: function (n) {
          var e = n.store;
          return Sn.string({
            text: ['"', (0, _forest.remap)(e, "value"), '"']
          });
        },
        Number: function (n) {
          var e = n.store;
          return Sn.number({
            text: (0, _forest.remap)(e, "value")
          });
        },
        BigInt: function (n) {
          var e = n.store;
          return Sn.number({
            text: [(0, _forest.remap)(e, "value"), "n"],
            attr: {
              title: "BigInt"
            }
          });
        },
        Boolean: function (n) {
          var e = n.store;
          return Sn.boolean({
            text: (0, _forest.remap)(e, "value")
          });
        },
        Null: function () {
          return Sn.keyword({
            text: "null"
          });
        },
        Undefined: function () {
          return Sn.keyword({
            text: "undefined"
          });
        },
        Symbol: function (n) {
          var e = n.store;
          return Sn.symbol({
            text: (0, _forest.remap)(e, "value")
          });
        },
        RegExp: function (n) {
          var e = n.store,
              t = (0, _forest.remap)(e, "value"),
              r = $((0, _forest.remap)(t, ["source", "flags"]), 2),
              o = r[0],
              i = r[1];
          Sn.regexp({
            text: ["/", o, "/", i]
          });
        },
        Function: function (n) {
          var e = n.store,
              t = (0, _forest.remap)(e, "value"),
              r = {
            title: t.map(function (n) {
              return n.toString();
            })
          };
          (0, _forest.h)("span", {
            text: "function",
            attr: r
          }), Sn.keyword({
            text: t.map(function (n) {
              return n.name ? " ".concat(n.name) : "";
            }),
            attr: r
          }), (0, _forest.h)("span", {
            text: "()",
            attr: r
          });
        },
        AsyncFunction: function (n) {
          var e = n.store,
              t = (0, _forest.remap)(e, "value"),
              r = {
            title: t.map(function (n) {
              return n.toString();
            })
          };
          (0, _forest.h)("span", {
            text: "async function",
            attr: r
          }), Sn.keyword({
            text: t.map(function (n) {
              return n.name ? " ".concat(n.name) : "";
            }),
            attr: r
          }), (0, _forest.h)("span", {
            text: "()",
            attr: r
          });
        },
        Window: function (n) {
          var e = n.store,
              t = (0, _forest.remap)(e, "opened");
          (0, _forest.h)("span", function () {
            (0, _forest.spec)({
              data: {
                opened: t
              }
            }), (0, _forest.h)("span", {
              text: "Window {...",
              fn: function () {
                (0, _forest.handler)({
                  passive: !0,
                  stop: !0,
                  capture: !0
                }, {
                  click: v
                });
              }
            }), (0, _forest.spec)({
              text: "}"
            });
          });
        },
        Date: function () {
          Sn.date({
            text: l.map(function (n) {
              var e;
              return null === (e = n.toISOString) || void 0 === e ? void 0 : e.call(n);
            }),
            attr: {
              title: l
            }
          });
        },
        Array: function (n) {
          var e = n.store,
              t = $((0, _forest.remap)(e, ["value", "opened"]), 2),
              i = t[0],
              a = t[1];
          (0, _forest.h)("span", function () {
            (0, _forest.spec)({
              data: {
                opened: a
              }
            }), (0, _forest.h)("span", {
              text: "Array [",
              data: {
                clickable: !0
              },
              fn: function () {
                (0, _forest.handler)({
                  passive: !0,
                  stop: !0,
                  capture: !0,
                  prevent: !0
                }, {
                  click: v
                });
              }
            }), (0, _forest.list)(i, function (n) {
              var e = n.store,
                  t = n.key;
              return bn(function () {
                return o({
                  store: (0, _effector.combine)({
                    and: [{
                      value: e,
                      parentOpened: a,
                      key: t.map(String)
                    }],
                    or: {
                      loc: {
                        file: "/src/object-view.ts",
                        line: 91,
                        column: 35
                      },
                      name: "store",
                      sid: "xbvkm7"
                    }
                  })
                });
              });
            }), (0, _forest.spec)({
              text: "]"
            });
          });
        },
        Arguments: function (n) {
          var e = n.store,
              t = $((0, _forest.remap)(e, ["value", "opened"]), 2),
              i = t[0],
              a = t[1];
          (0, _forest.h)("span", function () {
            (0, _forest.spec)({
              data: {
                opened: a
              }
            }), (0, _forest.h)("span", {
              text: "Arguments [",
              fn: function () {
                (0, _forest.handler)({
                  passive: !0,
                  stop: !0,
                  capture: !0
                }, {
                  click: v
                });
              }
            }), (0, _forest.list)(i.map(function (n) {
              return z(n);
            }), function (n) {
              var e = n.store,
                  t = n.key;
              return bn(function () {
                return o({
                  store: (0, _effector.combine)({
                    and: [{
                      value: e,
                      parentOpened: a,
                      key: t.map(String)
                    }],
                    or: {
                      loc: {
                        file: "/src/object-view.ts",
                        line: 111,
                        column: 35
                      },
                      name: "store",
                      sid: "nufsva"
                    }
                  })
                });
              });
            }), (0, _forest.spec)({
              text: "]"
            });
          });
        },
        Set: function (n) {
          var e = n.store,
              t = $((0, _forest.remap)(e, ["value", "opened"]), 2),
              i = t[0],
              a = t[1];
          (0, _forest.h)("span", function () {
            (0, _forest.spec)({
              data: {
                opened: a
              }
            }), (0, _forest.h)("span", {
              text: "Set [",
              fn: function () {
                (0, _forest.handler)({
                  passive: !0,
                  stop: !0,
                  capture: !0
                }, {
                  click: v
                });
              }
            }), (0, _forest.list)(i.map(function (n) {
              return z(n.values());
            }), function (n) {
              var e = n.store,
                  t = n.key;
              return bn(function () {
                return o({
                  store: (0, _effector.combine)({
                    and: [{
                      value: e,
                      parentOpened: a,
                      key: t.map(String)
                    }],
                    or: {
                      loc: {
                        file: "/src/object-view.ts",
                        line: 131,
                        column: 35
                      },
                      name: "store",
                      sid: "-htvons"
                    }
                  })
                });
              });
            }), (0, _forest.spec)({
              text: "]"
            });
          });
        },
        Map: function (n) {
          var e = n.store,
              t = $((0, _forest.remap)(e, ["value", "opened"]), 2),
              i = t[0],
              a = t[1];
          (0, _forest.h)("span", function () {
            (0, _forest.spec)({
              data: {
                opened: a
              }
            }), (0, _forest.h)("span", function () {
              (0, _forest.spec)({
                text: "Map {"
              }), (0, _forest.handler)({
                passive: !0,
                stop: !0,
                capture: !0
              }, {
                click: v
              });
            }), (0, _forest.list)(i.map(function (n) {
              return z(n.entries());
            }), function (n) {
              var e = n.store,
                  t = $((0, _forest.remap)(e, ["0", "1"]), 2),
                  i = t[0],
                  c = t[1];
              bn(function () {
                Sn.string({
                  text: ['"', i, '"'],
                  fn: function () {
                    (0, _forest.handler)({
                      passive: !0,
                      stop: !0,
                      capture: !0
                    }, {
                      click: v
                    });
                  }
                }), (0, _forest.h)("span", {
                  text: " => "
                }), o({
                  store: (0, _effector.combine)({
                    and: [{
                      value: c,
                      parentOpened: a,
                      key: i
                    }],
                    or: {
                      loc: {
                        file: "/src/object-view.ts",
                        line: 159,
                        column: 43
                      },
                      name: "store",
                      sid: "fb9vmt"
                    }
                  })
                });
              });
            }), (0, _forest.spec)({
              text: "}"
            });
          });
        },
        Error: function (n) {
          var e = n.store,
              t = $((0, _forest.remap)(e, ["value", "opened"]), 2),
              i = t[0],
              a = t[1],
              l = $((0, _forest.remap)(i, ["name", "message"]), 2),
              u = l[0],
              p = l[1],
              b = i.map(function (n) {
            var e;
            return null !== (e = n.stack) && void 0 !== e ? e : null;
          });
          (0, _forest.h)("span", function () {
            (0, _forest.spec)({
              data: {
                opened: a
              }
            }), (0, _forest.h)("span", {
              text: [u, " {"],
              attr: {
                title: i.map(function (n) {
                  return n.constructor.name;
                })
              },
              fn: function () {
                (0, _forest.handler)({
                  passive: !0,
                  stop: !0,
                  capture: !0
                }, {
                  click: v
                });
              }
            }), bn(function () {
              (0, _forest.spec)({
                data: {
                  hidden: "expanded"
                }
              }), Sn.string({
                text: ['"message"'],
                fn: function () {
                  (0, _forest.handler)({
                    passive: !0,
                    stop: !0,
                    capture: !0
                  }, {
                    click: v
                  });
                }
              }), (0, _forest.h)("span", {
                text: ": "
              }), o({
                store: (0, _effector.combine)({
                  and: [{
                    value: p,
                    parentOpened: a,
                    key: "message"
                  }],
                  or: {
                    loc: {
                      file: "/src/object-view.ts",
                      line: 193,
                      column: 39
                    },
                    name: "store",
                    sid: "5h7l4"
                  }
                })
              });
            }), bn(function () {
              (0, _forest.spec)({
                data: {
                  hidden: "folded"
                }
              }), Sn.string({
                text: ['"stack"'],
                fn: function () {
                  (0, _forest.handler)({
                    passive: !0,
                    stop: !0,
                    capture: !0
                  }, {
                    click: v
                  });
                }
              }), (0, _forest.h)("span", {
                text: ": "
              });
              var n = (0, _effector.combine)({
                and: [{
                  value: b,
                  parentOpened: a,
                  key: "stack"
                }],
                or: {
                  loc: {
                    file: "/src/object-view.ts",
                    line: 209,
                    column: 42
                  },
                  name: "store",
                  sid: "-t932g0"
                }
              });
              o({
                store: n
              });
            }), (0, _forest.list)(i.map(function (n) {
              return z(Object.entries(n));
            }), function (n) {
              var e = n.store,
                  t = $((0, _forest.remap)(e, ["0", "1"]), 2),
                  i = t[0],
                  c = t[1];
              bn(function () {
                Sn.string({
                  text: ['"', i, '"'],
                  fn: function () {
                    (0, _forest.handler)({
                      passive: !0,
                      stop: !0,
                      capture: !0
                    }, {
                      click: v
                    });
                  }
                }), (0, _forest.h)("span", {
                  text: ": "
                }), o({
                  store: (0, _effector.combine)({
                    and: [{
                      value: c,
                      parentOpened: a,
                      key: i
                    }],
                    or: {
                      loc: {
                        file: "/src/object-view.ts",
                        line: 227,
                        column: 43
                      },
                      name: "store",
                      sid: "-udqrh"
                    }
                  })
                });
              });
            });
          }), (0, _forest.h)("span", {
            text: "}"
          });
        },
        __: function (n) {
          var e = n.store;
          (0, _forest.h)("span", function () {
            var n = $((0, _forest.remap)(e, ["type", "value", "opened"]), 3),
                t = n[0],
                i = n[1],
                a = n[2];
            (0, _forest.spec)({
              data: {
                opened: a
              }
            }), (0, _forest.h)("span", {
              text: [t, " {"],
              fn: function () {
                (0, _forest.handler)({
                  passive: !0,
                  stop: !0,
                  capture: !0
                }, {
                  click: v
                });
              }
            }), (0, _forest.list)(i.map(function (n) {
              return z(Object.entries(n));
            }), function (n) {
              var e = n.store,
                  t = $((0, _forest.remap)(e, ["0", "1"]), 2),
                  i = t[0],
                  c = t[1];
              bn(function () {
                Sn.string({
                  text: ['"', i, '"'],
                  fn: function () {
                    (0, _forest.handler)({
                      passive: !0,
                      stop: !0,
                      capture: !0
                    }, {
                      click: v
                    });
                  }
                }), (0, _forest.h)("span", {
                  text: ": "
                }), o({
                  store: (0, _effector.combine)({
                    and: [{
                      value: c,
                      parentOpened: a,
                      key: i
                    }],
                    or: {
                      loc: {
                        file: "/src/object-view.ts",
                        line: 260,
                        column: 43
                      },
                      name: "store",
                      sid: "-gh80lu"
                    }
                  })
                });
              });
            });
          }), (0, _forest.h)("span", {
            text: "}"
          });
        }
      }
    });
  }),
      i = e.value,
      a = (0, _effector.combine)({
    and: [{
      value: i,
      parentOpened: (0, _effector.createStore)(!0, {
        loc: {
          file: "/src/object-view.ts",
          line: 277,
          column: 22
        },
        name: "parentOpened",
        sid: "-2w11af"
      }),
      key: ""
    }, function (n) {
      return n;
    }],
    or: {
      loc: {
        file: "/src/object-view.ts",
        line: 275,
        column: 18
      },
      name: "store",
      sid: "kebhe"
    }
  });
  o({
    store: a
  });
}

function Un(n, e) {
  return e.trimDomain ? n.map(function (n) {
    return n.replace("".concat(e.trimDomain, "/"), "");
  }) : n;
}

var Rn,
    Wn,
    Kn = Bn("filter-kinds", ["event", "store"]),
    Xn = Mn("filter-text", "");

function _n(o, i, a) {
  var c = (0, _effector.createEvent)({
    loc: {
      file: "/src/logs.ts",
      line: 11,
      column: 23
    },
    name: "toggleKind",
    sid: "al2efl"
  }),
      l = (0, _effector.createEvent)({
    loc: {
      file: "/src/logs.ts",
      line: 12,
      column: 26
    },
    name: "filterChanged",
    sid: "sbtuox"
  }),
      s = (0, _effector.createEvent)({
    loc: {
      file: "/src/logs.ts",
      line: 13,
      column: 25
    },
    name: "clearClicked",
    sid: "g7uhen"
  }),
      u = (0, _effector.createStore)(Kn.read(), {
    loc: {
      file: "/src/logs.ts",
      line: 14,
      column: 19
    },
    name: "$kinds",
    sid: "th13oa"
  }),
      d = (0, _effector.restore)(l, Xn.read(), {
    loc: {
      file: "/src/logs.ts",
      line: 15,
      column: 24
    },
    name: "$filterText",
    sid: "-aim8j7"
  });
  u.on(c, function (n, e) {
    return n.includes(e) ? n.filter(function (n) {
      return n !== e;
    }) : [].concat(z(n), [e]);
  }).watch(Kn.write), d.watch(Xn.write), o.on(s, function () {
    return [];
  }).on(i, function () {
    return [];
  }), $n(function () {
    (0, _forest.h)("span", {
      text: "Show: "
    }), Pn({
      title: "Event",
      attr: {
        checked: u.map(function (n) {
          return n.includes("event");
        })
      },
      handler: {
        click: c.prepend(function () {
          return "event";
        })
      }
    }), Pn({
      title: "Store",
      attr: {
        checked: u.map(function (n) {
          return n.includes("store");
        })
      },
      handler: {
        click: c.prepend(function () {
          return "store";
        })
      }
    }), Pn({
      title: "Effect",
      attr: {
        checked: u.map(function (n) {
          return n.includes("effect");
        })
      },
      handler: {
        click: c.prepend(function () {
          return "effect";
        })
      }
    }), (0, _forest.h)("span", {
      text: "Filter:"
    }), An({
      attr: {
        value: d
      },
      handler: {
        change: l.prepend(function (n) {
          var e, t;
          return null !== (e = null === (t = n.currentTarget) || void 0 === t ? void 0 : t.value) && void 0 !== e ? e : "";
        })
      }
    }), vn({
      text: "Clear",
      handler: {
        click: s
      },
      attr: {
        title: "Press CTRL+L to clear logs"
      }
    });
  }), fn(function () {
    (0, _forest.list)({
      source: o,
      key: "id",
      fields: ["kind", "name", "payload", "datetime"],
      fn: function (n) {
        var e = $(n.fields, 4),
            t = e[0],
            o = e[1],
            i = e[2],
            c = e[3],
            l = Un(o, a),
            s = (0, _effector.combine)({
          and: [t, u, function (n, e) {
            return e.includes(n);
          }],
          or: {
            loc: {
              file: "/src/logs.ts",
              line: 58,
              column: 37
            },
            name: "$kindMatched",
            sid: "-80l9jl"
          }
        }),
            f = (0, _effector.combine)({
          and: [d, l, function (n, e) {
            return e.includes(n);
          }],
          or: {
            loc: {
              file: "/src/logs.ts",
              line: 59,
              column: 37
            },
            name: "$textMatched",
            sid: "3h5st1"
          }
        }),
            m = (0, _effector.combine)({
          and: [s, f, function (n, e) {
            return n && e;
          }],
          or: {
            loc: {
              file: "/src/logs.ts",
              line: 60,
              column: 33
            },
            name: "$visible",
            sid: "-8m6nr6"
          }
        });
        dn({
          visible: m,
          fn: function () {
            var n = c.map(function (n) {
              return n.toISOString();
            }),
                e = c.map(function (n) {
              return n.toLocaleTimeString();
            });
            mn({
              text: [e, "  "],
              attr: {
                title: n
              }
            }), mn({
              text: t
            }), mn({
              text: [" ", l, " "]
            }), pn(function () {
              return Nn({
                value: i
              });
            });
          }
        });
      }
    });
  });
}

function Hn(n, e) {
  fn(function () {
    var t = n.map(function (n) {
      return Object.entries(n).map(function (n) {
        var e = $(n, 2);
        return w({
          name: e[0]
        }, e[1]);
      });
    });
    (0, _forest.list)({
      source: t,
      key: "name",
      fields: ["name", "value"],
      fn: function (n) {
        var t = $(n.fields, 2),
            r = t[0],
            o = t[1];
        dn(function () {
          mn({
            text: [Un(r, e), ": "]
          }), pn(function () {
            Nn({
              value: o
            });
          });
        });
      }
    });
  });
}

function Vn(n, e) {
  fn(function () {
    var t = n.map(function (n) {
      return Object.entries(n).map(function (n) {
        var e = $(n, 2);
        return w({
          name: e[0]
        }, e[1]);
      });
    });
    (0, _forest.list)({
      source: t,
      key: "name",
      fields: ["name", "history"],
      fn: function (n) {
        var t = $(n.fields, 2),
            r = t[0];
        t[1], dn(function () {
          mn({
            text: [Un(r, e), " "]
          });
        });
      }
    });
  });
}

function Gn(n, e) {
  fn(function () {
    var t = n.map(function (n) {
      return Object.entries(n).map(function (n) {
        var e = $(n, 2);
        return w({
          sid: e[0]
        }, e[1]);
      });
    });
    (0, _forest.list)({
      source: t,
      key: "sid",
      fields: ["name", "inFlight"],
      fn: function (n) {
        var t = $(n.fields, 2),
            r = t[0],
            o = t[1];
        dn(function () {
          mn({
            text: [Un(r, e), " "]
          }), pn(function () {
            (0, _forest.h)("span", function () {
              (0, _forest.h)("span", {
                text: [" {"]
              }), bn(function () {
                Sn.string({
                  text: '"inFlight": '
                }), Sn.number({
                  text: o
                });
              }), (0, _forest.text)(Wn || (Wn = S(["}"])));
            });
          });
        });
      }
    });
  });
}

_foliage.styled.div(Rn || (Rn = S(["\n  display: flex;\n  flex-flow: row nowrap;\n\n  :nth-child(2),\n  :nth-child(3),\n  :nth-child(4),\n  :nth-child(5) {\n    opacity: 0.8;\n  }\n\n  > :nth-child(n + 6) {\n    opacity: 0.5;\n  }\n\n  > :not(:first-child) {\n    margin-left: 0.5rem;\n  }\n"])));

var Qn, Yn, Zn, ne;

function ee(i) {
  var a = i.$files.map(function (n) {
    return Object.keys(n).sort(function (n, e) {
      return n < e ? -1 : n > e ? 1 : 0;
    });
  }),
      c = a.map(function (n) {
    return n.length > 0;
  }),
      l = (0, _effector.createEvent)({
    loc: {
      file: "/src/files.ts",
      line: 17,
      column: 25
    },
    name: "fileSelected",
    sid: "-jqe342"
  }),
      s = (0, _effector.createEvent)({
    loc: {
      file: "/src/files.ts",
      line: 18,
      column: 24
    },
    name: "fileCleanup",
    sid: "hlqci5"
  }),
      u = (0, _effector.createStore)("", {
    loc: {
      file: "/src/files.ts",
      line: 19,
      column: 25
    },
    name: "$currentFile",
    sid: "8hcd8i"
  }),
      d = u.map(function (n) {
    return "" !== n;
  }),
      p = d.map(function (n) {
    return !n;
  });
  u.on(l, function (n, e) {
    return e;
  }).on(s, function () {
    return "";
  }), $n({
    style: {
      flexDirection: "column"
    },
    visible: c,
    fn: function () {
      On({
        visible: d,
        fn: function () {
          vn({
            text: "",
            handler: {
              click: s.prepend(function () {})
            }
          }), (0, _forest.h)("span", {
            text: "File:"
          }), Cn({
            handler: {
              change: l.prepend(function (n) {
                return n.currentTarget.value;
              })
            },
            fn: function () {
              (0, _forest.list)(a, function (n) {
                var e = n.store;
                (0, _forest.h)("option", {
                  attr: {
                    value: e,
                    selected: (0, _effector.combine)({
                      and: [e, u, function (n, e) {
                        return n === e;
                      }],
                      or: {
                        loc: {
                          file: "/src/files.ts",
                          line: 48,
                          column: 50
                        },
                        name: "selected",
                        sid: "6n66ec"
                      }
                    })
                  },
                  text: e
                });
              });
            }
          });
        }
      }), In({
        visible: p,
        fn: function () {
          var t = (0, _effector.createEvent)({
            loc: {
              file: "/src/files.ts",
              line: 60,
              column: 42
            },
            name: "filterChanged",
            sid: "k3tq2y"
          }),
              i = (0, _effector.restore)(t, "", {
            loc: {
              file: "/src/files.ts",
              line: 61,
              column: 36
            },
            name: "$filter",
            sid: "ylqhpg"
          }),
              c = (0, _effector.combine)({
            and: [i, a, function (n, e) {
              return e.filter(function (e) {
                return e.includes(n);
              });
            }],
            or: {
              loc: {
                file: "/src/files.ts",
                line: 62,
                column: 43
              },
              name: "$filteredFiles",
              sid: "-f0p9a1"
            }
          });
          re({
            text: "Please, select file from the list or type the name"
          });
          var s = t.prepend(function (n) {
            var e;
            return null === (e = n.currentTarget) || void 0 === e ? void 0 : e.value;
          });
          In(function () {
            oe({
              attr: {
                value: i,
                placeholder: "Type a part of the file name"
              },
              handler: {
                change: s,
                keydown: s
              }
            }), ie(function () {
              (0, _forest.list)(c, function (e) {
                var t = e.store;
                e.key;
                var r = (0, _effector.createEvent)({
                  loc: {
                    file: "/src/files.ts",
                    line: 75,
                    column: 51
                  },
                  name: "selectFile",
                  sid: "4tb03w"
                });
                (0, _effector.sample)({
                  and: [{
                    source: t,
                    clock: r,
                    target: l
                  }],
                  or: {
                    loc: {
                      file: "/src/files.ts",
                      line: 76,
                      column: 32
                    },
                    sid: "ipctc"
                  }
                }), ae({
                  text: t,
                  attr: {
                    tabIndex: "0"
                  },
                  handler: {
                    click: r
                  }
                });
              });
            });
          });
        }
      });
    }
  }), $n({
    visible: d,
    fn: function () {
      var n = (0, _effector.combine)({
        and: [u, i.$files, i.$events, function (n, e, t) {
          return "" !== n && e[n] ? Object.fromEntries(e[n].filter(function (n) {
            return "event" === n.kind;
          }).map(function (n) {
            var e = n.name;
            return [e, t[e]];
          })) : {};
        }],
        or: {
          loc: {
            file: "/src/files.ts",
            line: 96,
            column: 28
          },
          name: "$events",
          sid: "n8saf2"
        }
      }),
          e = (0, _effector.combine)({
        and: [u, i.$files, i.$stores, function (n, e, t) {
          return "" !== n && e[n] ? Object.fromEntries(e[n].filter(function (n) {
            return "store" === n.kind;
          }).map(function (n) {
            var e = n.name;
            return [e, t[e]];
          })) : {};
        }],
        or: {
          loc: {
            file: "/src/files.ts",
            line: 104,
            column: 28
          },
          name: "$stores",
          sid: "-qtmfjl"
        }
      }),
          t = (0, _effector.combine)({
        and: [u, i.$files, i.$effects, function (n, e, t) {
          return "" !== n && e[n] ? Object.fromEntries(e[n].filter(function (n) {
            return "effect" === n.kind;
          }).map(function (n) {
            var e = n.name;
            return [e, t[e]];
          })) : {};
        }],
        or: {
          loc: {
            file: "/src/files.ts",
            line: 112,
            column: 29
          },
          name: "$effects",
          sid: "n4x7jt"
        }
      });
      In(function () {
        Vn(n, i.options), Hn(e, i.options), Gn(t, i.options);
      });
    }
  });
}

var te,
    re = _foliage.styled.h4(Qn || (Qn = S(["\n  margin-top: 0;\n"]))),
    oe = _foliage.styled.input(Yn || (Yn = S(["\n  display: flex;\n  flex-shrink: 0;\n  padding: 0 0.5rem;\n  border: 1px solid var(--border);\n  border-radius: 0.2rem;\n  margin-bottom: 1rem;\n  font-size: 1rem;\n  line-height: 2rem;\n\n  &:focus {\n    border-color: var(--primary);\n    outline: 0;\n    box-shadow: 0 0 0 2px var(--primary);\n  }\n"]))),
    ie = _foliage.styled.div(Zn || (Zn = S(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  margin: 0 0;\n  padding: 0 0;\n  overflow-x: auto;\n  align-items: stretch;\n\n  list-style-type: none;\n\n  :nth-child(2n) {\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n"]))),
    ae = _foliage.styled.button(ne || (ne = S(["\n  color: var(--text);\n  font-family: 'JetBrains Mono', hasklig, monofur, monospace;\n  font-size: 14px;\n  text-align: left;\n\n  border: var(--primary);\n  padding: 0.2rem 0.4rem;\n\n  cursor: pointer;\n\n  &:hover {\n    background-color: var(--primary-dark);\n  }\n\n  &:focus {\n    outline: none;\n    box-shadow: inset 0 0 0 2px var(--primary-dark);\n  }\n"]))),
    ce = (0, _effector.createStore)(!1, {
  loc: {
    file: "/src/view.ts",
    line: 13,
    column: 19
  },
  name: "$isVisible",
  sid: "ln45bu"
}),
    le = (0, _effector.createEvent)({
  loc: {
    file: "/src/view.ts",
    line: 14,
    column: 22
  },
  name: "togglePressed",
  sid: "-4qpnv9"
}),
    se = (0, _effector.createEvent)({
  loc: {
    file: "/src/view.ts",
    line: 15,
    column: 21
  },
  name: "clearPressed",
  sid: "5582a"
}),
    ue = (0, _effector.createEvent)({
  loc: {
    file: "/src/view.ts",
    line: 16,
    column: 22
  },
  name: "showInspector",
  sid: "-vtxc3v"
});

function fe() {
  var e = (0, _effector.createStore)(!1, {
    loc: {
      file: "/src/view.ts",
      line: 30,
      column: 20
    },
    name: "$inDrag",
    sid: "fz9nj6"
  }),
      r = (0, _effector.createEvent)({
    loc: {
      file: "/src/view.ts",
      line: 31,
      column: 22
    },
    name: "mouseDown",
    sid: "1vwxop"
  }),
      o = (0, _effector.createEvent)({
    loc: {
      file: "/src/view.ts",
      line: 32,
      column: 22
    },
    name: "mouseMove",
    sid: "-z4lzop"
  }),
      i = (0, _effector.createEvent)({
    loc: {
      file: "/src/view.ts",
      line: 33,
      column: 20
    },
    name: "mouseUp",
    sid: "-o7r6ym"
  });
  return e.on(r, function () {
    return !0;
  }).on(i, function () {
    return !1;
  }), (0, _forest.spec)({
    handler: {
      mousedown: r
    }
  }), r.watch(function () {
    document && (document.addEventListener("mousemove", o), document.addEventListener("mouseup", i));
  }), i.watch(function () {
    document.removeEventListener("mousemove", o), document.removeEventListener("mouseup", i);
  }), {
    mouseMove: o,
    mouseDown: r,
    mouseUp: i,
    $inDrag: e
  };
}

function de() {
  var t = (0, _effector.createEvent)({
    loc: {
      file: "/src/view.ts",
      line: 49,
      column: 19
    },
    name: "setRef",
    sid: "-wbz8vw"
  }),
      r = (0, _effector.restore)(t, null, {
    loc: {
      file: "/src/view.ts",
      line: 50,
      column: 17
    },
    name: "$ref",
    sid: "-b10otu"
  });
  return (0, _forest.node)(t), r;
}

function me(n, e, r, i, a) {
  var l = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : {};
  l.visible && ue(), console.info("%c[effector-inspector] %cPress %cCTRL+B %cto open Inspector", "color: gray; font-size: 1rem;", "color: currentColor; font-size: 1rem;", "color: deepskyblue; font-family: monospace; font-size: 1rem;", "color: currentColor; font-size: 1rem;"), on({
    visible: ce,
    fn: function () {
      var s = de(),
          u = Bn("width", 736),
          f = (0, _effector.createStore)(u.read(), {
        loc: {
          file: "/src/view.ts",
          line: 65,
          column: 27
        },
        name: "$width",
        sid: "er5jku"
      });
      (0, _forest.spec)({
        style: {
          width: (0, _forest.val)(te || (te = S(["", "px"])), f)
        }
      }), an({
        text: "",
        fn: function () {
          var n = fe(),
              e = n.mouseMove,
              r = n.mouseDown,
              i = n.mouseUp,
              a = n.$inDrag;
          (0, _forest.spec)({
            data: {
              active: a
            }
          });
          var l = (0, _effector.createStore)(0, {
            loc: {
              file: "/src/view.ts",
              line: 72,
              column: 35
            },
            name: "$shift",
            sid: "-gd3rpb"
          }),
              d = (0, _effector.sample)({
            and: [s, r, function (n, e) {
              return {
                block: n,
                event: e
              };
            }],
            or: {
              loc: {
                file: "/src/view.ts",
                line: 73,
                column: 38
              },
              name: "dragStart",
              sid: "-xj5i6r"
            }
          }),
              m = (0, _effector.sample)({
            and: [s, e, function (n, e) {
              return n.getBoundingClientRect().right - e.clientX;
            }],
            or: {
              loc: {
                file: "/src/view.ts",
                line: 74,
                column: 37
              },
              name: "dragMove",
              sid: "vlftz8"
            }
          }),
              p = (0, _effector.sample)({
            and: [l, m, function (n, e) {
              return e - n;
            }],
            or: {
              loc: {
                file: "/src/view.ts",
                line: 78,
                column: 41
              },
              name: "correctWidth",
              sid: "-561hwi"
            }
          });
          f.on(p, function (n, e) {
            return e;
          }), l.on(d, function (n, e) {
            var t = e.block,
                r = e.event;
            return t ? t.getBoundingClientRect().left - r.clientX : 0;
          }), (0, _effector.sample)({
            and: [f, i, u.save],
            or: {
              loc: {
                file: "/src/view.ts",
                line: 81,
                column: 20
              },
              sid: "pl2go9"
            }
          });
        }
      }), Ln({
        files: {
          title: "Files",
          fn: function () {
            ee({
              $stores: n,
              $events: e,
              $effects: r,
              $files: a,
              options: l
            });
          }
        },
        stores: {
          title: "Stores",
          fn: function () {
            Hn(n, l);
          }
        },
        effects: {
          title: "Effects",
          fn: function () {
            Gn(r, l);
          }
        },
        events: {
          title: "Events",
          fn: function () {
            Vn(e, l);
          }
        },
        logs: {
          title: "Logs",
          fn: function () {
            _n(i, se, l);
          }
        }
      });
    }
  });
}

"object" === ("undefined" == typeof document ? "undefined" : k(document)) && document.addEventListener("keypress", function (n) {
  n.ctrlKey && ("l" !== n.key && 12 !== n.keyCode || se(), "b" !== n.key && 2 !== n.keyCode || le());
}), ce.on(le, function (n) {
  return !n;
}).on(ue, function () {
  return !0;
});
var pe = (0, _effector.createStore)({}, {
  loc: {
    file: "/src/index.ts",
    line: 5,
    column: 15
  },
  name: "$files",
  sid: "-b5fubx"
}),
    ve = (0, _effector.createEvent)({
  loc: {
    file: "/src/index.ts",
    line: 6,
    column: 17
  },
  name: "storeAdd",
  sid: "-w7nr43"
}),
    be = (0, _effector.createEvent)({
  loc: {
    file: "/src/index.ts",
    line: 7,
    column: 21
  },
  name: "storeUpdated",
  sid: "w3u5z1"
}),
    xe = (0, _effector.createStore)({}, {
  loc: {
    file: "/src/index.ts",
    line: 8,
    column: 16
  },
  name: "$stores",
  sid: "ioizqq"
}),
    ye = (0, _effector.createEvent)({
  loc: {
    file: "/src/index.ts",
    line: 9,
    column: 17
  },
  name: "eventAdd",
  sid: "-o9yfun"
}),
    ge = (0, _effector.createEvent)({
  loc: {
    file: "/src/index.ts",
    line: 10,
    column: 23
  },
  name: "eventTriggered",
  sid: "-3vh36s"
}),
    he = (0, _effector.createStore)({}, {
  loc: {
    file: "/src/index.ts",
    line: 11,
    column: 16
  },
  name: "$events",
  sid: "-b7nvrd"
}),
    we = (0, _effector.createEvent)({
  loc: {
    file: "/src/index.ts",
    line: 12,
    column: 18
  },
  name: "effectAdd",
  sid: "fekv6p"
}),
    ke = (0, _effector.createEvent)({
  loc: {
    file: "/src/index.ts",
    line: 13,
    column: 24
  },
  name: "effectTriggered",
  sid: "-w5t4dt"
}),
    je = (0, _effector.createStore)({}, {
  loc: {
    file: "/src/index.ts",
    line: 14,
    column: 17
  },
  name: "$effects",
  sid: "bxdte"
}),
    Oe = (0, _effector.createStore)([], {
  loc: {
    file: "/src/index.ts",
    line: 15,
    column: 14
  },
  name: "$logs",
  sid: "e84fof"
});
xe.on(ve, function (n, e) {
  return w(w({}, n), {}, j({}, e.name, {
    value: e.store.getState(),
    mapped: e.mapped
  }));
}).on(be, function (n, e) {
  var t = e.name,
      r = e.value;
  return n[t] = w(w({}, n[t]), {}, {
    value: r
  }), w({}, n);
}), pe.on(ve, function (n, e) {
  var t = e.name,
      r = e.file;

  if (r) {
    if (n[r]) {
      var o = n[r];
      return w(w({}, n), {}, j({}, r, [].concat(z(o), [{
        kind: "store",
        name: t
      }])));
    }

    return w(w({}, n), {}, j({}, r, [{
      kind: "store",
      name: t
    }]));
  }

  return n;
}), he.on(ye, function (n, e) {
  return w(w({}, n), {}, j({}, e.name, {
    mapped: e.mapped,
    history: []
  }));
}).on(ge, function (n, e) {
  var t = e.name,
      r = e.params;
  return n[t] = w(w({}, n[t]), {}, {
    history: [JSON.parse(JSON.stringify(r))].concat(z(n[t].history))
  }), w({}, n);
}), pe.on(ye, function (n, e) {
  var t = e.name,
      r = e.file;

  if (r) {
    if (n[r]) {
      var o = n[r];
      return w(w({}, n), {}, j({}, r, [].concat(z(o), [{
        kind: "event",
        name: t
      }])));
    }

    return w(w({}, n), {}, j({}, r, [{
      kind: "event",
      name: t
    }]));
  }

  return n;
}), je.on(we, function (n, e) {
  return w(w({}, n), {}, j({}, e.sid, {
    name: e.name,
    effect: e.effect,
    inFlight: e.effect.inFlight.getState()
  }));
}).on(ke, function (n, e) {
  var t = e.sid,
      r = n[t];
  return n[t] = w(w({}, r), {}, {
    inFlight: r.effect.inFlight.getState()
  }), w({}, n);
}), pe.on(we, function (n, e) {
  var t = e.name,
      r = e.file;

  if (r) {
    if (n[r]) {
      var o = n[r];
      return w(w({}, n), {}, j({}, r, [].concat(z(o), [{
        kind: "event",
        name: t
      }])));
    }

    return w(w({}, n), {}, j({}, r, [{
      kind: "event",
      name: t
    }]));
  }

  return n;
});
var Se = 1e3,
    $e = (0, _effector.createEffect)({
  handler: function (n) {
    var e = n.name,
        t = n.kind,
        r = n.payload;
    return {
      id: (++Se).toString(36),
      kind: t,
      name: e,
      payload: r,
      datetime: new Date()
    };
  }
}, {
  loc: {
    file: "/src/index.ts",
    line: 94,
    column: 23
  },
  name: "createRecordFx",
  sid: "o8fkim"
});

function ze() {
  var n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
      e = "object" === ("undefined" == typeof document ? "undefined" : k(document)) && document.createElement("div");
  if (e) return e.classList.add("effector-inspector"), document.body.append(e), (0, _forest.using)(e, function () {
    return me(xe, he, je, Oe, pe, n);
  }), (0, _forest.using)(e, _foliage.StyledRoot), {
    root: e
  };
}

function Ee(n) {
  var e, t;
  return null === (e = n.defaultConfig) || void 0 === e || null === (t = e.loc) || void 0 === t ? void 0 : t.file;
}

function Ae(n) {
  var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
      t = e.name || Ce(n);
  ve({
    store: n,
    name: t,
    mapped: e.mapped || !1,
    file: Ee(n)
  }), (0, _effector.forward)({
    and: {
      from: n.updates.map(function (n) {
        return {
          name: t,
          value: n
        };
      }),
      to: be
    },
    or: {
      loc: {
        file: "/src/index.ts",
        line: 143,
        column: 4
      },
      sid: "-31rizn"
    }
  });
}

function Ie(n) {
  var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
      t = e.name || Ce(n);
  ye({
    event: n,
    name: t,
    mapped: e.mapped || !1,
    file: Ee(n)
  }), (0, _effector.forward)({
    and: {
      from: n.map(function (n) {
        return {
          name: t,
          params: n
        };
      }),
      to: ge
    },
    or: {
      loc: {
        file: "/src/index.ts",
        line: 156,
        column: 4
      },
      sid: "-2j2itd"
    }
  });
}

function Pe(n) {
  var e,
      t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
      r = Ce(n),
      o = t.sid || n.sid || r;
  we({
    effect: n,
    name: r,
    sid: o,
    attached: null !== (e = t.attached) && void 0 !== e && e,
    file: Ee(n)
  }), (0, _effector.forward)({
    and: {
      from: [n, n.finally],
      to: ke.prepend(function () {
        return {
          sid: o
        };
      })
    },
    or: {
      loc: {
        file: "/src/index.ts",
        line: 174,
        column: 4
      },
      sid: "-1m2v7p"
    }
  });
  var i = n.map(function (n) {
    return {
      kind: "effect",
      name: r,
      payload: n
    };
  }),
      c = n.done.map(function (n) {
    return {
      kind: "effect",
      name: r + ".done",
      payload: n
    };
  }),
      l = n.fail.map(function (n) {
    return {
      kind: "effect",
      name: r + ".fail",
      payload: n
    };
  });
  (0, _effector.forward)({
    and: {
      from: [i, c, l],
      to: $e
    },
    or: {
      loc: {
        file: "/src/index.ts",
        line: 193,
        column: 4
      },
      sid: "-ojf0o"
    }
  });
}

function Ce(n) {
  return n.compositeName.path.join("/");
}

(0, _effector.forward)({
  and: {
    from: ge,
    to: $e.prepend(function (n) {
      return {
        kind: "event",
        name: n.name,
        payload: n.params
      };
    })
  },
  or: {
    loc: {
      file: "/src/index.ts",
      line: 105,
      column: 0
    },
    sid: "-4wufh5"
  }
}), (0, _effector.forward)({
  and: {
    from: be,
    to: $e.prepend(function (n) {
      return {
        kind: "store",
        name: n.name,
        payload: n.value
      };
    })
  },
  or: {
    loc: {
      file: "/src/index.ts",
      line: 113,
      column: 0
    },
    sid: "-4gwe9o"
  }
}), Oe.on($e.doneData, function (n, e) {
  return [e].concat(z(n));
});
},{"effector":"../node_modules/effector/effector.mjs","forest":"../node_modules/forest/forest.mjs","foliage":"../node_modules/foliage/dist/index.js"}],"../src/lib.ts":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createName = createName;
exports.getPath = getPath;
exports.watch = watch;
exports.LOGGER_DOMAIN_NAME = void 0;

var _effector = require("effector");

var _effectorFileName = "/src/lib.ts",
    _effectorFileName2 = "/src/lib.ts";
var LOGGER_DOMAIN_NAME = '@effector-logger';
exports.LOGGER_DOMAIN_NAME = LOGGER_DOMAIN_NAME;

function createName(composite) {
  return composite.path.filter(function (name) {
    return name !== LOGGER_DOMAIN_NAME;
  }).join('/');
}

function getPath(unit) {
  var _a, _b, _c;

  return (_c = (_b = (_a = unit.defaultConfig) === null || _a === void 0 ? void 0 : _a.loc) === null || _b === void 0 ? void 0 : _b.file) !== null && _c !== void 0 ? _c : ' ';
}

function watchDomain(unit, domain, fn) {
  if (_effector.is.store(unit, {
    and: {
      loc: {
        file: _effectorFileName,
        line: 11,
        column: 8
      },
      sid: "-6vukfe"
    },
    loc: {
      file: _effectorFileName2,
      line: 11,
      column: 8
    },
    sid: "-6vukfe"
  })) {
    fn(unit.getState());
  }

  var watchUnit = _effector.is.store(unit, {
    and: {
      loc: {
        file: _effectorFileName,
        line: 14,
        column: 22
      },
      name: "watchUnit",
      sid: "-tu8c8a"
    },
    loc: {
      file: _effectorFileName2,
      line: 14,
      column: 22
    },
    name: "watchUnit",
    sid: "-tu8c8a"
  }) ? unit.updates : unit;
  watchUnit.watch(fn);
}

function watchScope(unit, scope, fn) {
  if (_effector.is.store(unit, {
    and: {
      loc: {
        file: _effectorFileName,
        line: 18,
        column: 8
      },
      sid: "-6s009v"
    },
    loc: {
      file: _effectorFileName2,
      line: 18,
      column: 8
    },
    sid: "-6s009v"
  })) {
    fn(scope.getState(unit));
  }

  var node = (0, _effector.createNode)({
    node: [_effector.step.run({
      fn: fn
    })]
  });
  var watchUnit = _effector.is.store(unit, {
    and: {
      loc: {
        file: _effectorFileName,
        line: 24,
        column: 22
      },
      name: "watchUnit",
      sid: "-f5u209"
    },
    loc: {
      file: _effectorFileName2,
      line: 24,
      column: 22
    },
    name: "watchUnit",
    sid: "-f5u209"
  }) ? unit.updates : unit;
  var id = watchUnit.graphite.id;
  var links = scope.additionalLinks[id] = scope.additionalLinks[id] || [];
  links.push(node);
}

function watch(unit, source, fn) {
  if (_effector.is.domain(source, {
    and: {
      loc: {
        file: _effectorFileName,
        line: 31,
        column: 8
      },
      sid: "-5xrbn0"
    },
    loc: {
      file: _effectorFileName2,
      line: 31,
      column: 8
    },
    sid: "-5xrbn0"
  })) {
    watchDomain(unit, source, fn);
  } else {
    watchScope(unit, source, fn);
  }
}
},{"effector":"../node_modules/effector/effector.mjs"}],"../node_modules/just-debounce-it/index.js":[function(require,module,exports) {
module.exports = debounce;

function debounce(fn, wait, callFirst) {
  var timeout = null;
  var debouncedFn = null;

  var clear = function() {
    if (timeout) {
      clearTimeout(timeout);

      debouncedFn = null;
      timeout = null;
    }
  };

  var flush = function() {
    var call = debouncedFn;
    clear();

    if (call) {
      call();
    }
  };

  var debounceWrapper = function() {
    if (!wait) {
      return fn.apply(this, arguments);
    }

    var context = this;
    var args = arguments;
    var callNow = callFirst && !timeout;
    clear();

    debouncedFn = function() {
      fn.apply(context, args);
    };

    timeout = setTimeout(function() {
      timeout = null;

      if (!callNow) {
        var call = debouncedFn;
        debouncedFn = null;

        return call();
      }
    }, wait);

    if (callNow) {
      return debouncedFn();
    }
  };

  debounceWrapper.cancel = clear;
  debounceWrapper.flush = flush;

  return debounceWrapper;
}

},{}],"../node_modules/detect-node/browser.js":[function(require,module,exports) {
module.exports = false;


},{}],"../src/logger.ts":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.storeAdded = storeAdded;
exports.eventAdded = eventAdded;
exports.effectAdded = effectAdded;
exports.storeUpdated = storeUpdated;
exports.eventCalled = eventCalled;
exports.effectCalled = effectCalled;
exports.effectDone = effectDone;
exports.effectFail = effectFail;

var _justDebounceIt = _interopRequireDefault(require("just-debounce-it"));

var _detectNode = _interopRequireDefault(require("detect-node"));

var _lib = require("./lib");

var _effectorFileName = "/src/logger.ts",
    _effectorFileName2 = "/src/logger.ts";

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

var SEPARATOR = _detectNode.default ? ' ' : '';
var storeListToInit = [];
var eventListToInit = [];
var effectListToInit = [];
var styles = {
  block: 'padding-left: 4px; padding-right: 4px; font-weight: normal;',
  chunk: 'padding-left: 4px; padding-right: 4px; font-weight: normal;',
  effector: 'line-height:1.5; color: #000; font-family: "Apple Emoji Font"; font-weight: normal !important;',
  new: 'background-color: #29b6f6; color: #000',
  store: 'background-color: #7e57c2; color: #fff',
  event: 'background-color: #9ccc65; color: #000',
  effect: 'background-color: #26a69a; color: #000',
  emoji: '',
  file: 'color: #9e9e9e; padding-left: 20px;',
  reset: 'color: currentColor; background-color: transparent;'
};
var effectorLabel = [['', '%s', styles.effector], ['effector', '%s', 'font-family: Menlo, monospace;']];

var reset = function reset(index, count, style) {
  return index === count - 1 ? styles.reset : style;
};

function log(blocks, chunks) {
  var group = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;
  var str = [];
  var params = [];
  blocks.unshift.apply(blocks, effectorLabel);
  blocks.forEach(function (_ref, index) {
    var _ref2 = _slicedToArray(_ref, 3),
        value = _ref2[0],
        view = _ref2[1],
        style = _ref2[2];

    str.push("%c".concat(view, "%c"));
    params.push("".concat(styles.block, " ").concat(style), value, reset(index, blocks.length, "".concat(styles.block, " ").concat(style)));
  });
  chunks.forEach(function (_ref3) {
    var _ref4 = _slicedToArray(_ref3, 3),
        value = _ref4[0],
        view = _ref4[1],
        style = _ref4[2];

    str.push("%c".concat(view));
    params.push("".concat(styles.chunk, " ").concat(style), value);
  });
  var args = [str.join(SEPARATOR)].concat(params);

  if (group === 'open') {
    var _console;

    (_console = console).group.apply(_console, _toConsumableArray(args));
  } else if (group === 'collapsed') {
    var _console2;

    (_console2 = console).groupCollapsed.apply(_console2, _toConsumableArray(args));
  } else {
    var _console3;

    (_console3 = console).log.apply(_console3, _toConsumableArray(args));
  }
}

var blockNew = ['new', '%s', styles.new];
var blockStore = ['store', '%s', styles.store];
var blockEvent = ['event', '%s', styles.event];
var blockEffect = ['effect', '%s', styles.effect];

var stripDomain = function stripDomain(name) {
  return name.split('/').pop() || name;
};

var createBlockStore = function createBlockStore(name) {
  return [stripDomain(name), '%s', styles.store];
};

var createBlockEvent = function createBlockEvent(name) {
  return [stripDomain(name), '%s', styles.event];
};

var createBlockEffect = function createBlockEffect(name) {
  return [stripDomain(name), '%s', styles.effect];
};

var logAdded = (0, _justDebounceIt.default)(function () {
  var stores = storeListToInit.splice(0);
  var events = eventListToInit.splice(0);
  var effects = effectListToInit.splice(0);

  if (stores.length + events.length + effects.length > 0) {
    log([blockNew], [['Initialized', '%s', ''], ["events(".concat(events.length, ")"), '%s', ''], ["effects(".concat(effects.length, ")"), '%s', ''], ["stores(".concat(stores.length, ")"), '%s', '']], 'collapsed');

    if (stores.length) {
      stores.forEach(function (store) {
        var name = (0, _lib.createName)(store.compositeName);
        var fileName = (0, _lib.getPath)(store);
        log([blockNew, createBlockStore(name)], [['-> ', '%s', ''], [store.getState(), '%o', ''], [fileName, '%s', styles.file], [name, '%s', '']]);
      });
    }

    if (events.length > 0) {
      events.forEach(function (event) {
        var name = (0, _lib.createName)(event.compositeName);
        var fileName = (0, _lib.getPath)(event);
        log([blockNew, createBlockEvent(name)], [[fileName, '%s', styles.file], [name, '%s', '']]);
      });
    }

    if (effects.length > 0) {
      effects.forEach(function (effect) {
        var name = (0, _lib.createName)(effect.compositeName);
        var fileName = (0, _lib.getPath)(effect);
        log([blockNew, createBlockEffect(name)], [[fileName, '%s', styles.file], [name, '%s', '']]);
      });
    }

    console.groupEnd();
  }
}, 5);

function storeAdded(store) {
  storeListToInit.push(store);
  logAdded();
}

function eventAdded(event) {
  eventListToInit.push(event);
  logAdded();
}

function effectAdded(effect) {
  effectListToInit.push(effect);
  logAdded();
}

function storeUpdated(name, fileName, value) {
  log([createBlockStore(name)], [['-> ', '%s', ''], [value, '%o', ''], [fileName, '%s', styles.file], [name, '%s', styles.file]]);
}

function eventCalled(name, fileName, payload) {
  log([createBlockEvent(name)], [[payload, '%o', 'padding-left: 4px;'], [fileName, '%s', styles.file], [name, '%s', styles.file]]);
}

function effectCalled(name, fileName, parameters) {
  log([createBlockEffect(name)], [[parameters, '%o', 'padding-left: 4px;'], [fileName, '%s', styles.file], [name, '%s', styles.file]]);
}

function effectDone(name, fileName, parameters, result) {
  log([createBlockEffect(name)], [['done ', '%s', styles.emoji], [parameters, '(%o)', 'padding-left: 4px;'], ['-> ', '%s', ''], [result, '%o', 'padding: 0;'], [fileName, '%s', styles.file], [name, '%s', styles.file]]);
}

function effectFail(name, fileName, parameters, error) {
  var instanceofError = error instanceof Error;
  log([createBlockEffect(name)], [['fail ', '%s', styles.emoji], [parameters, '(%o)', 'padding-left: 4px;'], ['-> ', '%s', ''], instanceofError ? [String(error), '%s', ''] : [error, '%o', 'padding: 0;'], [fileName, '%s', styles.file], [name, '%s', styles.file]], instanceofError ? 'collapsed' : undefined);

  if (instanceofError) {
    log([], [[' ', '%s', ''], [error, '%o', 'padding-left: 20px;']]);
  }

  console.groupEnd();
}
},{"just-debounce-it":"../node_modules/just-debounce-it/index.js","detect-node":"../node_modules/detect-node/browser.js","./lib":"../src/lib.ts"}],"../node_modules/isobject/index.js":[function(require,module,exports) {
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
'use strict';

module.exports = function isObject(val) {
  return val != null && typeof val === 'object' && Array.isArray(val) === false;
};
},{}],"../node_modules/is-plain-object/index.js":[function(require,module,exports) {
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
'use strict';

var isObject = require('isobject');

function isObjectObject(o) {
  return isObject(o) === true && Object.prototype.toString.call(o) === '[object Object]';
}

module.exports = function isPlainObject(o) {
  var ctor, prot;
  if (isObjectObject(o) === false) return false; // If has modified constructor

  ctor = o.constructor;
  if (typeof ctor !== 'function') return false; // If has modified prototype

  prot = ctor.prototype;
  if (isObjectObject(prot) === false) return false; // If constructor does not have an Object-specific method

  if (prot.hasOwnProperty('isPrototypeOf') === false) {
    return false;
  } // Most likely a plain Object


  return true;
};
},{"isobject":"../node_modules/isobject/index.js"}],"../node_modules/set-value/index.js":[function(require,module,exports) {
/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */
'use strict';

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function (obj) { return typeof obj; }; } else { _typeof = function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

var isPlain = require('is-plain-object');

function set(target, path, value, options) {
  if (!isObject(target)) {
    return target;
  }

  var opts = options || {};
  var isArray = Array.isArray(path);

  if (!isArray && typeof path !== 'string') {
    return target;
  }

  var merge = opts.merge;

  if (merge && typeof merge !== 'function') {
    merge = Object.assign;
  }

  var keys = (isArray ? path : split(path, opts)).filter(isValidKey);
  var len = keys.length;
  var orig = target;

  if (!options && keys.length === 1) {
    result(target, keys[0], value, merge);
    return target;
  }

  for (var i = 0; i < len; i++) {
    var prop = keys[i];

    if (!isObject(target[prop])) {
      target[prop] = {};
    }

    if (i === len - 1) {
      result(target, prop, value, merge);
      break;
    }

    target = target[prop];
  }

  return orig;
}

function result(target, path, value, merge) {
  if (merge && isPlain(target[path]) && isPlain(value)) {
    target[path] = merge({}, target[path], value);
  } else {
    target[path] = value;
  }
}

function split(path, options) {
  var id = createKey(path, options);
  if (set.memo[id]) return set.memo[id];
  var char = options && options.separator ? options.separator : '.';
  var keys = [];
  var res = [];

  if (options && typeof options.split === 'function') {
    keys = options.split(path);
  } else {
    keys = path.split(char);
  }

  for (var i = 0; i < keys.length; i++) {
    var prop = keys[i];

    while (prop && prop.slice(-1) === '\\' && keys[i + 1]) {
      prop = prop.slice(0, -1) + char + keys[++i];
    }

    res.push(prop);
  }

  set.memo[id] = res;
  return res;
}

function createKey(pattern, options) {
  var id = pattern;

  if (typeof options === 'undefined') {
    return id + '';
  }

  var keys = Object.keys(options);

  for (var i = 0; i < keys.length; i++) {
    var key = keys[i];
    id += ';' + key + '=' + String(options[key]);
  }

  return id;
}

function isValidKey(key) {
  return key !== '__proto__' && key !== 'constructor' && key !== 'prototype';
}

function isObject(val) {
  return val !== null && (_typeof(val) === 'object' || typeof val === 'function');
}

set.memo = {};
module.exports = set;
},{"is-plain-object":"../node_modules/is-plain-object/index.js"}],"../src/redux-devtools.ts":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.eventCalled = eventCalled;
exports.storeAdded = storeAdded;
exports.storeUpdated = storeUpdated;
exports.effectAdded = effectAdded;
exports.effectCalled = effectCalled;
exports.effectDone = effectDone;
exports.effectFail = effectFail;

var _setValue = _interopRequireDefault(require("set-value"));

var _lib = require("./lib");

var _effectorFileName = "/src/redux-devtools.ts",
    _effectorFileName2 = "/src/redux-devtools.ts";

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

/* eslint-disable @typescript-eslint/ban-ts-ignore, @typescript-eslint/no-explicit-any */
var reduxDevTools = // @ts-ignore
typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__;

function instanceId() {
  if ((typeof document === "undefined" ? "undefined" : _typeof(document)) === 'object') {
    return "\u2604\uFE0F ".concat(document.title);
  }

  return ' no title instance';
}

var devToolConfig = {
  instanceId: instanceId()
};
var rootState = {};

function setState(name, value) {
  (0, _setValue.default)(rootState, name.replace(/\//g, '.'), value);
}

function eventCalled(name, payload) {
  if (reduxDevTools) {
    reduxDevTools.send({
      type: "".concat(name, " (event)"),
      payload: payload
    }, rootState, devToolConfig);
  }
}

function storeAdded(store) {
  var name = (0, _lib.createName)(store.compositeName);
  setState(name, store.defaultState);
}

function storeUpdated(name, value) {
  setState(name, value);

  if (reduxDevTools) {
    reduxDevTools.send({
      type: "".concat(name, " (store updated)"),
      value: value
    }, rootState, devToolConfig);
  }
}

function effectUpdateState(name, effect) {
  setState(name, {
    inFlight: effect.inFlight.getState(),
    pending: effect.pending.getState()
  });
}

function effectAdded(name, effect) {
  effectUpdateState(name, effect);
}

function effectCalled(name, effect, parameters) {
  effectUpdateState(name, effect);

  if (reduxDevTools) {
    reduxDevTools.send({
      type: "".concat(name, " (effect called)"),
      params: parameters
    }, rootState, devToolConfig);
  }
}

function effectDone(name, effect, parameters, result) {
  effectUpdateState(name, effect);

  if (reduxDevTools) {
    reduxDevTools.send({
      type: "".concat(name, ".done (effect finished)"),
      params: parameters,
      result: result
    }, rootState, devToolConfig);
  }
}

function effectFail(name, effect, parameters, error) {
  effectUpdateState(name, effect);

  if (reduxDevTools) {
    reduxDevTools.send({
      type: "".concat(name, ".fail (effect finished)"),
      params: parameters,
      error: error
    }, rootState, devToolConfig);
  }
}
},{"set-value":"../node_modules/set-value/index.js","./lib":"../src/lib.ts"}],"../src/attach.ts":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.attachLogger = attachLogger;
Object.defineProperty(exports, "LOGGER_DOMAIN_NAME", {
  enumerable: true,
  get: function () {
    return _lib.LOGGER_DOMAIN_NAME;
  }
});

var _effector = require("effector");

var inspector = _interopRequireWildcard(require("effector-inspector"));

var _lib = require("./lib");

var consoleLogger = _interopRequireWildcard(require("./logger"));

var devtools = _interopRequireWildcard(require("./redux-devtools"));

var _effectorFileName = "/src/attach.ts",
    _effectorFileName2 = "/src/attach.ts";

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var defaults = {
  reduxDevtools: 'enabled',
  console: 'enabled',
  inspector: 'enabled'
};

function attachLogger(source) {
  var logTo = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var options = Object.assign(Object.assign({}, defaults), logTo);
  var isConsole = options.console === 'enabled';
  var isRedux = options.reduxDevtools === 'enabled';
  var isInspector = options.inspector === 'enabled';

  function attachEvent(event) {
    var name = (0, _lib.createName)(event.compositeName);
    var fileName = (0, _lib.getPath)(event);
    if (isConsole) consoleLogger.eventAdded(event);
    if (isInspector) inspector.addEvent(event);
    (0, _lib.watch)(event, source, function (payload) {
      if (isConsole) consoleLogger.eventCalled(name, fileName, payload);
      if (isRedux) devtools.eventCalled(name, payload);
    });
  }

  function attachStore(store) {
    var name = (0, _lib.createName)(store.compositeName);
    var fileName = (0, _lib.getPath)(store);
    if (isConsole) consoleLogger.storeAdded(store);
    if (isRedux) devtools.storeAdded(store);
    if (isInspector) inspector.addStore(store);
    var storeMap = store.map.bind(store);

    store.map = function (fn, firstState) {
      var mappedStore = storeMap(fn, firstState);
      mappedStore.compositeName.path = store.compositeName.path.slice(0, -1);
      mappedStore.compositeName.path.push(store.compositeName.path.slice(-1) + ' -> *');
      if (isInspector) inspector.addStore(mappedStore, {
        mapped: true
      });
      return mappedStore;
    };

    (0, _lib.watch)(store, source, function (value) {
      if (isConsole) consoleLogger.storeUpdated(name, fileName, value);
      if (isRedux) devtools.storeUpdated(name, value);
    });
  }

  function attachEffect(effect) {
    var name = (0, _lib.createName)(effect.compositeName);
    var fileName = (0, _lib.getPath)(effect);
    if (isConsole) consoleLogger.effectAdded(effect);
    if (isRedux) devtools.effectAdded(name, effect);
    if (isInspector) inspector.addEffect(effect);
    (0, _lib.watch)(effect, source, function (parameters) {
      if (isConsole) consoleLogger.effectCalled(name, fileName, parameters);
      if (isRedux) devtools.effectCalled(name, effect, parameters);
    });
    (0, _lib.watch)(effect.done, source, function (_ref) {
      var params = _ref.params,
          result = _ref.result;
      if (isConsole) consoleLogger.effectDone(name, fileName, params, result);
      if (isRedux) devtools.effectDone(name, effect, params, result);
    });
    (0, _lib.watch)(effect.fail, source, function (_ref2) {
      var params = _ref2.params,
          error = _ref2.error;
      if (isConsole) consoleLogger.effectFail(name, fileName, params, error);
      if (isRedux) devtools.effectFail(name, effect, params, error);
    });
  }

  if (_effector.is.domain(source, {
    and: {
      loc: {
        file: _effectorFileName,
        line: 89,
        column: 8
      },
      sid: "4o82wz"
    },
    loc: {
      file: _effectorFileName2,
      line: 89,
      column: 8
    },
    sid: "4o82wz"
  })) {
    source.onCreateEvent(attachEvent);
    source.onCreateStore(attachStore);
    source.onCreateEffect(attachEffect);
  } else {
    var root = source.cloneOf;

    if (root === undefined) {
      throw new Error('Scope should be created from domain');
    }

    var _iterator = _createForOfIteratorHelper(root.history.events),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var event = _step.value;
        attachEvent(event);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    var _iterator2 = _createForOfIteratorHelper(root.history.effects),
        _step2;

    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var effect = _step2.value;
        attachEffect(effect);
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }

    var _iterator3 = _createForOfIteratorHelper(root.history.stores),
        _step3;

    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
        var store = _step3.value;
        attachStore(store);
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }
  }
}
},{"effector":"../node_modules/effector/effector.mjs","effector-inspector":"../node_modules/effector-inspector/dist/common.mjs","./lib":"../src/lib.ts","./logger":"../src/logger.ts","./redux-devtools":"../src/redux-devtools.ts"}],"../src/index.ts":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
var _exportNames = {
  createDomain: true,
  createStore: true,
  createEffect: true,
  createEvent: true
};
exports.createEvent = exports.createEffect = exports.createStore = exports.createDomain = void 0;

var effector = _interopRequireWildcard(require("effector"));

Object.keys(effector).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === effector[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function () {
      return effector[key];
    }
  });
});

var _attach = require("./attach");

var _lib = require("./lib");

var _effectorFileName = "/src/index.ts",
    _effectorFileName2 = "/src/index.ts";

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

var root = effector.createDomain(_lib.LOGGER_DOMAIN_NAME, {
  and: {
    loc: {
      file: _effectorFileName,
      line: 4,
      column: 13
    },
    name: "root",
    sid: "-8cy7h7"
  },
  loc: {
    file: _effectorFileName2,
    line: 4,
    column: 13
  },
  name: "root",
  sid: "-8cy7h7"
});
(0, _attach.attachLogger)(root);
var createDomain = root.createDomain,
    createStore = root.createStore,
    createEffect = root.createEffect,
    createEvent = root.createEvent;
exports.createEvent = createEvent;
exports.createEffect = createEffect;
exports.createStore = createStore;
exports.createDomain = createDomain;
},{"effector":"../node_modules/effector/effector.mjs","./attach":"../src/attach.ts","./lib":"../src/lib.ts"}],"api/session.ts":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.sessionFetch = void 0;

var _src = require("../../src");

var _effectorFileName = "/usage/api/session.ts",
    _effectorFileName2 = "/usage/api/session.ts";
var api = (0, _src.createDomain)({
  loc: {
    file: _effectorFileName2,
    line: 2,
    column: 12
  },
  name: "api",
  sid: "-9g89xo"
});
var sessionFetch = api.createEffect({
  handler: function handler(params) {
    return {
      id: 100000 + params
    };
  }
}, {
  and: {
    loc: {
      file: _effectorFileName,
      line: 3,
      column: 28
    },
    name: "sessionFetch",
    sid: "5ebfug"
  },
  loc: {
    file: _effectorFileName2,
    line: 3,
    column: 28
  },
  name: "sessionFetch",
  sid: "5ebfug"
});
exports.sessionFetch = sessionFetch;
},{"../../src":"../src/index.ts"}],"features/session.ts":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.$session = void 0;

var _src = require("../../src");

var _session = require("../api/session");

var _effectorFileName = "/usage/features/session.ts",
    _effectorFileName2 = "/usage/features/session.ts";
var $session = (0, _src.createStore)(null, {
  loc: {
    file: _effectorFileName2,
    line: 3,
    column: 24
  },
  name: "$session",
  sid: "awg755"
});
exports.$session = $session;
$session.on(_session.sessionFetch.doneData, function (result) {
  return result;
});
},{"../../src":"../src/index.ts","../api/session":"api/session.ts"}],"pages/home.ts":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.pageMounted = void 0;

var _src = require("../../src");

var _session = require("../api/session");

var _effectorFileName = "/usage/pages/home.ts",
    _effectorFileName2 = "/usage/pages/home.ts";
var pageMounted = (0, _src.createEvent)({
  loc: {
    file: _effectorFileName2,
    line: 3,
    column: 27
  },
  name: "pageMounted",
  sid: "jl52eh"
});
exports.pageMounted = pageMounted;
(0, _src.forward)({
  and: {
    from: pageMounted,
    to: _session.sessionFetch
  },
  or: {
    loc: {
      file: _effectorFileName2,
      line: 4,
      column: 0
    },
    sid: "-hmredo"
  }
});
},{"../../src":"../src/index.ts","../api/session":"api/session.ts"}],"../src/inspector.ts":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createInspector = createInspector;

var _effectorInspector = require("effector-inspector");

var _lib = require("./lib");

var _effectorFileName = "/src/inspector.ts",
    _effectorFileName2 = "/src/inspector.ts";
var initialized = false;

function createInspector() {
  if (initialized) return;

  if (typeof window !== 'undefined' && typeof window.document !== 'undefined') {
    (0, _effectorInspector.createInspector)({
      visible: false,
      trimDomain: _lib.LOGGER_DOMAIN_NAME
    });
    initialized = true;
  }
}

createInspector();
},{"effector-inspector":"../node_modules/effector-inspector/dist/common.mjs","./lib":"../src/lib.ts"}],"index.ts":[function(require,module,exports) {
"use strict";

require("./features/session");

var _home = require("./pages/home");

require("../src/inspector");

var _effectorFileName = "/usage/index.ts",
    _effectorFileName2 = "/usage/index.ts";
setTimeout(_home.pageMounted, 300, Math.floor(Math.random() * 1000));
},{"./features/session":"features/session.ts","./pages/home":"pages/home.ts","../src/inspector":"../src/inspector.ts"}],"../node_modules/parcel-bundler/src/builtins/hmr-runtime.js":[function(require,module,exports) {
var global = arguments[3];
var OVERLAY_ID = '__parcel__error__overlay__';
var OldModule = module.bundle.Module;

function Module(moduleName) {
  OldModule.call(this, moduleName);
  this.hot = {
    data: module.bundle.hotData,
    _acceptCallbacks: [],
    _disposeCallbacks: [],
    accept: function (fn) {
      this._acceptCallbacks.push(fn || function () {});
    },
    dispose: function (fn) {
      this._disposeCallbacks.push(fn);
    }
  };
  module.bundle.hotData = null;
}

module.bundle.Module = Module;
var checkedAssets, assetsToAccept;
var parent = module.bundle.parent;

if ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {
  var hostname = "" || location.hostname;
  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';
  var ws = new WebSocket(protocol + '://' + hostname + ':' + "52974" + '/');

  ws.onmessage = function (event) {
    checkedAssets = {};
    assetsToAccept = [];
    var data = JSON.parse(event.data);

    if (data.type === 'update') {
      var handled = false;
      data.assets.forEach(function (asset) {
        if (!asset.isNew) {
          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);

          if (didAccept) {
            handled = true;
          }
        }
      }); // Enable HMR for CSS by default.

      handled = handled || data.assets.every(function (asset) {
        return asset.type === 'css' && asset.generated.js;
      });

      if (handled) {
        console.clear();
        data.assets.forEach(function (asset) {
          hmrApply(global.parcelRequire, asset);
        });
        assetsToAccept.forEach(function (v) {
          hmrAcceptRun(v[0], v[1]);
        });
      } else if (location.reload) {
        // `location` global exists in a web worker context but lacks `.reload()` function.
        location.reload();
      }
    }

    if (data.type === 'reload') {
      ws.close();

      ws.onclose = function () {
        location.reload();
      };
    }

    if (data.type === 'error-resolved') {
      console.log('[parcel]  Error resolved');
      removeErrorOverlay();
    }

    if (data.type === 'error') {
      console.error('[parcel]   ' + data.error.message + '\n' + data.error.stack);
      removeErrorOverlay();
      var overlay = createErrorOverlay(data);
      document.body.appendChild(overlay);
    }
  };
}

function removeErrorOverlay() {
  var overlay = document.getElementById(OVERLAY_ID);

  if (overlay) {
    overlay.remove();
  }
}

function createErrorOverlay(data) {
  var overlay = document.createElement('div');
  overlay.id = OVERLAY_ID; // html encode message and stack trace

  var message = document.createElement('div');
  var stackTrace = document.createElement('pre');
  message.innerText = data.error.message;
  stackTrace.innerText = data.error.stack;
  overlay.innerHTML = '<div style="background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;">' + '<span style="background: red; padding: 2px 4px; border-radius: 2px;">ERROR</span>' + '<span style="top: 2px; margin-left: 5px; position: relative;"></span>' + '<div style="font-size: 18px; font-weight: bold; margin-top: 20px;">' + message.innerHTML + '</div>' + '<pre>' + stackTrace.innerHTML + '</pre>' + '</div>';
  return overlay;
}

function getParents(bundle, id) {
  var modules = bundle.modules;

  if (!modules) {
    return [];
  }

  var parents = [];
  var k, d, dep;

  for (k in modules) {
    for (d in modules[k][1]) {
      dep = modules[k][1][d];

      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {
        parents.push(k);
      }
    }
  }

  if (bundle.parent) {
    parents = parents.concat(getParents(bundle.parent, id));
  }

  return parents;
}

function hmrApply(bundle, asset) {
  var modules = bundle.modules;

  if (!modules) {
    return;
  }

  if (modules[asset.id] || !bundle.parent) {
    var fn = new Function('require', 'module', 'exports', asset.generated.js);
    asset.isNew = !modules[asset.id];
    modules[asset.id] = [fn, asset.deps];
  } else if (bundle.parent) {
    hmrApply(bundle.parent, asset);
  }
}

function hmrAcceptCheck(bundle, id) {
  var modules = bundle.modules;

  if (!modules) {
    return;
  }

  if (!modules[id] && bundle.parent) {
    return hmrAcceptCheck(bundle.parent, id);
  }

  if (checkedAssets[id]) {
    return;
  }

  checkedAssets[id] = true;
  var cached = bundle.cache[id];
  assetsToAccept.push([bundle, id]);

  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {
    return true;
  }

  return getParents(global.parcelRequire, id).some(function (id) {
    return hmrAcceptCheck(global.parcelRequire, id);
  });
}

function hmrAcceptRun(bundle, id) {
  var cached = bundle.cache[id];
  bundle.hotData = {};

  if (cached) {
    cached.hot.data = bundle.hotData;
  }

  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {
    cached.hot._disposeCallbacks.forEach(function (cb) {
      cb(bundle.hotData);
    });
  }

  delete bundle.cache[id];
  bundle(id);
  cached = bundle.cache[id];

  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {
    cached.hot._acceptCallbacks.forEach(function (cb) {
      cb();
    });

    return true;
  }
}
},{}]},{},["../node_modules/parcel-bundler/src/builtins/hmr-runtime.js","index.ts"], null)
//# sourceMappingURL=/usage.77de5100.js.map
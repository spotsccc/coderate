"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("effector"),t=require("effector-inspector"),o=require("just-debounce-it"),n=require("detect-node"),c=require("set-value");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var i=r(e),a=r(t),f=s(o),l=s(n),d=s(c);function p(e){return e.path.filter((e=>"@effector-logger"!==e)).join("/")}function u(e){var t,o,n;return null!==(n=null===(o=null===(t=e.defaultConfig)||void 0===t?void 0:t.loc)||void 0===o?void 0:o.file)&&void 0!==n?n:" "}function g(t,o,n){e.is.domain(o)?function(t,o,n){e.is.store(t)&&n(t.getState()),(e.is.store(t)?t.updates:t).watch(n)}(t,0,n):function(t,o,n){e.is.store(t)&&n(o.getState(t));const c=e.createNode({node:[e.step.run({fn:n})]}),s=(e.is.store(t)?t.updates:t).graphite.id;(o.additionalLinks[s]=o.additionalLinks[s]||[]).push(c)}(t,o,n)}const h=l.default?"  ":"",m=[],b=[],v=[],E="padding-left: 4px; padding-right: 4px; font-weight: normal;",y="padding-left: 4px; padding-right: 4px; font-weight: normal;",x="background-color: #7e57c2; color: #fff",$="background-color: #9ccc65; color: #000",j="background-color: #26a69a; color: #000",O="",S="color: #9e9e9e; padding-left: 20px;",N="color: currentColor; background-color: transparent;",w=[["☄️","%s",'line-height:1.5; color: #000; font-family: "Apple Emoji Font"; font-weight: normal !important;'],["effector","%s","font-family: Menlo, monospace;"]];function _(e,t,o){const n=[],c=[];e.unshift(...w),e.forEach((([t,o,s],r)=>{n.push(`%c${o}%c`),c.push(`${E} ${s}`,t,((e,t,o)=>e===t-1?N:o)(r,e.length,`${E} ${s}`))})),t.forEach((([e,t,o])=>{n.push(`%c${t}`),c.push(`${y} ${o}`,e)}));const s=[n.join(h),...c];"open"===o?console.group(...s):"collapsed"===o?console.groupCollapsed(...s):console.log(...s)}const k=["new","%s","background-color: #29b6f6; color: #000"],D=e=>e.split("/").pop()||e,C=e=>[D(e),"%s",x],q=e=>[D(e),"%s",$],P=e=>[D(e),"%s",j],F=f.default((()=>{const e=m.splice(0),t=b.splice(0),o=v.splice(0);e.length+t.length+o.length>0&&(_([k],[["Initialized","%s",""],[`events(${t.length})`,"%s",""],[`effects(${o.length})`,"%s",""],[`stores(${e.length})`,"%s",""]],"collapsed"),e.length&&e.forEach((e=>{const t=p(e.compositeName),o=u(e);_([k,C(t)],[["-> ","%s",""],[e.getState(),"%o",""],[o,"%s",S],[t,"%s",""]])})),t.length>0&&t.forEach((e=>{const t=p(e.compositeName),o=u(e);_([k,q(t)],[[o,"%s",S],[t,"%s",""]])})),o.length>0&&o.forEach((e=>{const t=p(e.compositeName),o=u(e);_([k,P(t)],[[o,"%s",S],[t,"%s",""]])})),console.groupEnd())}),5);const I="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;const L={instanceId:"object"==typeof document?`☄️ ${document.title}`:"☄️ no title instance"},M={};function z(e,t){d.default(M,e.replace(/\//g,"."),t)}function T(e,t){z(e,{inFlight:t.inFlight.getState(),pending:t.pending.getState()})}const X={reduxDevtools:"enabled",console:"enabled",inspector:"enabled"};const A=i.createDomain("@effector-logger");!function(t,o={}){const n=Object.assign(Object.assign({},X),o),c="enabled"===n.console,s="enabled"===n.reduxDevtools,r="enabled"===n.inspector;function i(e){const o=p(e.compositeName),n=u(e);c&&function(e){b.push(e),F()}(e),r&&a.addEvent(e),g(e,t,(e=>{c&&function(e,t,o){_([q(e)],[[o,"%o","padding-left: 4px;"],[t,"%s",S],[e,"%s",S]])}(o,n,e),s&&function(e,t){I&&I.send({type:`${e} (event)`,payload:t},M,L)}(o,e)}))}function f(e){const o=p(e.compositeName),n=u(e);c&&function(e){m.push(e),F()}(e),s&&function(e){z(p(e.compositeName),e.defaultState)}(e),r&&a.addStore(e);const i=e.map.bind(e);e.map=(t,o)=>{const n=i(t,o);return n.compositeName.path=e.compositeName.path.slice(0,-1),n.compositeName.path.push(e.compositeName.path.slice(-1)+" -> *"),r&&a.addStore(n,{mapped:!0}),n},g(e,t,(e=>{c&&function(e,t,o){_([C(e)],[["-> ","%s",""],[o,"%o",""],[t,"%s",S],[e,"%s",S]])}(o,n,e),s&&function(e,t){z(e,t),I&&I.send({type:`${e} (store updated)`,value:t},M,L)}(o,e)}))}function l(e){const o=p(e.compositeName),n=u(e);c&&function(e){v.push(e),F()}(e),s&&function(e,t){T(e,t)}(o,e),r&&a.addEffect(e),g(e,t,(t=>{c&&function(e,t,o){_([P(e)],[[o,"%o","padding-left: 4px;"],[t,"%s",S],[e,"%s",S]])}(o,n,t),s&&function(e,t,o){T(e,t),I&&I.send({type:`${e} (effect called)`,params:o},M,L)}(o,e,t)})),g(e.done,t,(({params:t,result:r})=>{c&&function(e,t,o,n){_([P(e)],[["done ✅","%s",O],[o,"(%o)","padding-left: 4px;"],["-> ","%s",""],[n,"%o","padding: 0;"],[t,"%s",S],[e,"%s",S]])}(o,n,t,r),s&&function(e,t,o,n){T(e,t),I&&I.send({type:`${e}.done (effect finished)`,params:o,result:n},M,L)}(o,e,t,r)})),g(e.fail,t,(({params:t,error:r})=>{c&&function(e,t,o,n){const c=n instanceof Error;_([P(e)],[["fail ❌","%s",O],[o,"(%o)","padding-left: 4px;"],["-> ","%s",""],c?[String(n),"%s",""]:[n,"%o","padding: 0;"],[t,"%s",S],[e,"%s",S]],c?"collapsed":void 0),c&&_([],[[" ","%s",""],[n,"%o","padding-left: 20px;"]]),console.groupEnd()}(o,n,t,r),s&&function(e,t,o,n){T(e,t),I&&I.send({type:`${e}.fail (effect finished)`,params:o,error:n},M,L)}(o,e,t,r)}))}if(e.is.domain(t))t.onCreateEvent(i),t.onCreateStore(f),t.onCreateEffect(l);else{const e=t.cloneOf;if(void 0===e)throw new Error("Scope should be created from domain");for(const t of e.history.events)i(t);for(const t of e.history.effects)l(t);for(const t of e.history.stores)f(t)}}(A);const{createDomain:R,createStore:U,createEffect:V,createEvent:B}=A;exports.createDomain=R,exports.createEffect=V,exports.createEvent=B,exports.createStore=U,Object.keys(e).forEach((function(t){"default"===t||exports.hasOwnProperty(t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}})}));
//# sourceMappingURL=index.js.map

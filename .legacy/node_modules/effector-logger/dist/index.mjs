import*as o from"effector";import{is as e,createNode as t,step as n}from"effector";export*from"effector";import*as s from"effector-inspector";import c from"just-debounce-it";import i from"detect-node";import a from"set-value";function r(o){return o.path.filter((o=>"@effector-logger"!==o)).join("/")}function f(o){var e,t,n;return null!==(n=null===(t=null===(e=o.defaultConfig)||void 0===e?void 0:e.loc)||void 0===t?void 0:t.file)&&void 0!==n?n:" "}function l(o,s,c){e.domain(s)?function(o,t,n){e.store(o)&&n(o.getState()),(e.store(o)?o.updates:o).watch(n)}(o,0,c):function(o,s,c){e.store(o)&&c(s.getState(o));const i=t({node:[n.run({fn:c})]}),a=(e.store(o)?o.updates:o).graphite.id;(s.additionalLinks[a]=s.additionalLinks[a]||[]).push(i)}(o,s,c)}const p=i?"  ":"",d=[],u=[],m=[],g="padding-left: 4px; padding-right: 4px; font-weight: normal;",h="padding-left: 4px; padding-right: 4px; font-weight: normal;",E="background-color: #7e57c2; color: #fff",b="background-color: #9ccc65; color: #000",v="background-color: #26a69a; color: #000",$="",x="color: #9e9e9e; padding-left: 20px;",S="color: currentColor; background-color: transparent;",y=[["☄️","%s",'line-height:1.5; color: #000; font-family: "Apple Emoji Font"; font-weight: normal !important;'],["effector","%s","font-family: Menlo, monospace;"]];function N(o,e,t){const n=[],s=[];o.unshift(...y),o.forEach((([e,t,c],i)=>{n.push(`%c${t}%c`),s.push(`${g} ${c}`,e,((o,e,t)=>o===e-1?S:t)(i,o.length,`${g} ${c}`))})),e.forEach((([o,e,t])=>{n.push(`%c${e}`),s.push(`${h} ${t}`,o)}));const c=[n.join(p),...s];"open"===t?console.group(...c):"collapsed"===t?console.groupCollapsed(...c):console.log(...c)}const w=["new","%s","background-color: #29b6f6; color: #000"],j=o=>o.split("/").pop()||o,k=o=>[j(o),"%s",E],C=o=>[j(o),"%s",b],D=o=>[j(o),"%s",v],O=c((()=>{const o=d.splice(0),e=u.splice(0),t=m.splice(0);o.length+e.length+t.length>0&&(N([w],[["Initialized","%s",""],[`events(${e.length})`,"%s",""],[`effects(${t.length})`,"%s",""],[`stores(${o.length})`,"%s",""]],"collapsed"),o.length&&o.forEach((o=>{const e=r(o.compositeName),t=f(o);N([w,k(e)],[["-> ","%s",""],[o.getState(),"%o",""],[t,"%s",x],[e,"%s",""]])})),e.length>0&&e.forEach((o=>{const e=r(o.compositeName),t=f(o);N([w,C(e)],[[t,"%s",x],[e,"%s",""]])})),t.length>0&&t.forEach((o=>{const e=r(o.compositeName),t=f(o);N([w,D(e)],[[t,"%s",x],[e,"%s",""]])})),console.groupEnd())}),5);const _="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;const F={instanceId:"object"==typeof document?`☄️ ${document.title}`:"☄️ no title instance"},I={};function L(o,e){a(I,o.replace(/\//g,"."),e)}function T(o,e){L(o,{inFlight:e.inFlight.getState(),pending:e.pending.getState()})}const X={reduxDevtools:"enabled",console:"enabled",inspector:"enabled"};const z=o.createDomain("@effector-logger");!function(o,t={}){const n=Object.assign(Object.assign({},X),t),c="enabled"===n.console,i="enabled"===n.reduxDevtools,a="enabled"===n.inspector;function p(e){const t=r(e.compositeName),n=f(e);c&&function(o){u.push(o),O()}(e),a&&s.addEvent(e),l(e,o,(o=>{c&&function(o,e,t){N([C(o)],[[t,"%o","padding-left: 4px;"],[e,"%s",x],[o,"%s",x]])}(t,n,o),i&&function(o,e){_&&_.send({type:`${o} (event)`,payload:e},I,F)}(t,o)}))}function g(e){const t=r(e.compositeName),n=f(e);c&&function(o){d.push(o),O()}(e),i&&function(o){L(r(o.compositeName),o.defaultState)}(e),a&&s.addStore(e);const p=e.map.bind(e);e.map=(o,t)=>{const n=p(o,t);return n.compositeName.path=e.compositeName.path.slice(0,-1),n.compositeName.path.push(e.compositeName.path.slice(-1)+" -> *"),a&&s.addStore(n,{mapped:!0}),n},l(e,o,(o=>{c&&function(o,e,t){N([k(o)],[["-> ","%s",""],[t,"%o",""],[e,"%s",x],[o,"%s",x]])}(t,n,o),i&&function(o,e){L(o,e),_&&_.send({type:`${o} (store updated)`,value:e},I,F)}(t,o)}))}function h(e){const t=r(e.compositeName),n=f(e);c&&function(o){m.push(o),O()}(e),i&&function(o,e){T(o,e)}(t,e),a&&s.addEffect(e),l(e,o,(o=>{c&&function(o,e,t){N([D(o)],[[t,"%o","padding-left: 4px;"],[e,"%s",x],[o,"%s",x]])}(t,n,o),i&&function(o,e,t){T(o,e),_&&_.send({type:`${o} (effect called)`,params:t},I,F)}(t,e,o)})),l(e.done,o,(({params:o,result:s})=>{c&&function(o,e,t,n){N([D(o)],[["done ✅","%s",$],[t,"(%o)","padding-left: 4px;"],["-> ","%s",""],[n,"%o","padding: 0;"],[e,"%s",x],[o,"%s",x]])}(t,n,o,s),i&&function(o,e,t,n){T(o,e),_&&_.send({type:`${o}.done (effect finished)`,params:t,result:n},I,F)}(t,e,o,s)})),l(e.fail,o,(({params:o,error:s})=>{c&&function(o,e,t,n){const s=n instanceof Error;N([D(o)],[["fail ❌","%s",$],[t,"(%o)","padding-left: 4px;"],["-> ","%s",""],s?[String(n),"%s",""]:[n,"%o","padding: 0;"],[e,"%s",x],[o,"%s",x]],s?"collapsed":void 0),s&&N([],[[" ","%s",""],[n,"%o","padding-left: 20px;"]]),console.groupEnd()}(t,n,o,s),i&&function(o,e,t,n){T(o,e),_&&_.send({type:`${o}.fail (effect finished)`,params:t,error:n},I,F)}(t,e,o,s)}))}if(e.domain(o))o.onCreateEvent(p),o.onCreateStore(g),o.onCreateEffect(h);else{const e=o.cloneOf;if(void 0===e)throw new Error("Scope should be created from domain");for(const o of e.history.events)p(o);for(const o of e.history.effects)h(o);for(const o of e.history.stores)g(o)}}(z);const{createDomain:A,createStore:M,createEffect:R,createEvent:U}=z;export{A as createDomain,R as createEffect,U as createEvent,M as createStore};
//# sourceMappingURL=index.mjs.map

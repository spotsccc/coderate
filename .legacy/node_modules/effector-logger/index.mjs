import*as o from"effector/effector.mjs";import{is as e,createNode as t,step as n}from"effector/effector.mjs";export*from"effector/effector.mjs";import*as c from"effector-inspector/index.mjs";import s from"just-debounce-it";import i from"detect-node";import r from"set-value";function l(o){return o.path.filter((o=>"@effector-logger"!==o)).join("/")}function a(o){var e,t,n;return null!==(n=null===(t=null===(e=o.defaultConfig)||void 0===e?void 0:e.loc)||void 0===t?void 0:t.file)&&void 0!==n?n:" "}function f(o,c,s){e.domain(c,{loc:{file:"/src/lib.ts",line:31,column:8},sid:"-5xrbn0"})?function(o,t,n){e.store(o,{loc:{file:"/src/lib.ts",line:11,column:8},sid:"-6vukfe"})&&n(o.getState()),(e.store(o,{loc:{file:"/src/lib.ts",line:14,column:22},name:"watchUnit",sid:"-tu8c8a"})?o.updates:o).watch(n)}(o,0,s):function(o,c,s){e.store(o,{loc:{file:"/src/lib.ts",line:18,column:8},sid:"-6s009v"})&&s(c.getState(o));const i=t({node:[n.run({fn:s})]}),r=(e.store(o,{loc:{file:"/src/lib.ts",line:24,column:22},name:"watchUnit",sid:"-f5u209"})?o.updates:o).graphite.id;(c.additionalLinks[r]=c.additionalLinks[r]||[]).push(i)}(o,c,s)}const d=i?"  ":"",p=[],u=[],m=[],g="padding-left: 4px; padding-right: 4px; font-weight: normal;",h="padding-left: 4px; padding-right: 4px; font-weight: normal;",b="background-color: #7e57c2; color: #fff",v="background-color: #9ccc65; color: #000",E="background-color: #26a69a; color: #000",x="",$="color: #9e9e9e; padding-left: 20px;",w="color: currentColor; background-color: transparent;",y=[["☄️","%s",'line-height:1.5; color: #000; font-family: "Apple Emoji Font"; font-weight: normal !important;'],["effector","%s","font-family: Menlo, monospace;"]];function S(o,e,t){const n=[],c=[];o.unshift(...y),o.forEach((([e,t,s],i)=>{n.push(`%c${t}%c`),c.push(`${g} ${s}`,e,((o,e,t)=>o===e-1?w:t)(i,o.length,`${g} ${s}`))})),e.forEach((([o,e,t])=>{n.push(`%c${e}`),c.push(`${h} ${t}`,o)}));const s=[n.join(d),...c];"open"===t?console.group(...s):"collapsed"===t?console.groupCollapsed(...s):console.log(...s)}const N=["new","%s","background-color: #29b6f6; color: #000"],j=o=>o.split("/").pop()||o,k=o=>[j(o),"%s",b],C=o=>[j(o),"%s",v],D=o=>[j(o),"%s",E],O=s((()=>{const o=p.splice(0),e=u.splice(0),t=m.splice(0);o.length+e.length+t.length>0&&(S([N],[["Initialized","%s",""],[`events(${e.length})`,"%s",""],[`effects(${t.length})`,"%s",""],[`stores(${o.length})`,"%s",""]],"collapsed"),o.length&&o.forEach((o=>{const e=l(o.compositeName),t=a(o);S([N,k(e)],[["-> ","%s",""],[o.getState(),"%o",""],[t,"%s",$],[e,"%s",""]])})),e.length>0&&e.forEach((o=>{const e=l(o.compositeName),t=a(o);S([N,C(e)],[[t,"%s",$],[e,"%s",""]])})),t.length>0&&t.forEach((o=>{const e=l(o.compositeName),t=a(o);S([N,D(e)],[[t,"%s",$],[e,"%s",""]])})),console.groupEnd())}),5);const _="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;const F={instanceId:"object"==typeof document?`☄️ ${document.title}`:"☄️ no title instance"},I={};function L(o,e){r(I,o.replace(/\//g,"."),e)}function U(o,e){L(o,{inFlight:e.inFlight.getState(),pending:e.pending.getState()})}const z={reduxDevtools:"enabled",console:"enabled",inspector:"enabled"};const T=o.createDomain("@effector-logger",{loc:{file:"/src/index.ts",line:4,column:13},name:"root",sid:"-8cy7h7"});!function(o,t={}){const n=Object.assign(Object.assign({},z),t),s="enabled"===n.console,i="enabled"===n.reduxDevtools,r="enabled"===n.inspector;function d(e){const t=l(e.compositeName),n=a(e);s&&function(o){u.push(o),O()}(e),r&&c.addEvent(e),f(e,o,(o=>{s&&function(o,e,t){S([C(o)],[[t,"%o","padding-left: 4px;"],[e,"%s",$],[o,"%s",$]])}(t,n,o),i&&function(o,e){_&&_.send({type:`${o} (event)`,payload:e},I,F)}(t,o)}))}function g(e){const t=l(e.compositeName),n=a(e);s&&function(o){p.push(o),O()}(e),i&&function(o){L(l(o.compositeName),o.defaultState)}(e),r&&c.addStore(e);const d=e.map.bind(e);e.map=(o,t)=>{const n=d(o,t);return n.compositeName.path=e.compositeName.path.slice(0,-1),n.compositeName.path.push(e.compositeName.path.slice(-1)+" -> *"),r&&c.addStore(n,{mapped:!0}),n},f(e,o,(o=>{s&&function(o,e,t){S([k(o)],[["-> ","%s",""],[t,"%o",""],[e,"%s",$],[o,"%s",$]])}(t,n,o),i&&function(o,e){L(o,e),_&&_.send({type:`${o} (store updated)`,value:e},I,F)}(t,o)}))}function h(e){const t=l(e.compositeName),n=a(e);s&&function(o){m.push(o),O()}(e),i&&function(o,e){U(o,e)}(t,e),r&&c.addEffect(e),f(e,o,(o=>{s&&function(o,e,t){S([D(o)],[[t,"%o","padding-left: 4px;"],[e,"%s",$],[o,"%s",$]])}(t,n,o),i&&function(o,e,t){U(o,e),_&&_.send({type:`${o} (effect called)`,params:t},I,F)}(t,e,o)})),f(e.done,o,(({params:o,result:c})=>{s&&function(o,e,t,n){S([D(o)],[["done ✅","%s",x],[t,"(%o)","padding-left: 4px;"],["-> ","%s",""],[n,"%o","padding: 0;"],[e,"%s",$],[o,"%s",$]])}(t,n,o,c),i&&function(o,e,t,n){U(o,e),_&&_.send({type:`${o}.done (effect finished)`,params:t,result:n},I,F)}(t,e,o,c)})),f(e.fail,o,(({params:o,error:c})=>{s&&function(o,e,t,n){const c=n instanceof Error;S([D(o)],[["fail ❌","%s",x],[t,"(%o)","padding-left: 4px;"],["-> ","%s",""],c?[String(n),"%s",""]:[n,"%o","padding: 0;"],[e,"%s",$],[o,"%s",$]],c?"collapsed":void 0),c&&S([],[[" ","%s",""],[n,"%o","padding-left: 20px;"]]),console.groupEnd()}(t,n,o,c),i&&function(o,e,t,n){U(o,e),_&&_.send({type:`${o}.fail (effect finished)`,params:t,error:n},I,F)}(t,e,o,c)}))}if(e.domain(o,{loc:{file:"/src/attach.ts",line:89,column:8},sid:"4o82wz"}))o.onCreateEvent(d),o.onCreateStore(g),o.onCreateEffect(h);else{const e=o.cloneOf;if(void 0===e)throw new Error("Scope should be created from domain");for(const o of e.history.events)d(o);for(const o of e.history.effects)h(o);for(const o of e.history.stores)g(o)}}(T);const{createDomain:X,createStore:A,createEffect:M,createEvent:R}=T;export{X as createDomain,M as createEffect,R as createEvent,A as createStore};
//# sourceMappingURL=index.mjs.map

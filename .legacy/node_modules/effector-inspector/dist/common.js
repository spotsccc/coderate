"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=require("effector"),e=require("forest"),t=require("foliage");function r(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function o(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?r(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function i(n){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c(n,e){if(null==n)return{};var t,r,o=function(n,e){if(null==n)return{};var t,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}function l(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function s(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,c=!1;try{for(t=t.call(n);!(a=(r=t.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(n){c=!0,o=n}finally{try{a||null==t.return||t.return()}finally{if(c)throw o}}return i}(n,e)||f(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(n){return function(n){if(Array.isArray(n))return d(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||f(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(n,e){if(n){if("string"==typeof n)return d(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(n,e):void 0}}function d(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function m(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=f(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return a=n.done,n},e:function(n){c=!0,i=n},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}var p,v,b,y,h,x,g,w,k,S,j,O,E,$,z,A,I,P,C,D,F,M,T,q,B,L,J=["title"],N=t.styled.div(p||(p=l(["\n  --primary: #ff8c00;\n  --primary-light: #ffb152;\n  --primary-dark: #c86e00;\n  --primary-text: #fff;\n\n  --text: #404040;\n  --border: #dadada;\n  --shadow: 0 4px 20px 4px rgba(0, 0, 0, 0.1);\n\n  --scrollbar: var(--primary-light);\n\n  --tabs-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);\n\n  --tab-bg: #fff;\n  --tab-text: #606060;\n  --tab-text-active: var(--primary);\n  --tab-shadow-active: var(--primary);\n\n  --content-bg: #f9f9f9;\n\n  --code-var: #ff8c00;\n  --code-func: #249ec6;\n  --code-string: #00a153;\n  --code-bool: #ff62d3;\n  --code-number: #7a70f3;\n  --code-date: #333;\n  --code-regexp: #95b70e;\n\n  @media (prefers-color-scheme: dark) {\n    --text: #ddd;\n    --border: #111;\n    --shadow: 0 4px 20px 4px rgba(0, 0, 0, 0.1);\n\n    --scrollbar: var(--primary);\n\n    --tabs-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n\n    --tab-bg: #444;\n    --tab-text: #ddd;\n    --tab-text-active: var(--primary);\n    --tab-shadow-active: var(--primary);\n\n    --content-bg: #333;\n\n    --code-var: #ff8c00;\n    --code-func: #a5d4e2;\n    --code-string: #2cb472;\n    --code-bool: #ff62d3;\n    --code-number: #9990ff;\n    --code-date: #fff;\n    --code-regexp: #e5ff7e;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background-color: var(--scrollbar);\n  }\n\n  ::-webkit-scrollbar {\n    width: 6px;\n  }\n\n  ::-webkit-scrollbar:horizontal {\n    height: 6px;\n  }\n\n  position: fixed;\n  top: 64px;\n  right: 64px;\n  bottom: 64px;\n  z-index: 1000;\n\n  display: flex;\n  flex-direction: row;\n  width: 736px;\n  min-width: 400px;\n  max-width: 90%;\n\n  color: var(--text);\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Apple Color Emoji',\n    'Segoe UI Emoji', 'Segoe UI Symbol', 'PT Sans', Helvetica, Arial, sans-serif;\n  line-height: 1.5;\n\n  background-color: var(--bg);\n  border-radius: 8px;\n  box-shadow: var(--shadow);\n\n  user-select: none;\n\n  color-scheme: light dark;\n  -ms-text-size-adjust: 100%;\n  -webkit-text-size-adjust: 100%;\n\n  @media screen and (max-width: 700px) {\n    max-width: 480px;\n  }\n"]))),R=t.styled.div(v||(v=l(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  width: 8px;\n  margin-top: 48px;\n  margin-bottom: 48px;\n  margin-left: -10px;\n\n  color: var(--primary);\n  font-size: 14px;\n  font-family: monospace;\n  line-height: 6px;\n  word-break: break-all;\n\n  background-color: var(--bg);\n  border-top-left-radius: 8px;\n  border-bottom-left-radius: 8px;\n  cursor: col-resize;\n\n  &:hover,\n  &[data-active='true'] {\n    color: var(--bg);\n\n    background-color: var(--primary);\n  }\n"]))),U=t.styled.section(b||(b=l(["\n  position: relative;\n\n  display: flex;\n  flex-flow: column;\n  width: 100%;\n\n  border-radius: inherit;\n"]))),_=t.styled.div(y||(y=l(["\n  position: sticky;\n  top: 0;\n  right: 0;\n  left: 0;\n\n  display: flex;\n\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 20px;\n\n  background-color: var(--tab-bg);\n  border-bottom: 1px solid var(--border);\n  border-radius: inherit;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n  box-shadow: var(--tabs-shadow);\n"]))),W=t.styled.div(h||(h=l(["\n  padding: 8px 16px;\n\n  color: var(--tab-text);\n\n  border-radius: inherit;\n  border-top-right-radius: 0;\n  cursor: pointer;\n\n  &:hover {\n    box-shadow: inset 0 -2px 0 0 var(--tab-shadow-active);\n  }\n\n  &:not(:first-child) {\n    border-top-left-radius: 0;\n  }\n\n  &[data-active='true'] {\n    color: var(--tab-text-active);\n\n    box-shadow: inset 0 -2px 0 0 var(--tab-shadow-active);\n  }\n"]))),K=t.styled.div(x||(x=l(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  overflow-y: auto;\n\n  background-color: var(--content-bg);\n"]))),X=t.styled.ul(g||(g=l(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  margin: 0 0;\n  padding: 0 0;\n  overflow-x: auto;\n\n  list-style-type: none;\n"]))),H=t.styled.li(w||(w=l(["\n  display: flex;\n  margin: 0 0;\n  padding: 6px 10px;\n\n  font-size: 12px;\n  line-height: 1.3;\n"]))),V=t.styled.pre(k||(k=l(["\n  display: flex;\n  margin: 0 0;\n\n  color: var(--code-var);\n  font-family: 'JetBrains Mono', hasklig, monofur, monospace;\n"]))),G=t.styled.pre(S||(S=l(["\n  margin: 0 0;\n\n  color: var(--code-func);\n  font-family: 'JetBrains Mono', hasklig, monofur, monospace;\n"]))),Q=t.styled.button(j||(j=l(["\n  margin: 0;\n  margin-left: 1rem;\n  padding: 0.2rem 0.4rem;\n\n  color: var(--primary-text);\n  font-family: 'JetBrains Mono', hasklig, monofur, monospace;\n\n  background-color: var(--primary);\n  border: var(--primary);\n  border-radius: 4px;\n\n  &:focus {\n    outline: 0;\n    box-shadow: 0 0 0 1px var(--primary-dark), 0 0 3px 0 var(--primary-dark);\n  }\n\n  &:hover {\n    background-color: var(--primary-dark);\n  }\n"]))),Y=t.styled.span(O||(O=l(["\n  display: inline-block;\n\n  [data-opened='true'] > & {\n    display: block;\n    padding-left: 8px;\n  }\n\n  &[data-hidden='folded'] {\n    display: none;\n\n    [data-opened='true'] > & {\n      display: block;\n    }\n  }\n\n  &[data-hidden='expanded'] {\n    display: inline-block;\n\n    [data-opened='true'] > & {\n      display: none;\n    }\n  }\n\n  &:not(:last-child)::after {\n    content: ', ';\n  }\n"]))),Z=t.styled.span(E||(E=l(["\n  color: var(--code-bool);\n  font-style: italic;\n"]))),nn=t.styled.span($||($=l(["\n  color: var(--code-number);\n"]))),en=t.styled.span(z||(z=l(["\n  color: var(--code-string);\n"]))),tn=t.styled.span(A||(A=l(["\n  color: var(--code-number);\n  font-weight: bold;\n"]))),rn=t.styled.span(I||(I=l(["\n  color: var(--code-date);\n"]))),on=t.styled.span(P||(P=l(["\n  /* nothing here */\n"]))),an=t.styled.span(C||(C=l(["\n  color: var(--code-regexp);\n"]))),cn=t.styled.div(D||(D=l(["\n  display: flex;\n  * + * {\n    margin-left: 0.5rem;\n  }\n"]))),ln={boolean:Z,date:rn,keyword:tn,number:nn,string:en,symbol:on,regexp:an},sn=t.styled.div(F||(F=l(["\n  display: flex;\n  flex-shrink: 0;\n  padding: 1rem;\n"]))),un=t.styled.input(M||(M=l(["\n  /* nothing here */\n"]))),fn=t.styled.label(T||(T=l(["\n  display: flex;\n  flex-shrink: 0;\n  padding: 0 0.5rem;\n"]))),dn=t.styled.input(q||(q=l(["\n  display: flex;\n  flex-shrink: 0;\n  margin: 0 0.5rem;\n  padding: 0 0.5rem;\n\n  border: 1px solid var(--border);\n  border-radius: 0.2rem;\n\n  &:focus {\n    border-color: var(--primary);\n    outline: 0;\n    box-shadow: 0 0 0 1px var(--primary);\n  }\n"]))),mn=t.styled.div(B||(B=l(["\n  display: flex;\n  flex-direction: column;\n"]))),pn=function(n){var t=n.title,r=c(n,J);fn((function(){un((function(){e.spec({attr:{type:"checkbox"}}),e.spec(r)})),e.spec({text:t})}))},vn=t.styled.select(L||(L=l([""]))),bn=Math.pow(983020,2).toString(36);function yn(n,e){var t;return null!==(t=localStorage.getItem("".concat(bn,"-").concat(n)))&&void 0!==t?t:e}function hn(n,e){return localStorage.setItem("".concat(bn,"-").concat(n),e),e}function xn(e,t){var r=n.createEvent({loc:{file:"/src/setting.ts",line:11,column:17},name:"save",sid:"wnm0lw"});return r.watch((function(n){return hn(e,n)})),{read:function(){return yn(e,t)},write:function(n){return hn(e,n)},save:r}}function gn(e,t){var r=n.createEvent({loc:{file:"/src/setting.ts",line:20,column:17},name:"save",sid:"-o65dje"});return r.watch((function(n){return hn(e,JSON.stringify(n))})),{read:function(){return JSON.parse(yn(e,JSON.stringify(t)))},write:function(n){return hn(e,JSON.stringify(n)),n},save:r}}function wn(e){var t=Object.keys(e),r=t[0],o=xn("last-tab",r),i=o.read(),a=t.includes(i)?i:r,c=n.createEvent({loc:{file:"/src/tabs.ts",line:10,column:22},name:"changeTab",sid:"-z2hzvl"}),l=n.restore(c,a,{loc:{file:"/src/tabs.ts",line:11,column:17},name:"$tab",sid:"16xfb8"});l.watch(o.write),U((function(){_((function(){var n,r=m(t);try{var o=function(){var t=n.value,r=e[t];W({text:r.title,data:{active:l.map((function(n){return n===t}))},handler:{click:c.prepend((function(){return t}))}})};for(r.s();!(n=r.n()).done;)o()}catch(n){r.e(n)}finally{r.f()}}));var n,r=m(t);try{var o=function(){var t=n.value,r=e[t];K({visible:l.map((function(n){return n===t})),fn:function(){r.fn({changeTab:c})}})};for(r.s();!(n=r.n()).done;)o()}catch(n){r.e(n)}finally{r.f()}}))}var kn=/\[object ([\w\s]+)\]/;function Sn(n){var e=Object.prototype.toString.call(n),t=kn.exec(e);return t?t[1]:"unknown"}function jn(t){var r=e.rec((function(t){var o=t.store,i=s(e.remap(o,["value","parentOpened"]),2),a=i[0],c=i[1],l=n.createEvent({loc:{file:"/src/object-view.ts",line:13,column:32},name:"foldableClicked",sid:"-stmnmb"}),f=n.createStore(!1,{loc:{file:"/src/object-view.ts",line:14,column:29},name:"$localOpened",sid:"-lmwtnk"}).on(l,(function(n){return!n})),d=n.combine({and:[c,f,function(n,e){return!0===n&&e}],or:{loc:{file:"/src/object-view.ts",line:15,column:24},name:"$opened",sid:"6x0687"}});e.variant({source:n.combine({and:[a,d,function(n,e){return{type:Sn(n),value:n,opened:e}}],or:{loc:{file:"/src/object-view.ts",line:17,column:20},name:"source",sid:"-2jts3p"}}),key:"type",cases:{String:function(n){var t=n.store;return ln.string({text:['"',e.remap(t,"value"),'"']})},Number:function(n){var t=n.store;return ln.number({text:e.remap(t,"value")})},BigInt:function(n){var t=n.store;return ln.number({text:[e.remap(t,"value"),"n"],attr:{title:"BigInt"}})},Boolean:function(n){var t=n.store;return ln.boolean({text:e.remap(t,"value")})},Null:function(){return ln.keyword({text:"null"})},Undefined:function(){return ln.keyword({text:"undefined"})},Symbol:function(n){var t=n.store;return ln.symbol({text:e.remap(t,"value")})},RegExp:function(n){var t=n.store,r=e.remap(t,"value"),o=s(e.remap(r,["source","flags"]),2),i=o[0],a=o[1];ln.regexp({text:["/",i,"/",a]})},Function:function(n){var t=n.store,r=e.remap(t,"value"),o={title:r.map((function(n){return n.toString()}))};e.h("span",{text:"function",attr:o}),ln.keyword({text:r.map((function(n){return n.name?" ".concat(n.name):""})),attr:o}),e.h("span",{text:"()",attr:o})},AsyncFunction:function(n){var t=n.store,r=e.remap(t,"value"),o={title:r.map((function(n){return n.toString()}))};e.h("span",{text:"async function",attr:o}),ln.keyword({text:r.map((function(n){return n.name?" ".concat(n.name):""})),attr:o}),e.h("span",{text:"()",attr:o})},Window:function(n){var t=n.store,r=e.remap(t,"opened");e.h("span",(function(){e.spec({data:{opened:r}}),e.h("span",{text:"Window {...",fn:function(){e.handler({passive:!0,stop:!0,capture:!0},{click:l})}}),e.spec({text:"}"})}))},Date:function(){ln.date({text:a.map((function(n){var e;return null===(e=n.toISOString)||void 0===e?void 0:e.call(n)})),attr:{title:a}})},Array:function(t){var o=t.store,i=s(e.remap(o,["value","opened"]),2),a=i[0],c=i[1];e.h("span",(function(){e.spec({data:{opened:c}}),e.h("span",{text:"Array [",data:{clickable:!0},fn:function(){e.handler({passive:!0,stop:!0,capture:!0,prevent:!0},{click:l})}}),e.list(a,(function(e){var t=e.store,o=e.key;return Y((function(){return r({store:n.combine({and:[{value:t,parentOpened:c,key:o.map(String)}],or:{loc:{file:"/src/object-view.ts",line:91,column:35},name:"store",sid:"xbvkm7"}})})}))})),e.spec({text:"]"})}))},Arguments:function(t){var o=t.store,i=s(e.remap(o,["value","opened"]),2),a=i[0],c=i[1];e.h("span",(function(){e.spec({data:{opened:c}}),e.h("span",{text:"Arguments [",fn:function(){e.handler({passive:!0,stop:!0,capture:!0},{click:l})}}),e.list(a.map((function(n){return u(n)})),(function(e){var t=e.store,o=e.key;return Y((function(){return r({store:n.combine({and:[{value:t,parentOpened:c,key:o.map(String)}],or:{loc:{file:"/src/object-view.ts",line:111,column:35},name:"store",sid:"nufsva"}})})}))})),e.spec({text:"]"})}))},Set:function(t){var o=t.store,i=s(e.remap(o,["value","opened"]),2),a=i[0],c=i[1];e.h("span",(function(){e.spec({data:{opened:c}}),e.h("span",{text:"Set [",fn:function(){e.handler({passive:!0,stop:!0,capture:!0},{click:l})}}),e.list(a.map((function(n){return u(n.values())})),(function(e){var t=e.store,o=e.key;return Y((function(){return r({store:n.combine({and:[{value:t,parentOpened:c,key:o.map(String)}],or:{loc:{file:"/src/object-view.ts",line:131,column:35},name:"store",sid:"-htvons"}})})}))})),e.spec({text:"]"})}))},Map:function(t){var o=t.store,i=s(e.remap(o,["value","opened"]),2),a=i[0],c=i[1];e.h("span",(function(){e.spec({data:{opened:c}}),e.h("span",(function(){e.spec({text:"Map {"}),e.handler({passive:!0,stop:!0,capture:!0},{click:l})})),e.list(a.map((function(n){return u(n.entries())})),(function(t){var o=t.store,i=s(e.remap(o,["0","1"]),2),a=i[0],u=i[1];Y((function(){ln.string({text:['"',a,'"'],fn:function(){e.handler({passive:!0,stop:!0,capture:!0},{click:l})}}),e.h("span",{text:" => "}),r({store:n.combine({and:[{value:u,parentOpened:c,key:a}],or:{loc:{file:"/src/object-view.ts",line:159,column:43},name:"store",sid:"fb9vmt"}})})}))})),e.spec({text:"}"})}))},Error:function(t){var o=t.store,i=s(e.remap(o,["value","opened"]),2),a=i[0],c=i[1],f=s(e.remap(a,["name","message"]),2),d=f[0],m=f[1],p=a.map((function(n){var e;return null!==(e=n.stack)&&void 0!==e?e:null}));e.h("span",(function(){e.spec({data:{opened:c}}),e.h("span",{text:[d," {"],attr:{title:a.map((function(n){return n.constructor.name}))},fn:function(){e.handler({passive:!0,stop:!0,capture:!0},{click:l})}}),Y((function(){e.spec({data:{hidden:"expanded"}}),ln.string({text:['"message"'],fn:function(){e.handler({passive:!0,stop:!0,capture:!0},{click:l})}}),e.h("span",{text:": "}),r({store:n.combine({and:[{value:m,parentOpened:c,key:"message"}],or:{loc:{file:"/src/object-view.ts",line:193,column:39},name:"store",sid:"5h7l4"}})})})),Y((function(){e.spec({data:{hidden:"folded"}}),ln.string({text:['"stack"'],fn:function(){e.handler({passive:!0,stop:!0,capture:!0},{click:l})}}),e.h("span",{text:": "});var t=n.combine({and:[{value:p,parentOpened:c,key:"stack"}],or:{loc:{file:"/src/object-view.ts",line:209,column:42},name:"store",sid:"-t932g0"}});r({store:t})})),e.list(a.map((function(n){return u(Object.entries(n))})),(function(t){var o=t.store,i=s(e.remap(o,["0","1"]),2),a=i[0],u=i[1];Y((function(){ln.string({text:['"',a,'"'],fn:function(){e.handler({passive:!0,stop:!0,capture:!0},{click:l})}}),e.h("span",{text:": "}),r({store:n.combine({and:[{value:u,parentOpened:c,key:a}],or:{loc:{file:"/src/object-view.ts",line:227,column:43},name:"store",sid:"-udqrh"}})})}))}))})),e.h("span",{text:"}"})},__:function(t){var o=t.store;e.h("span",(function(){var t=s(e.remap(o,["type","value","opened"]),3),i=t[0],a=t[1],c=t[2];e.spec({data:{opened:c}}),e.h("span",{text:[i," {"],fn:function(){e.handler({passive:!0,stop:!0,capture:!0},{click:l})}}),e.list(a.map((function(n){return u(Object.entries(n))})),(function(t){var o=t.store,i=s(e.remap(o,["0","1"]),2),a=i[0],u=i[1];Y((function(){ln.string({text:['"',a,'"'],fn:function(){e.handler({passive:!0,stop:!0,capture:!0},{click:l})}}),e.h("span",{text:": "}),r({store:n.combine({and:[{value:u,parentOpened:c,key:a}],or:{loc:{file:"/src/object-view.ts",line:260,column:43},name:"store",sid:"-gh80lu"}})})}))}))})),e.h("span",{text:"}"})}}})})),o=t.value,i=n.combine({and:[{value:o,parentOpened:n.createStore(!0,{loc:{file:"/src/object-view.ts",line:277,column:22},name:"parentOpened",sid:"-2w11af"}),key:""},function(n){return n}],or:{loc:{file:"/src/object-view.ts",line:275,column:18},name:"store",sid:"kebhe"}});r({store:i})}function On(n,e){return e.trimDomain?n.map((function(n){return n.replace("".concat(e.trimDomain,"/"),"")})):n}var En,$n,zn=gn("filter-kinds",["event","store"]),An=xn("filter-text","");function In(t,r,o){var i=n.createEvent({loc:{file:"/src/logs.ts",line:11,column:23},name:"toggleKind",sid:"al2efl"}),a=n.createEvent({loc:{file:"/src/logs.ts",line:12,column:26},name:"filterChanged",sid:"sbtuox"}),c=n.createEvent({loc:{file:"/src/logs.ts",line:13,column:25},name:"clearClicked",sid:"g7uhen"}),l=n.createStore(zn.read(),{loc:{file:"/src/logs.ts",line:14,column:19},name:"$kinds",sid:"th13oa"}),f=n.restore(a,An.read(),{loc:{file:"/src/logs.ts",line:15,column:24},name:"$filterText",sid:"-aim8j7"});l.on(i,(function(n,e){return n.includes(e)?n.filter((function(n){return n!==e})):[].concat(u(n),[e])})).watch(zn.write),f.watch(An.write),t.on(c,(function(){return[]})).on(r,(function(){return[]})),sn((function(){e.h("span",{text:"Show: "}),pn({title:"Event",attr:{checked:l.map((function(n){return n.includes("event")}))},handler:{click:i.prepend((function(){return"event"}))}}),pn({title:"Store",attr:{checked:l.map((function(n){return n.includes("store")}))},handler:{click:i.prepend((function(){return"store"}))}}),pn({title:"Effect",attr:{checked:l.map((function(n){return n.includes("effect")}))},handler:{click:i.prepend((function(){return"effect"}))}}),e.h("span",{text:"Filter:"}),dn({attr:{value:f},handler:{change:a.prepend((function(n){var e,t;return null!==(e=null===(t=n.currentTarget)||void 0===t?void 0:t.value)&&void 0!==e?e:""}))}}),Q({text:"Clear",handler:{click:c},attr:{title:"Press CTRL+L to clear logs"}})})),X((function(){e.list({source:t,key:"id",fields:["kind","name","payload","datetime"],fn:function(e){var t=s(e.fields,4),r=t[0],i=t[1],a=t[2],c=t[3],u=On(i,o),d=n.combine({and:[r,l,function(n,e){return e.includes(n)}],or:{loc:{file:"/src/logs.ts",line:58,column:37},name:"$kindMatched",sid:"-80l9jl"}}),m=n.combine({and:[f,u,function(n,e){return e.includes(n)}],or:{loc:{file:"/src/logs.ts",line:59,column:37},name:"$textMatched",sid:"3h5st1"}}),p=n.combine({and:[d,m,function(n,e){return n&&e}],or:{loc:{file:"/src/logs.ts",line:60,column:33},name:"$visible",sid:"-8m6nr6"}});H({visible:p,fn:function(){var n=c.map((function(n){return n.toISOString()})),e=c.map((function(n){return n.toLocaleTimeString()}));V({text:[e," ▸ "],attr:{title:n}}),V({text:r}),V({text:[" «",u,"» "]}),G((function(){return jn({value:a})}))}})}})}))}function Pn(n,t){X((function(){var r=n.map((function(n){return Object.entries(n).map((function(n){var e=s(n,2);return o({name:e[0]},e[1])}))}));e.list({source:r,key:"name",fields:["name","value"],fn:function(n){var e=s(n.fields,2),r=e[0],o=e[1];H((function(){V({text:[On(r,t),": "]}),G((function(){jn({value:o})}))}))}})}))}function Cn(n,t){X((function(){var r=n.map((function(n){return Object.entries(n).map((function(n){var e=s(n,2);return o({name:e[0]},e[1])}))}));e.list({source:r,key:"name",fields:["name","history"],fn:function(n){var e=s(n.fields,2),r=e[0];e[1],H((function(){V({text:[On(r,t)," "]})}))}})}))}function Dn(n,t){X((function(){var r=n.map((function(n){return Object.entries(n).map((function(n){var e=s(n,2);return o({sid:e[0]},e[1])}))}));e.list({source:r,key:"sid",fields:["name","inFlight"],fn:function(n){var r=s(n.fields,2),o=r[0],i=r[1];H((function(){V({text:[On(o,t)," "]}),G((function(){e.h("span",(function(){e.h("span",{text:[" {"]}),Y((function(){ln.string({text:'"inFlight": '}),ln.number({text:i})})),e.text($n||($n=l(["}"])))}))}))}))}})}))}t.styled.div(En||(En=l(["\n  display: flex;\n  flex-flow: row nowrap;\n\n  :nth-child(2),\n  :nth-child(3),\n  :nth-child(4),\n  :nth-child(5) {\n    opacity: 0.8;\n  }\n\n  > :nth-child(n + 6) {\n    opacity: 0.5;\n  }\n\n  > :not(:first-child) {\n    margin-left: 0.5rem;\n  }\n"])));var Fn,Mn,Tn,qn;function Bn(t){var r=t.$files.map((function(n){return Object.keys(n).sort((function(n,e){return n<e?-1:n>e?1:0}))})),o=r.map((function(n){return n.length>0})),i=n.createEvent({loc:{file:"/src/files.ts",line:17,column:25},name:"fileSelected",sid:"-jqe342"}),a=n.createEvent({loc:{file:"/src/files.ts",line:18,column:24},name:"fileCleanup",sid:"hlqci5"}),c=n.createStore("",{loc:{file:"/src/files.ts",line:19,column:25},name:"$currentFile",sid:"8hcd8i"}),l=c.map((function(n){return""!==n})),s=l.map((function(n){return!n}));c.on(i,(function(n,e){return e})).on(a,(function(){return""})),sn({style:{flexDirection:"column"},visible:o,fn:function(){cn({visible:l,fn:function(){Q({text:"◀",handler:{click:a.prepend((function(){}))}}),e.h("span",{text:"File:"}),vn({handler:{change:i.prepend((function(n){return n.currentTarget.value}))},fn:function(){e.list(r,(function(t){var r=t.store;e.h("option",{attr:{value:r,selected:n.combine({and:[r,c,function(n,e){return n===e}],or:{loc:{file:"/src/files.ts",line:48,column:50},name:"selected",sid:"6n66ec"}})},text:r})}))}})}}),mn({visible:s,fn:function(){var t=n.createEvent({loc:{file:"/src/files.ts",line:60,column:42},name:"filterChanged",sid:"k3tq2y"}),o=n.restore(t,"",{loc:{file:"/src/files.ts",line:61,column:36},name:"$filter",sid:"ylqhpg"}),a=n.combine({and:[o,r,function(n,e){return e.filter((function(e){return e.includes(n)}))}],or:{loc:{file:"/src/files.ts",line:62,column:43},name:"$filteredFiles",sid:"-f0p9a1"}});Jn({text:"Please, select file from the list or type the name"});var c=t.prepend((function(n){var e;return null===(e=n.currentTarget)||void 0===e?void 0:e.value}));mn((function(){Nn({attr:{value:o,placeholder:"Type a part of the file name"},handler:{change:c,keydown:c}}),Rn((function(){e.list(a,(function(e){var t=e.store;e.key;var r=n.createEvent({loc:{file:"/src/files.ts",line:75,column:51},name:"selectFile",sid:"4tb03w"});n.sample({and:[{source:t,clock:r,target:i}],or:{loc:{file:"/src/files.ts",line:76,column:32},sid:"ipctc"}}),Un({text:t,attr:{tabIndex:"0"},handler:{click:r}})}))}))}))}})}}),sn({visible:l,fn:function(){var e=n.combine({and:[c,t.$files,t.$events,function(n,e,t){return""!==n&&e[n]?Object.fromEntries(e[n].filter((function(n){return"event"===n.kind})).map((function(n){var e=n.name;return[e,t[e]]}))):{}}],or:{loc:{file:"/src/files.ts",line:96,column:28},name:"$events",sid:"n8saf2"}}),r=n.combine({and:[c,t.$files,t.$stores,function(n,e,t){return""!==n&&e[n]?Object.fromEntries(e[n].filter((function(n){return"store"===n.kind})).map((function(n){var e=n.name;return[e,t[e]]}))):{}}],or:{loc:{file:"/src/files.ts",line:104,column:28},name:"$stores",sid:"-qtmfjl"}}),o=n.combine({and:[c,t.$files,t.$effects,function(n,e,t){return""!==n&&e[n]?Object.fromEntries(e[n].filter((function(n){return"effect"===n.kind})).map((function(n){var e=n.name;return[e,t[e]]}))):{}}],or:{loc:{file:"/src/files.ts",line:112,column:29},name:"$effects",sid:"n4x7jt"}});mn((function(){Cn(e,t.options),Pn(r,t.options),Dn(o,t.options)}))}})}var Ln,Jn=t.styled.h4(Fn||(Fn=l(["\n  margin-top: 0;\n"]))),Nn=t.styled.input(Mn||(Mn=l(["\n  display: flex;\n  flex-shrink: 0;\n  padding: 0 0.5rem;\n  border: 1px solid var(--border);\n  border-radius: 0.2rem;\n  margin-bottom: 1rem;\n  font-size: 1rem;\n  line-height: 2rem;\n\n  &:focus {\n    border-color: var(--primary);\n    outline: 0;\n    box-shadow: 0 0 0 2px var(--primary);\n  }\n"]))),Rn=t.styled.div(Tn||(Tn=l(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  margin: 0 0;\n  padding: 0 0;\n  overflow-x: auto;\n  align-items: stretch;\n\n  list-style-type: none;\n\n  :nth-child(2n) {\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n"]))),Un=t.styled.button(qn||(qn=l(["\n  color: var(--text);\n  font-family: 'JetBrains Mono', hasklig, monofur, monospace;\n  font-size: 14px;\n  text-align: left;\n\n  border: var(--primary);\n  padding: 0.2rem 0.4rem;\n\n  cursor: pointer;\n\n  &:hover {\n    background-color: var(--primary-dark);\n  }\n\n  &:focus {\n    outline: none;\n    box-shadow: inset 0 0 0 2px var(--primary-dark);\n  }\n"]))),_n=n.createStore(!1,{loc:{file:"/src/view.ts",line:13,column:19},name:"$isVisible",sid:"ln45bu"}),Wn=n.createEvent({loc:{file:"/src/view.ts",line:14,column:22},name:"togglePressed",sid:"-4qpnv9"}),Kn=n.createEvent({loc:{file:"/src/view.ts",line:15,column:21},name:"clearPressed",sid:"5582a"}),Xn=n.createEvent({loc:{file:"/src/view.ts",line:16,column:22},name:"showInspector",sid:"-vtxc3v"});function Hn(){var t=n.createStore(!1,{loc:{file:"/src/view.ts",line:30,column:20},name:"$inDrag",sid:"fz9nj6"}),r=n.createEvent({loc:{file:"/src/view.ts",line:31,column:22},name:"mouseDown",sid:"1vwxop"}),o=n.createEvent({loc:{file:"/src/view.ts",line:32,column:22},name:"mouseMove",sid:"-z4lzop"}),i=n.createEvent({loc:{file:"/src/view.ts",line:33,column:20},name:"mouseUp",sid:"-o7r6ym"});return t.on(r,(function(){return!0})).on(i,(function(){return!1})),e.spec({handler:{mousedown:r}}),r.watch((function(){document&&(document.addEventListener("mousemove",o),document.addEventListener("mouseup",i))})),i.watch((function(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",i)})),{mouseMove:o,mouseDown:r,mouseUp:i,$inDrag:t}}function Vn(){var t=n.createEvent({loc:{file:"/src/view.ts",line:49,column:19},name:"setRef",sid:"-wbz8vw"}),r=n.restore(t,null,{loc:{file:"/src/view.ts",line:50,column:17},name:"$ref",sid:"-b10otu"});return e.node(t),r}function Gn(t,r,o,i,a){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};c.visible&&Xn(),console.info("%c[effector-inspector] %cPress %cCTRL+B %cto open Inspector","color: gray; font-size: 1rem;","color: currentColor; font-size: 1rem;","color: deepskyblue; font-family: monospace; font-size: 1rem;","color: currentColor; font-size: 1rem;"),N({visible:_n,fn:function(){var s=Vn(),u=gn("width",736),f=n.createStore(u.read(),{loc:{file:"/src/view.ts",line:65,column:27},name:"$width",sid:"er5jku"});e.spec({style:{width:e.val(Ln||(Ln=l(["","px"])),f)}}),R({text:"∙∙∙",fn:function(){var t=Hn(),r=t.mouseMove,o=t.mouseDown,i=t.mouseUp,a=t.$inDrag;e.spec({data:{active:a}});var c=n.createStore(0,{loc:{file:"/src/view.ts",line:72,column:35},name:"$shift",sid:"-gd3rpb"}),l=n.sample({and:[s,o,function(n,e){return{block:n,event:e}}],or:{loc:{file:"/src/view.ts",line:73,column:38},name:"dragStart",sid:"-xj5i6r"}}),d=n.sample({and:[s,r,function(n,e){return n.getBoundingClientRect().right-e.clientX}],or:{loc:{file:"/src/view.ts",line:74,column:37},name:"dragMove",sid:"vlftz8"}}),m=n.sample({and:[c,d,function(n,e){return e-n}],or:{loc:{file:"/src/view.ts",line:78,column:41},name:"correctWidth",sid:"-561hwi"}});f.on(m,(function(n,e){return e})),c.on(l,(function(n,e){var t=e.block,r=e.event;return t?t.getBoundingClientRect().left-r.clientX:0})),n.sample({and:[f,i,u.save],or:{loc:{file:"/src/view.ts",line:81,column:20},sid:"pl2go9"}})}}),wn({files:{title:"Files",fn:function(){Bn({$stores:t,$events:r,$effects:o,$files:a,options:c})}},stores:{title:"Stores",fn:function(){Pn(t,c)}},effects:{title:"Effects",fn:function(){Dn(o,c)}},events:{title:"Events",fn:function(){Cn(r,c)}},logs:{title:"Logs",fn:function(){In(i,Kn,c)}}})}})}"object"===("undefined"==typeof document?"undefined":i(document))&&document.addEventListener("keypress",(function(n){n.ctrlKey&&("l"!==n.key&&12!==n.keyCode||Kn(),"b"!==n.key&&2!==n.keyCode||Wn())})),_n.on(Wn,(function(n){return!n})).on(Xn,(function(){return!0}));var Qn=n.createStore({},{loc:{file:"/src/index.ts",line:5,column:15},name:"$files",sid:"-b5fubx"}),Yn=n.createEvent({loc:{file:"/src/index.ts",line:6,column:17},name:"storeAdd",sid:"-w7nr43"}),Zn=n.createEvent({loc:{file:"/src/index.ts",line:7,column:21},name:"storeUpdated",sid:"w3u5z1"}),ne=n.createStore({},{loc:{file:"/src/index.ts",line:8,column:16},name:"$stores",sid:"ioizqq"}),ee=n.createEvent({loc:{file:"/src/index.ts",line:9,column:17},name:"eventAdd",sid:"-o9yfun"}),te=n.createEvent({loc:{file:"/src/index.ts",line:10,column:23},name:"eventTriggered",sid:"-3vh36s"}),re=n.createStore({},{loc:{file:"/src/index.ts",line:11,column:16},name:"$events",sid:"-b7nvrd"}),oe=n.createEvent({loc:{file:"/src/index.ts",line:12,column:18},name:"effectAdd",sid:"fekv6p"}),ie=n.createEvent({loc:{file:"/src/index.ts",line:13,column:24},name:"effectTriggered",sid:"-w5t4dt"}),ae=n.createStore({},{loc:{file:"/src/index.ts",line:14,column:17},name:"$effects",sid:"bxdte"}),ce=n.createStore([],{loc:{file:"/src/index.ts",line:15,column:14},name:"$logs",sid:"e84fof"});ne.on(Yn,(function(n,e){return o(o({},n),{},a({},e.name,{value:e.store.getState(),mapped:e.mapped}))})).on(Zn,(function(n,e){var t=e.name,r=e.value;return n[t]=o(o({},n[t]),{},{value:r}),o({},n)})),Qn.on(Yn,(function(n,e){var t=e.name,r=e.file;if(r){if(n[r]){var i=n[r];return o(o({},n),{},a({},r,[].concat(u(i),[{kind:"store",name:t}])))}return o(o({},n),{},a({},r,[{kind:"store",name:t}]))}return n})),re.on(ee,(function(n,e){return o(o({},n),{},a({},e.name,{mapped:e.mapped,history:[]}))})).on(te,(function(n,e){var t=e.name,r=e.params;return n[t]=o(o({},n[t]),{},{history:[JSON.parse(JSON.stringify(r))].concat(u(n[t].history))}),o({},n)})),Qn.on(ee,(function(n,e){var t=e.name,r=e.file;if(r){if(n[r]){var i=n[r];return o(o({},n),{},a({},r,[].concat(u(i),[{kind:"event",name:t}])))}return o(o({},n),{},a({},r,[{kind:"event",name:t}]))}return n})),ae.on(oe,(function(n,e){return o(o({},n),{},a({},e.sid,{name:e.name,effect:e.effect,inFlight:e.effect.inFlight.getState()}))})).on(ie,(function(n,e){var t=e.sid,r=n[t];return n[t]=o(o({},r),{},{inFlight:r.effect.inFlight.getState()}),o({},n)})),Qn.on(oe,(function(n,e){var t=e.name,r=e.file;if(r){if(n[r]){var i=n[r];return o(o({},n),{},a({},r,[].concat(u(i),[{kind:"event",name:t}])))}return o(o({},n),{},a({},r,[{kind:"event",name:t}]))}return n}));var le=1e3,se=n.createEffect({handler:function(n){var e=n.name,t=n.kind,r=n.payload;return{id:(++le).toString(36),kind:t,name:e,payload:r,datetime:new Date}}},{loc:{file:"/src/index.ts",line:94,column:23},name:"createRecordFx",sid:"o8fkim"});function ue(n){var e,t;return null===(e=n.defaultConfig)||void 0===e||null===(t=e.loc)||void 0===t?void 0:t.file}function fe(n){return n.compositeName.path.join("/")}n.forward({and:{from:te,to:se.prepend((function(n){return{kind:"event",name:n.name,payload:n.params}}))},or:{loc:{file:"/src/index.ts",line:105,column:0},sid:"-4wufh5"}}),n.forward({and:{from:Zn,to:se.prepend((function(n){return{kind:"store",name:n.name,payload:n.value}}))},or:{loc:{file:"/src/index.ts",line:113,column:0},sid:"-4gwe9o"}}),ce.on(se.doneData,(function(n,e){return[e].concat(u(n))})),exports.addEffect=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=fe(e),i=r.sid||e.sid||o;oe({effect:e,name:o,sid:i,attached:null!==(t=r.attached)&&void 0!==t&&t,file:ue(e)}),n.forward({and:{from:[e,e.finally],to:ie.prepend((function(){return{sid:i}}))},or:{loc:{file:"/src/index.ts",line:174,column:4},sid:"-1m2v7p"}});var a=e.map((function(n){return{kind:"effect",name:o,payload:n}})),c=e.done.map((function(n){return{kind:"effect",name:o+".done",payload:n}})),l=e.fail.map((function(n){return{kind:"effect",name:o+".fail",payload:n}}));n.forward({and:{from:[a,c,l],to:se},or:{loc:{file:"/src/index.ts",line:193,column:4},sid:"-ojf0o"}})},exports.addEvent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.name||fe(e);ee({event:e,name:r,mapped:t.mapped||!1,file:ue(e)}),n.forward({and:{from:e.map((function(n){return{name:r,params:n}})),to:te},or:{loc:{file:"/src/index.ts",line:156,column:4},sid:"-2j2itd"}})},exports.addStore=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.name||fe(e);Yn({store:e,name:r,mapped:t.mapped||!1,file:ue(e)}),n.forward({and:{from:e.updates.map((function(n){return{name:r,value:n}})),to:Zn},or:{loc:{file:"/src/index.ts",line:143,column:4},sid:"-31rizn"}})},exports.createInspector=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r="object"===("undefined"==typeof document?"undefined":i(document))&&document.createElement("div");if(r)return r.classList.add("effector-inspector"),document.body.append(r),e.using(r,(function(){return Gn(ne,re,ae,ce,Qn,n)})),e.using(r,t.StyledRoot),{root:r}};
//# sourceMappingURL=common.js.map

import{createEvent as n,restore as e,createStore as t,combine as r,sample as o,createEffect as i,forward as a}from"effector";import{spec as c,rec as l,remap as s,variant as u,h as f,handler as d,list as m,text as p,val as v,node as b,using as x}from"forest";import{styled as y,StyledRoot as g}from"foliage";function h(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function w(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?h(Object(t),!0).forEach((function(e){j(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function k(n){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function j(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function O(n,e){if(null==n)return{};var t,r,o=function(n,e){if(null==n)return{};var t,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}function S(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function $(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,c=!1;try{for(t=t.call(n);!(a=(r=t.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(n){c=!0,o=n}finally{try{a||null==t.return||t.return()}finally{if(c)throw o}}return i}(n,e)||E(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(n){return function(n){if(Array.isArray(n))return A(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||E(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(n,e){if(n){if("string"==typeof n)return A(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(n,e):void 0}}function A(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function I(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=E(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return a=n.done,n},e:function(n){c=!0,i=n},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}var P,C,D,F,T,M,B,L,J,q,N,U,R,W,K,X,_,H,V,G,Q,Y,Z,nn,en,tn,rn=["title"],on=y.div(P||(P=S(["\n  --primary: #ff8c00;\n  --primary-light: #ffb152;\n  --primary-dark: #c86e00;\n  --primary-text: #fff;\n\n  --text: #404040;\n  --border: #dadada;\n  --shadow: 0 4px 20px 4px rgba(0, 0, 0, 0.1);\n\n  --scrollbar: var(--primary-light);\n\n  --tabs-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);\n\n  --tab-bg: #fff;\n  --tab-text: #606060;\n  --tab-text-active: var(--primary);\n  --tab-shadow-active: var(--primary);\n\n  --content-bg: #f9f9f9;\n\n  --code-var: #ff8c00;\n  --code-func: #249ec6;\n  --code-string: #00a153;\n  --code-bool: #ff62d3;\n  --code-number: #7a70f3;\n  --code-date: #333;\n  --code-regexp: #95b70e;\n\n  @media (prefers-color-scheme: dark) {\n    --text: #ddd;\n    --border: #111;\n    --shadow: 0 4px 20px 4px rgba(0, 0, 0, 0.1);\n\n    --scrollbar: var(--primary);\n\n    --tabs-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n\n    --tab-bg: #444;\n    --tab-text: #ddd;\n    --tab-text-active: var(--primary);\n    --tab-shadow-active: var(--primary);\n\n    --content-bg: #333;\n\n    --code-var: #ff8c00;\n    --code-func: #a5d4e2;\n    --code-string: #2cb472;\n    --code-bool: #ff62d3;\n    --code-number: #9990ff;\n    --code-date: #fff;\n    --code-regexp: #e5ff7e;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background-color: var(--scrollbar);\n  }\n\n  ::-webkit-scrollbar {\n    width: 6px;\n  }\n\n  ::-webkit-scrollbar:horizontal {\n    height: 6px;\n  }\n\n  position: fixed;\n  top: 64px;\n  right: 64px;\n  bottom: 64px;\n  z-index: 1000;\n\n  display: flex;\n  flex-direction: row;\n  width: 736px;\n  min-width: 400px;\n  max-width: 90%;\n\n  color: var(--text);\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Apple Color Emoji',\n    'Segoe UI Emoji', 'Segoe UI Symbol', 'PT Sans', Helvetica, Arial, sans-serif;\n  line-height: 1.5;\n\n  background-color: var(--bg);\n  border-radius: 8px;\n  box-shadow: var(--shadow);\n\n  user-select: none;\n\n  color-scheme: light dark;\n  -ms-text-size-adjust: 100%;\n  -webkit-text-size-adjust: 100%;\n\n  @media screen and (max-width: 700px) {\n    max-width: 480px;\n  }\n"]))),an=y.div(C||(C=S(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  width: 8px;\n  margin-top: 48px;\n  margin-bottom: 48px;\n  margin-left: -10px;\n\n  color: var(--primary);\n  font-size: 14px;\n  font-family: monospace;\n  line-height: 6px;\n  word-break: break-all;\n\n  background-color: var(--bg);\n  border-top-left-radius: 8px;\n  border-bottom-left-radius: 8px;\n  cursor: col-resize;\n\n  &:hover,\n  &[data-active='true'] {\n    color: var(--bg);\n\n    background-color: var(--primary);\n  }\n"]))),cn=y.section(D||(D=S(["\n  position: relative;\n\n  display: flex;\n  flex-flow: column;\n  width: 100%;\n\n  border-radius: inherit;\n"]))),ln=y.div(F||(F=S(["\n  position: sticky;\n  top: 0;\n  right: 0;\n  left: 0;\n\n  display: flex;\n\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 20px;\n\n  background-color: var(--tab-bg);\n  border-bottom: 1px solid var(--border);\n  border-radius: inherit;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n  box-shadow: var(--tabs-shadow);\n"]))),sn=y.div(T||(T=S(["\n  padding: 8px 16px;\n\n  color: var(--tab-text);\n\n  border-radius: inherit;\n  border-top-right-radius: 0;\n  cursor: pointer;\n\n  &:hover {\n    box-shadow: inset 0 -2px 0 0 var(--tab-shadow-active);\n  }\n\n  &:not(:first-child) {\n    border-top-left-radius: 0;\n  }\n\n  &[data-active='true'] {\n    color: var(--tab-text-active);\n\n    box-shadow: inset 0 -2px 0 0 var(--tab-shadow-active);\n  }\n"]))),un=y.div(M||(M=S(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  overflow-y: auto;\n\n  background-color: var(--content-bg);\n"]))),fn=y.ul(B||(B=S(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  margin: 0 0;\n  padding: 0 0;\n  overflow-x: auto;\n\n  list-style-type: none;\n"]))),dn=y.li(L||(L=S(["\n  display: flex;\n  margin: 0 0;\n  padding: 6px 10px;\n\n  font-size: 12px;\n  line-height: 1.3;\n"]))),mn=y.pre(J||(J=S(["\n  display: flex;\n  margin: 0 0;\n\n  color: var(--code-var);\n  font-family: 'JetBrains Mono', hasklig, monofur, monospace;\n"]))),pn=y.pre(q||(q=S(["\n  margin: 0 0;\n\n  color: var(--code-func);\n  font-family: 'JetBrains Mono', hasklig, monofur, monospace;\n"]))),vn=y.button(N||(N=S(["\n  margin: 0;\n  margin-left: 1rem;\n  padding: 0.2rem 0.4rem;\n\n  color: var(--primary-text);\n  font-family: 'JetBrains Mono', hasklig, monofur, monospace;\n\n  background-color: var(--primary);\n  border: var(--primary);\n  border-radius: 4px;\n\n  &:focus {\n    outline: 0;\n    box-shadow: 0 0 0 1px var(--primary-dark), 0 0 3px 0 var(--primary-dark);\n  }\n\n  &:hover {\n    background-color: var(--primary-dark);\n  }\n"]))),bn=y.span(U||(U=S(["\n  display: inline-block;\n\n  [data-opened='true'] > & {\n    display: block;\n    padding-left: 8px;\n  }\n\n  &[data-hidden='folded'] {\n    display: none;\n\n    [data-opened='true'] > & {\n      display: block;\n    }\n  }\n\n  &[data-hidden='expanded'] {\n    display: inline-block;\n\n    [data-opened='true'] > & {\n      display: none;\n    }\n  }\n\n  &:not(:last-child)::after {\n    content: ', ';\n  }\n"]))),xn=y.span(R||(R=S(["\n  color: var(--code-bool);\n  font-style: italic;\n"]))),yn=y.span(W||(W=S(["\n  color: var(--code-number);\n"]))),gn=y.span(K||(K=S(["\n  color: var(--code-string);\n"]))),hn=y.span(X||(X=S(["\n  color: var(--code-number);\n  font-weight: bold;\n"]))),wn=y.span(_||(_=S(["\n  color: var(--code-date);\n"]))),kn=y.span(H||(H=S(["\n  /* nothing here */\n"]))),jn=y.span(V||(V=S(["\n  color: var(--code-regexp);\n"]))),On=y.div(G||(G=S(["\n  display: flex;\n  * + * {\n    margin-left: 0.5rem;\n  }\n"]))),Sn={boolean:xn,date:wn,keyword:hn,number:yn,string:gn,symbol:kn,regexp:jn},$n=y.div(Q||(Q=S(["\n  display: flex;\n  flex-shrink: 0;\n  padding: 1rem;\n"]))),zn=y.input(Y||(Y=S(["\n  /* nothing here */\n"]))),En=y.label(Z||(Z=S(["\n  display: flex;\n  flex-shrink: 0;\n  padding: 0 0.5rem;\n"]))),An=y.input(nn||(nn=S(["\n  display: flex;\n  flex-shrink: 0;\n  margin: 0 0.5rem;\n  padding: 0 0.5rem;\n\n  border: 1px solid var(--border);\n  border-radius: 0.2rem;\n\n  &:focus {\n    border-color: var(--primary);\n    outline: 0;\n    box-shadow: 0 0 0 1px var(--primary);\n  }\n"]))),In=y.div(en||(en=S(["\n  display: flex;\n  flex-direction: column;\n"]))),Pn=function(n){var e=n.title,t=O(n,rn);En((function(){zn((function(){c({attr:{type:"checkbox"}}),c(t)})),c({text:e})}))},Cn=y.select(tn||(tn=S([""]))),Dn=Math.pow(983020,2).toString(36);function Fn(n,e){var t;return null!==(t=localStorage.getItem("".concat(Dn,"-").concat(n)))&&void 0!==t?t:e}function Tn(n,e){return localStorage.setItem("".concat(Dn,"-").concat(n),e),e}function Mn(e,t){var r=n({loc:{file:"/src/setting.ts",line:11,column:17},name:"save",sid:"wnm0lw"});return r.watch((function(n){return Tn(e,n)})),{read:function(){return Fn(e,t)},write:function(n){return Tn(e,n)},save:r}}function Bn(e,t){var r=n({loc:{file:"/src/setting.ts",line:20,column:17},name:"save",sid:"-o65dje"});return r.watch((function(n){return Tn(e,JSON.stringify(n))})),{read:function(){return JSON.parse(Fn(e,JSON.stringify(t)))},write:function(n){return Tn(e,JSON.stringify(n)),n},save:r}}function Ln(t){var r=Object.keys(t),o=r[0],i=Mn("last-tab",o),a=i.read(),c=r.includes(a)?a:o,l=n({loc:{file:"/src/tabs.ts",line:10,column:22},name:"changeTab",sid:"-z2hzvl"}),s=e(l,c,{loc:{file:"/src/tabs.ts",line:11,column:17},name:"$tab",sid:"16xfb8"});s.watch(i.write),cn((function(){ln((function(){var n,e=I(r);try{var o=function(){var e=n.value,r=t[e];sn({text:r.title,data:{active:s.map((function(n){return n===e}))},handler:{click:l.prepend((function(){return e}))}})};for(e.s();!(n=e.n()).done;)o()}catch(n){e.e(n)}finally{e.f()}}));var n,e=I(r);try{var o=function(){var e=n.value,r=t[e];un({visible:s.map((function(n){return n===e})),fn:function(){r.fn({changeTab:l})}})};for(e.s();!(n=e.n()).done;)o()}catch(n){e.e(n)}finally{e.f()}}))}var Jn=/\[object ([\w\s]+)\]/;function qn(n){var e=Object.prototype.toString.call(n),t=Jn.exec(e);return t?t[1]:"unknown"}function Nn(e){var o=l((function(e){var i=e.store,a=$(s(i,["value","parentOpened"]),2),l=a[0],p=a[1],v=n({loc:{file:"/src/object-view.ts",line:13,column:32},name:"foldableClicked",sid:"-stmnmb"}),b=t(!1,{loc:{file:"/src/object-view.ts",line:14,column:29},name:"$localOpened",sid:"-lmwtnk"}).on(v,(function(n){return!n})),x=r({and:[p,b,function(n,e){return!0===n&&e}],or:{loc:{file:"/src/object-view.ts",line:15,column:24},name:"$opened",sid:"6x0687"}});u({source:r({and:[l,x,function(n,e){return{type:qn(n),value:n,opened:e}}],or:{loc:{file:"/src/object-view.ts",line:17,column:20},name:"source",sid:"-2jts3p"}}),key:"type",cases:{String:function(n){var e=n.store;return Sn.string({text:['"',s(e,"value"),'"']})},Number:function(n){var e=n.store;return Sn.number({text:s(e,"value")})},BigInt:function(n){var e=n.store;return Sn.number({text:[s(e,"value"),"n"],attr:{title:"BigInt"}})},Boolean:function(n){var e=n.store;return Sn.boolean({text:s(e,"value")})},Null:function(){return Sn.keyword({text:"null"})},Undefined:function(){return Sn.keyword({text:"undefined"})},Symbol:function(n){var e=n.store;return Sn.symbol({text:s(e,"value")})},RegExp:function(n){var e=n.store,t=s(e,"value"),r=$(s(t,["source","flags"]),2),o=r[0],i=r[1];Sn.regexp({text:["/",o,"/",i]})},Function:function(n){var e=n.store,t=s(e,"value"),r={title:t.map((function(n){return n.toString()}))};f("span",{text:"function",attr:r}),Sn.keyword({text:t.map((function(n){return n.name?" ".concat(n.name):""})),attr:r}),f("span",{text:"()",attr:r})},AsyncFunction:function(n){var e=n.store,t=s(e,"value"),r={title:t.map((function(n){return n.toString()}))};f("span",{text:"async function",attr:r}),Sn.keyword({text:t.map((function(n){return n.name?" ".concat(n.name):""})),attr:r}),f("span",{text:"()",attr:r})},Window:function(n){var e=n.store,t=s(e,"opened");f("span",(function(){c({data:{opened:t}}),f("span",{text:"Window {...",fn:function(){d({passive:!0,stop:!0,capture:!0},{click:v})}}),c({text:"}"})}))},Date:function(){Sn.date({text:l.map((function(n){var e;return null===(e=n.toISOString)||void 0===e?void 0:e.call(n)})),attr:{title:l}})},Array:function(n){var e=n.store,t=$(s(e,["value","opened"]),2),i=t[0],a=t[1];f("span",(function(){c({data:{opened:a}}),f("span",{text:"Array [",data:{clickable:!0},fn:function(){d({passive:!0,stop:!0,capture:!0,prevent:!0},{click:v})}}),m(i,(function(n){var e=n.store,t=n.key;return bn((function(){return o({store:r({and:[{value:e,parentOpened:a,key:t.map(String)}],or:{loc:{file:"/src/object-view.ts",line:91,column:35},name:"store",sid:"xbvkm7"}})})}))})),c({text:"]"})}))},Arguments:function(n){var e=n.store,t=$(s(e,["value","opened"]),2),i=t[0],a=t[1];f("span",(function(){c({data:{opened:a}}),f("span",{text:"Arguments [",fn:function(){d({passive:!0,stop:!0,capture:!0},{click:v})}}),m(i.map((function(n){return z(n)})),(function(n){var e=n.store,t=n.key;return bn((function(){return o({store:r({and:[{value:e,parentOpened:a,key:t.map(String)}],or:{loc:{file:"/src/object-view.ts",line:111,column:35},name:"store",sid:"nufsva"}})})}))})),c({text:"]"})}))},Set:function(n){var e=n.store,t=$(s(e,["value","opened"]),2),i=t[0],a=t[1];f("span",(function(){c({data:{opened:a}}),f("span",{text:"Set [",fn:function(){d({passive:!0,stop:!0,capture:!0},{click:v})}}),m(i.map((function(n){return z(n.values())})),(function(n){var e=n.store,t=n.key;return bn((function(){return o({store:r({and:[{value:e,parentOpened:a,key:t.map(String)}],or:{loc:{file:"/src/object-view.ts",line:131,column:35},name:"store",sid:"-htvons"}})})}))})),c({text:"]"})}))},Map:function(n){var e=n.store,t=$(s(e,["value","opened"]),2),i=t[0],a=t[1];f("span",(function(){c({data:{opened:a}}),f("span",(function(){c({text:"Map {"}),d({passive:!0,stop:!0,capture:!0},{click:v})})),m(i.map((function(n){return z(n.entries())})),(function(n){var e=n.store,t=$(s(e,["0","1"]),2),i=t[0],c=t[1];bn((function(){Sn.string({text:['"',i,'"'],fn:function(){d({passive:!0,stop:!0,capture:!0},{click:v})}}),f("span",{text:" => "}),o({store:r({and:[{value:c,parentOpened:a,key:i}],or:{loc:{file:"/src/object-view.ts",line:159,column:43},name:"store",sid:"fb9vmt"}})})}))})),c({text:"}"})}))},Error:function(n){var e=n.store,t=$(s(e,["value","opened"]),2),i=t[0],a=t[1],l=$(s(i,["name","message"]),2),u=l[0],p=l[1],b=i.map((function(n){var e;return null!==(e=n.stack)&&void 0!==e?e:null}));f("span",(function(){c({data:{opened:a}}),f("span",{text:[u," {"],attr:{title:i.map((function(n){return n.constructor.name}))},fn:function(){d({passive:!0,stop:!0,capture:!0},{click:v})}}),bn((function(){c({data:{hidden:"expanded"}}),Sn.string({text:['"message"'],fn:function(){d({passive:!0,stop:!0,capture:!0},{click:v})}}),f("span",{text:": "}),o({store:r({and:[{value:p,parentOpened:a,key:"message"}],or:{loc:{file:"/src/object-view.ts",line:193,column:39},name:"store",sid:"5h7l4"}})})})),bn((function(){c({data:{hidden:"folded"}}),Sn.string({text:['"stack"'],fn:function(){d({passive:!0,stop:!0,capture:!0},{click:v})}}),f("span",{text:": "});var n=r({and:[{value:b,parentOpened:a,key:"stack"}],or:{loc:{file:"/src/object-view.ts",line:209,column:42},name:"store",sid:"-t932g0"}});o({store:n})})),m(i.map((function(n){return z(Object.entries(n))})),(function(n){var e=n.store,t=$(s(e,["0","1"]),2),i=t[0],c=t[1];bn((function(){Sn.string({text:['"',i,'"'],fn:function(){d({passive:!0,stop:!0,capture:!0},{click:v})}}),f("span",{text:": "}),o({store:r({and:[{value:c,parentOpened:a,key:i}],or:{loc:{file:"/src/object-view.ts",line:227,column:43},name:"store",sid:"-udqrh"}})})}))}))})),f("span",{text:"}"})},__:function(n){var e=n.store;f("span",(function(){var n=$(s(e,["type","value","opened"]),3),t=n[0],i=n[1],a=n[2];c({data:{opened:a}}),f("span",{text:[t," {"],fn:function(){d({passive:!0,stop:!0,capture:!0},{click:v})}}),m(i.map((function(n){return z(Object.entries(n))})),(function(n){var e=n.store,t=$(s(e,["0","1"]),2),i=t[0],c=t[1];bn((function(){Sn.string({text:['"',i,'"'],fn:function(){d({passive:!0,stop:!0,capture:!0},{click:v})}}),f("span",{text:": "}),o({store:r({and:[{value:c,parentOpened:a,key:i}],or:{loc:{file:"/src/object-view.ts",line:260,column:43},name:"store",sid:"-gh80lu"}})})}))}))})),f("span",{text:"}"})}}})})),i=e.value,a=r({and:[{value:i,parentOpened:t(!0,{loc:{file:"/src/object-view.ts",line:277,column:22},name:"parentOpened",sid:"-2w11af"}),key:""},function(n){return n}],or:{loc:{file:"/src/object-view.ts",line:275,column:18},name:"store",sid:"kebhe"}});o({store:a})}function Un(n,e){return e.trimDomain?n.map((function(n){return n.replace("".concat(e.trimDomain,"/"),"")})):n}var Rn,Wn,Kn=Bn("filter-kinds",["event","store"]),Xn=Mn("filter-text","");function _n(o,i,a){var c=n({loc:{file:"/src/logs.ts",line:11,column:23},name:"toggleKind",sid:"al2efl"}),l=n({loc:{file:"/src/logs.ts",line:12,column:26},name:"filterChanged",sid:"sbtuox"}),s=n({loc:{file:"/src/logs.ts",line:13,column:25},name:"clearClicked",sid:"g7uhen"}),u=t(Kn.read(),{loc:{file:"/src/logs.ts",line:14,column:19},name:"$kinds",sid:"th13oa"}),d=e(l,Xn.read(),{loc:{file:"/src/logs.ts",line:15,column:24},name:"$filterText",sid:"-aim8j7"});u.on(c,(function(n,e){return n.includes(e)?n.filter((function(n){return n!==e})):[].concat(z(n),[e])})).watch(Kn.write),d.watch(Xn.write),o.on(s,(function(){return[]})).on(i,(function(){return[]})),$n((function(){f("span",{text:"Show: "}),Pn({title:"Event",attr:{checked:u.map((function(n){return n.includes("event")}))},handler:{click:c.prepend((function(){return"event"}))}}),Pn({title:"Store",attr:{checked:u.map((function(n){return n.includes("store")}))},handler:{click:c.prepend((function(){return"store"}))}}),Pn({title:"Effect",attr:{checked:u.map((function(n){return n.includes("effect")}))},handler:{click:c.prepend((function(){return"effect"}))}}),f("span",{text:"Filter:"}),An({attr:{value:d},handler:{change:l.prepend((function(n){var e,t;return null!==(e=null===(t=n.currentTarget)||void 0===t?void 0:t.value)&&void 0!==e?e:""}))}}),vn({text:"Clear",handler:{click:s},attr:{title:"Press CTRL+L to clear logs"}})})),fn((function(){m({source:o,key:"id",fields:["kind","name","payload","datetime"],fn:function(n){var e=$(n.fields,4),t=e[0],o=e[1],i=e[2],c=e[3],l=Un(o,a),s=r({and:[t,u,function(n,e){return e.includes(n)}],or:{loc:{file:"/src/logs.ts",line:58,column:37},name:"$kindMatched",sid:"-80l9jl"}}),f=r({and:[d,l,function(n,e){return e.includes(n)}],or:{loc:{file:"/src/logs.ts",line:59,column:37},name:"$textMatched",sid:"3h5st1"}}),m=r({and:[s,f,function(n,e){return n&&e}],or:{loc:{file:"/src/logs.ts",line:60,column:33},name:"$visible",sid:"-8m6nr6"}});dn({visible:m,fn:function(){var n=c.map((function(n){return n.toISOString()})),e=c.map((function(n){return n.toLocaleTimeString()}));mn({text:[e," ▸ "],attr:{title:n}}),mn({text:t}),mn({text:[" «",l,"» "]}),pn((function(){return Nn({value:i})}))}})}})}))}function Hn(n,e){fn((function(){var t=n.map((function(n){return Object.entries(n).map((function(n){var e=$(n,2);return w({name:e[0]},e[1])}))}));m({source:t,key:"name",fields:["name","value"],fn:function(n){var t=$(n.fields,2),r=t[0],o=t[1];dn((function(){mn({text:[Un(r,e),": "]}),pn((function(){Nn({value:o})}))}))}})}))}function Vn(n,e){fn((function(){var t=n.map((function(n){return Object.entries(n).map((function(n){var e=$(n,2);return w({name:e[0]},e[1])}))}));m({source:t,key:"name",fields:["name","history"],fn:function(n){var t=$(n.fields,2),r=t[0];t[1],dn((function(){mn({text:[Un(r,e)," "]})}))}})}))}function Gn(n,e){fn((function(){var t=n.map((function(n){return Object.entries(n).map((function(n){var e=$(n,2);return w({sid:e[0]},e[1])}))}));m({source:t,key:"sid",fields:["name","inFlight"],fn:function(n){var t=$(n.fields,2),r=t[0],o=t[1];dn((function(){mn({text:[Un(r,e)," "]}),pn((function(){f("span",(function(){f("span",{text:[" {"]}),bn((function(){Sn.string({text:'"inFlight": '}),Sn.number({text:o})})),p(Wn||(Wn=S(["}"])))}))}))}))}})}))}y.div(Rn||(Rn=S(["\n  display: flex;\n  flex-flow: row nowrap;\n\n  :nth-child(2),\n  :nth-child(3),\n  :nth-child(4),\n  :nth-child(5) {\n    opacity: 0.8;\n  }\n\n  > :nth-child(n + 6) {\n    opacity: 0.5;\n  }\n\n  > :not(:first-child) {\n    margin-left: 0.5rem;\n  }\n"])));var Qn,Yn,Zn,ne;function ee(i){var a=i.$files.map((function(n){return Object.keys(n).sort((function(n,e){return n<e?-1:n>e?1:0}))})),c=a.map((function(n){return n.length>0})),l=n({loc:{file:"/src/files.ts",line:17,column:25},name:"fileSelected",sid:"-jqe342"}),s=n({loc:{file:"/src/files.ts",line:18,column:24},name:"fileCleanup",sid:"hlqci5"}),u=t("",{loc:{file:"/src/files.ts",line:19,column:25},name:"$currentFile",sid:"8hcd8i"}),d=u.map((function(n){return""!==n})),p=d.map((function(n){return!n}));u.on(l,(function(n,e){return e})).on(s,(function(){return""})),$n({style:{flexDirection:"column"},visible:c,fn:function(){On({visible:d,fn:function(){vn({text:"◀",handler:{click:s.prepend((function(){}))}}),f("span",{text:"File:"}),Cn({handler:{change:l.prepend((function(n){return n.currentTarget.value}))},fn:function(){m(a,(function(n){var e=n.store;f("option",{attr:{value:e,selected:r({and:[e,u,function(n,e){return n===e}],or:{loc:{file:"/src/files.ts",line:48,column:50},name:"selected",sid:"6n66ec"}})},text:e})}))}})}}),In({visible:p,fn:function(){var t=n({loc:{file:"/src/files.ts",line:60,column:42},name:"filterChanged",sid:"k3tq2y"}),i=e(t,"",{loc:{file:"/src/files.ts",line:61,column:36},name:"$filter",sid:"ylqhpg"}),c=r({and:[i,a,function(n,e){return e.filter((function(e){return e.includes(n)}))}],or:{loc:{file:"/src/files.ts",line:62,column:43},name:"$filteredFiles",sid:"-f0p9a1"}});re({text:"Please, select file from the list or type the name"});var s=t.prepend((function(n){var e;return null===(e=n.currentTarget)||void 0===e?void 0:e.value}));In((function(){oe({attr:{value:i,placeholder:"Type a part of the file name"},handler:{change:s,keydown:s}}),ie((function(){m(c,(function(e){var t=e.store;e.key;var r=n({loc:{file:"/src/files.ts",line:75,column:51},name:"selectFile",sid:"4tb03w"});o({and:[{source:t,clock:r,target:l}],or:{loc:{file:"/src/files.ts",line:76,column:32},sid:"ipctc"}}),ae({text:t,attr:{tabIndex:"0"},handler:{click:r}})}))}))}))}})}}),$n({visible:d,fn:function(){var n=r({and:[u,i.$files,i.$events,function(n,e,t){return""!==n&&e[n]?Object.fromEntries(e[n].filter((function(n){return"event"===n.kind})).map((function(n){var e=n.name;return[e,t[e]]}))):{}}],or:{loc:{file:"/src/files.ts",line:96,column:28},name:"$events",sid:"n8saf2"}}),e=r({and:[u,i.$files,i.$stores,function(n,e,t){return""!==n&&e[n]?Object.fromEntries(e[n].filter((function(n){return"store"===n.kind})).map((function(n){var e=n.name;return[e,t[e]]}))):{}}],or:{loc:{file:"/src/files.ts",line:104,column:28},name:"$stores",sid:"-qtmfjl"}}),t=r({and:[u,i.$files,i.$effects,function(n,e,t){return""!==n&&e[n]?Object.fromEntries(e[n].filter((function(n){return"effect"===n.kind})).map((function(n){var e=n.name;return[e,t[e]]}))):{}}],or:{loc:{file:"/src/files.ts",line:112,column:29},name:"$effects",sid:"n4x7jt"}});In((function(){Vn(n,i.options),Hn(e,i.options),Gn(t,i.options)}))}})}var te,re=y.h4(Qn||(Qn=S(["\n  margin-top: 0;\n"]))),oe=y.input(Yn||(Yn=S(["\n  display: flex;\n  flex-shrink: 0;\n  padding: 0 0.5rem;\n  border: 1px solid var(--border);\n  border-radius: 0.2rem;\n  margin-bottom: 1rem;\n  font-size: 1rem;\n  line-height: 2rem;\n\n  &:focus {\n    border-color: var(--primary);\n    outline: 0;\n    box-shadow: 0 0 0 2px var(--primary);\n  }\n"]))),ie=y.div(Zn||(Zn=S(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  margin: 0 0;\n  padding: 0 0;\n  overflow-x: auto;\n  align-items: stretch;\n\n  list-style-type: none;\n\n  :nth-child(2n) {\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n"]))),ae=y.button(ne||(ne=S(["\n  color: var(--text);\n  font-family: 'JetBrains Mono', hasklig, monofur, monospace;\n  font-size: 14px;\n  text-align: left;\n\n  border: var(--primary);\n  padding: 0.2rem 0.4rem;\n\n  cursor: pointer;\n\n  &:hover {\n    background-color: var(--primary-dark);\n  }\n\n  &:focus {\n    outline: none;\n    box-shadow: inset 0 0 0 2px var(--primary-dark);\n  }\n"]))),ce=t(!1,{loc:{file:"/src/view.ts",line:13,column:19},name:"$isVisible",sid:"ln45bu"}),le=n({loc:{file:"/src/view.ts",line:14,column:22},name:"togglePressed",sid:"-4qpnv9"}),se=n({loc:{file:"/src/view.ts",line:15,column:21},name:"clearPressed",sid:"5582a"}),ue=n({loc:{file:"/src/view.ts",line:16,column:22},name:"showInspector",sid:"-vtxc3v"});function fe(){var e=t(!1,{loc:{file:"/src/view.ts",line:30,column:20},name:"$inDrag",sid:"fz9nj6"}),r=n({loc:{file:"/src/view.ts",line:31,column:22},name:"mouseDown",sid:"1vwxop"}),o=n({loc:{file:"/src/view.ts",line:32,column:22},name:"mouseMove",sid:"-z4lzop"}),i=n({loc:{file:"/src/view.ts",line:33,column:20},name:"mouseUp",sid:"-o7r6ym"});return e.on(r,(function(){return!0})).on(i,(function(){return!1})),c({handler:{mousedown:r}}),r.watch((function(){document&&(document.addEventListener("mousemove",o),document.addEventListener("mouseup",i))})),i.watch((function(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",i)})),{mouseMove:o,mouseDown:r,mouseUp:i,$inDrag:e}}function de(){var t=n({loc:{file:"/src/view.ts",line:49,column:19},name:"setRef",sid:"-wbz8vw"}),r=e(t,null,{loc:{file:"/src/view.ts",line:50,column:17},name:"$ref",sid:"-b10otu"});return b(t),r}function me(n,e,r,i,a){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};l.visible&&ue(),console.info("%c[effector-inspector] %cPress %cCTRL+B %cto open Inspector","color: gray; font-size: 1rem;","color: currentColor; font-size: 1rem;","color: deepskyblue; font-family: monospace; font-size: 1rem;","color: currentColor; font-size: 1rem;"),on({visible:ce,fn:function(){var s=de(),u=Bn("width",736),f=t(u.read(),{loc:{file:"/src/view.ts",line:65,column:27},name:"$width",sid:"er5jku"});c({style:{width:v(te||(te=S(["","px"])),f)}}),an({text:"∙∙∙",fn:function(){var n=fe(),e=n.mouseMove,r=n.mouseDown,i=n.mouseUp,a=n.$inDrag;c({data:{active:a}});var l=t(0,{loc:{file:"/src/view.ts",line:72,column:35},name:"$shift",sid:"-gd3rpb"}),d=o({and:[s,r,function(n,e){return{block:n,event:e}}],or:{loc:{file:"/src/view.ts",line:73,column:38},name:"dragStart",sid:"-xj5i6r"}}),m=o({and:[s,e,function(n,e){return n.getBoundingClientRect().right-e.clientX}],or:{loc:{file:"/src/view.ts",line:74,column:37},name:"dragMove",sid:"vlftz8"}}),p=o({and:[l,m,function(n,e){return e-n}],or:{loc:{file:"/src/view.ts",line:78,column:41},name:"correctWidth",sid:"-561hwi"}});f.on(p,(function(n,e){return e})),l.on(d,(function(n,e){var t=e.block,r=e.event;return t?t.getBoundingClientRect().left-r.clientX:0})),o({and:[f,i,u.save],or:{loc:{file:"/src/view.ts",line:81,column:20},sid:"pl2go9"}})}}),Ln({files:{title:"Files",fn:function(){ee({$stores:n,$events:e,$effects:r,$files:a,options:l})}},stores:{title:"Stores",fn:function(){Hn(n,l)}},effects:{title:"Effects",fn:function(){Gn(r,l)}},events:{title:"Events",fn:function(){Vn(e,l)}},logs:{title:"Logs",fn:function(){_n(i,se,l)}}})}})}"object"===("undefined"==typeof document?"undefined":k(document))&&document.addEventListener("keypress",(function(n){n.ctrlKey&&("l"!==n.key&&12!==n.keyCode||se(),"b"!==n.key&&2!==n.keyCode||le())})),ce.on(le,(function(n){return!n})).on(ue,(function(){return!0}));var pe=t({},{loc:{file:"/src/index.ts",line:5,column:15},name:"$files",sid:"-b5fubx"}),ve=n({loc:{file:"/src/index.ts",line:6,column:17},name:"storeAdd",sid:"-w7nr43"}),be=n({loc:{file:"/src/index.ts",line:7,column:21},name:"storeUpdated",sid:"w3u5z1"}),xe=t({},{loc:{file:"/src/index.ts",line:8,column:16},name:"$stores",sid:"ioizqq"}),ye=n({loc:{file:"/src/index.ts",line:9,column:17},name:"eventAdd",sid:"-o9yfun"}),ge=n({loc:{file:"/src/index.ts",line:10,column:23},name:"eventTriggered",sid:"-3vh36s"}),he=t({},{loc:{file:"/src/index.ts",line:11,column:16},name:"$events",sid:"-b7nvrd"}),we=n({loc:{file:"/src/index.ts",line:12,column:18},name:"effectAdd",sid:"fekv6p"}),ke=n({loc:{file:"/src/index.ts",line:13,column:24},name:"effectTriggered",sid:"-w5t4dt"}),je=t({},{loc:{file:"/src/index.ts",line:14,column:17},name:"$effects",sid:"bxdte"}),Oe=t([],{loc:{file:"/src/index.ts",line:15,column:14},name:"$logs",sid:"e84fof"});xe.on(ve,(function(n,e){return w(w({},n),{},j({},e.name,{value:e.store.getState(),mapped:e.mapped}))})).on(be,(function(n,e){var t=e.name,r=e.value;return n[t]=w(w({},n[t]),{},{value:r}),w({},n)})),pe.on(ve,(function(n,e){var t=e.name,r=e.file;if(r){if(n[r]){var o=n[r];return w(w({},n),{},j({},r,[].concat(z(o),[{kind:"store",name:t}])))}return w(w({},n),{},j({},r,[{kind:"store",name:t}]))}return n})),he.on(ye,(function(n,e){return w(w({},n),{},j({},e.name,{mapped:e.mapped,history:[]}))})).on(ge,(function(n,e){var t=e.name,r=e.params;return n[t]=w(w({},n[t]),{},{history:[JSON.parse(JSON.stringify(r))].concat(z(n[t].history))}),w({},n)})),pe.on(ye,(function(n,e){var t=e.name,r=e.file;if(r){if(n[r]){var o=n[r];return w(w({},n),{},j({},r,[].concat(z(o),[{kind:"event",name:t}])))}return w(w({},n),{},j({},r,[{kind:"event",name:t}]))}return n})),je.on(we,(function(n,e){return w(w({},n),{},j({},e.sid,{name:e.name,effect:e.effect,inFlight:e.effect.inFlight.getState()}))})).on(ke,(function(n,e){var t=e.sid,r=n[t];return n[t]=w(w({},r),{},{inFlight:r.effect.inFlight.getState()}),w({},n)})),pe.on(we,(function(n,e){var t=e.name,r=e.file;if(r){if(n[r]){var o=n[r];return w(w({},n),{},j({},r,[].concat(z(o),[{kind:"event",name:t}])))}return w(w({},n),{},j({},r,[{kind:"event",name:t}]))}return n}));var Se=1e3,$e=i({handler:function(n){var e=n.name,t=n.kind,r=n.payload;return{id:(++Se).toString(36),kind:t,name:e,payload:r,datetime:new Date}}},{loc:{file:"/src/index.ts",line:94,column:23},name:"createRecordFx",sid:"o8fkim"});function ze(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="object"===("undefined"==typeof document?"undefined":k(document))&&document.createElement("div");if(e)return e.classList.add("effector-inspector"),document.body.append(e),x(e,(function(){return me(xe,he,je,Oe,pe,n)})),x(e,g),{root:e}}function Ee(n){var e,t;return null===(e=n.defaultConfig)||void 0===e||null===(t=e.loc)||void 0===t?void 0:t.file}function Ae(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.name||Ce(n);ve({store:n,name:t,mapped:e.mapped||!1,file:Ee(n)}),a({and:{from:n.updates.map((function(n){return{name:t,value:n}})),to:be},or:{loc:{file:"/src/index.ts",line:143,column:4},sid:"-31rizn"}})}function Ie(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.name||Ce(n);ye({event:n,name:t,mapped:e.mapped||!1,file:Ee(n)}),a({and:{from:n.map((function(n){return{name:t,params:n}})),to:ge},or:{loc:{file:"/src/index.ts",line:156,column:4},sid:"-2j2itd"}})}function Pe(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Ce(n),o=t.sid||n.sid||r;we({effect:n,name:r,sid:o,attached:null!==(e=t.attached)&&void 0!==e&&e,file:Ee(n)}),a({and:{from:[n,n.finally],to:ke.prepend((function(){return{sid:o}}))},or:{loc:{file:"/src/index.ts",line:174,column:4},sid:"-1m2v7p"}});var i=n.map((function(n){return{kind:"effect",name:r,payload:n}})),c=n.done.map((function(n){return{kind:"effect",name:r+".done",payload:n}})),l=n.fail.map((function(n){return{kind:"effect",name:r+".fail",payload:n}}));a({and:{from:[i,c,l],to:$e},or:{loc:{file:"/src/index.ts",line:193,column:4},sid:"-ojf0o"}})}function Ce(n){return n.compositeName.path.join("/")}a({and:{from:ge,to:$e.prepend((function(n){return{kind:"event",name:n.name,payload:n.params}}))},or:{loc:{file:"/src/index.ts",line:105,column:0},sid:"-4wufh5"}}),a({and:{from:be,to:$e.prepend((function(n){return{kind:"store",name:n.name,payload:n.value}}))},or:{loc:{file:"/src/index.ts",line:113,column:0},sid:"-4gwe9o"}}),Oe.on($e.doneData,(function(n,e){return[e].concat(z(n))}));export{Pe as addEffect,Ie as addEvent,Ae as addStore,ze as createInspector};
//# sourceMappingURL=common.mjs.map
